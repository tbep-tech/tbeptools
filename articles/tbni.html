<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Tampa Bay Nekton Index • tbeptools</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Tampa Bay Nekton Index">
<meta property="og:description" content="tbeptools">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">tbeptools</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/intro.html">Intro to TBEP Tools</a>
    </li>
    <li>
      <a href="../articles/seagrasstransect.html">Seagrass Transect Data</a>
    </li>
    <li>
      <a href="../articles/tbbi.html">Tampa Bay Benthic Index</a>
    </li>
    <li>
      <a href="../articles/tbni.html">Tampa Bay Nekton Index</a>
    </li>
    <li>
      <a href="../articles/tidalcreeks.html">Tidal Creek Assessment</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/tbep-tech/tbeptools/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="tbni_files/accessible-code-block-0.0.1/empty-anchor.js"></script><link href="tbni_files/anchor-sections-1.0/anchor-sections.css" rel="stylesheet">
<script src="tbni_files/anchor-sections-1.0/anchor-sections.js"></script><script src="tbni_files/htmlwidgets-1.5.3/htmlwidgets.js"></script><script src="tbni_files/jquery-1.12.4/jquery.min.js"></script><link href="tbni_files/leaflet-1.3.1/leaflet.css" rel="stylesheet">
<script src="tbni_files/leaflet-1.3.1/leaflet.js"></script><link href="tbni_files/leafletfix-1.0.0/leafletfix.css" rel="stylesheet">
<script src="tbni_files/Proj4Leaflet-1.0.1/proj4-compressed.js"></script><script src="tbni_files/Proj4Leaflet-1.0.1/proj4leaflet.js"></script><link href="tbni_files/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet">
<script src="tbni_files/leaflet-binding-2.0.3/leaflet.js"></script><script src="tbni_files/leaflet-providers-1.9.0/leaflet-providers_1.9.0.js"></script><script src="tbni_files/leaflet-providers-plugin-2.0.3/leaflet-providers-plugin.js"></script><script src="tbni_files/FlatGeoBuf-3.3.3/fgb.js"></script><script src="tbni_files/FlatGeoBuf-3.3.3/flatgeobuf-geojson.min.js"></script><script src="tbni_files/chromajs-2.1.0/chroma.min.js"></script><link id="fimstations-bay_segment-1-attachment" rel="attachment" href="tbni_files/fimstations-bay_segment-0.0.1/fimstations-bay_segment_layer.fgb">
<link href="tbni_files/HomeButton-0.0.1/home-button.css" rel="stylesheet">
<script src="tbni_files/HomeButton-0.0.1/home-button.js"></script><script src="tbni_files/HomeButton-0.0.1/easy-button-src.min.js"></script><script src="tbni_files/clipboard-0.0.1/setClipboardText.js"></script><link href="tbni_files/mapviewCSS-0.0.1/mapview-popup.css" rel="stylesheet">
<link href="tbni_files/mapviewCSS-0.0.1/mapview.css" rel="stylesheet">
<script src="tbni_files/plotly-binding-4.9.2.1/plotly.js"></script><script src="tbni_files/typedarray-0.1/typedarray.min.js"></script><link href="tbni_files/crosstalk-1.1.0.1/css/crosstalk.css" rel="stylesheet">
<script src="tbni_files/crosstalk-1.1.0.1/js/crosstalk.min.js"></script><link href="tbni_files/plotly-htmlwidgets-css-1.52.2/plotly-htmlwidgets.css" rel="stylesheet">
<script src="tbni_files/plotly-main-1.52.2/plotly-latest.min.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Tampa Bay Nekton Index</h1>
            
            <h4 class="date">2020-12-13</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/tbep-tech/tbeptools/blob/master/vignettes/tbni.Rmd"><code>vignettes/tbni.Rmd</code></a></small>
      <div class="hidden name"><code>tbni.Rmd</code></div>

    </div>

    
    
<div id="background" class="section level2">
<h2 class="hasAnchor">
<a href="#background" class="anchor"></a>Background</h2>
<p>The Tampa Bay Nekton Index (TBNI) <span class="citation">[1,2]</span>) is a multimetric assessment method that quantifies the ecological health of the nekton community in Tampa Bay. The index provides a complementary approach to evaluating environmental condition that is supported by other assessment methods currently available for Tampa Bay (e.g., water quality report card, Benthic index, etc.). The tbeptools package includes several functions described below to import data required for the index, analyze the data to calculate metrics and index scores, and plot the results to view trends over time. Each of the functions are described in detail below.</p>
<p>The TBNI uses catch data from the Florida Fish and Wildlife Conservation Commission (FWC) Fish and Wildlife Research Institute’s (FWRI) <a href="https://myfwc.com/research/saltwater/reef-fish/monitoring/fim-stratified-random-sampling/">Fisheries-Independent Monitoring (FIM) program</a>. Catch results from a center-bag seine have the longest and most consistent record in the FIM database and were used to develop the TBNI. These include counts and taxa identification for individuals caught in near shore areas, generally as early recruits, juveniles, and smaller-bodied nekton. All fish and selected invertebrates are identified to the lowest possible taxon (usually species), counted, and a subset are measured. Current protocols were established in 1998 and TBNI estimates are unavailable prior to this date.</p>
</div>
<div id="data-import-and-included-datasets" class="section level2">
<h2 class="hasAnchor">
<a href="#data-import-and-included-datasets" class="anchor"></a>Data import and included datasets</h2>
<p>Data required for calculating TBNI scores can be imported into the current R session using the <code><a href="../reference/read_importfim.html">read_importfim()</a></code> function. This function downloads the latest FIM file from an FTP site if the data have not already been downloaded to the location specified by the input arguments.</p>
<p>To download the data, first create a character path for the location of the file. If one does not exist, specify a desired location and name for the downloaded file. Here, we want to put the file on the desktop in our home directory and name it <code>fimdata.csv</code>.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">csv</span> <span class="op">&lt;-</span> <span class="st">'~/Desktop/fimdata.csv'</span>
<span class="va">fimdata</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/read_importfim.html">read_importfim</a></span><span class="op">(</span><span class="va">csv</span><span class="op">)</span></code></pre></div>
<p>Running the above code will return the following error:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co">#&gt; Error in read_importfim(csv) : file.exists(csv) is not TRUE</span></code></pre></div>
<p>We get an error message from the function indicating that the file is not found. This makes sense because the file doesn’t exist yet, so we need to tell the function to download the latest file. This is done by changing the <code>download_latest</code> argument to <code>TRUE</code> (the default is <code>FALSE</code>).</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">fimdata</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/read_importfim.html">read_importfim</a></span><span class="op">(</span><span class="va">csv</span>, download_latest <span class="op">=</span> <span class="cn">T</span><span class="op">)</span></code></pre></div>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co">#&gt; File ~/Desktop/fimdata.csv does not exist, replacing with downloaded file...</span>

<span class="co">#&gt; trying URL 'ftp://ftp.floridamarine.org/users/fim/tmac/NektonIndex/TampaBay_NektonIndexData.csv' length 11083878 bytes (10.6 MB)</span></code></pre></div>
<p>Now we get an indication that the file on the server is being downloaded. When the download is complete, we’ll have the data downloaded and saved to the <code>fimdata</code> object in the current R session.</p>
<p>If we try to run the function again after downloading the data from the server, we get the following message. This check is done to make sure that the data are not unnecessarily downloaded if the current matches the file on the server.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">fimdata</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/read_importfim.html">read_importfim</a></span><span class="op">(</span><span class="va">csv</span>, download_latest <span class="op">=</span> <span class="cn">T</span><span class="op">)</span></code></pre></div>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co">#&gt; File is current..</span></code></pre></div>
<p>Every time that tbeptools is used to work with the FIM data, <code><a href="../reference/read_importfim.html">read_importfim()</a></code> should be used to import the data. You will always receive the message <code>File is current...</code> if your local file matches the one on the server. However, new data are regularly collected and posted on the server. If <code>download_latest = TRUE</code> and your local file is out of date, you will receive the following message:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co">#&gt; Replacing local file with current...</span></code></pre></div>
<p>After the data are successfully imported, you can view them from the assigned object:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">fimdata</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 6 x 17</span>
<span class="co">#&gt;   Reference Sampling_Date Zone   Grid NODCCODE bay_segment  Year Month Total_N</span>
<span class="co">#&gt;   &lt;chr&gt;     &lt;date&gt;        &lt;chr&gt; &lt;int&gt; &lt;chr&gt;    &lt;chr&gt;       &lt;dbl&gt; &lt;dbl&gt;   &lt;dbl&gt;</span>
<span class="co">#&gt; 1 TBM19980… 1998-01-09    A        31 8747020… OTB          1998     1      15</span>
<span class="co">#&gt; 2 TBM19980… 1998-01-09    A        31 8805020… OTB          1998     1       2</span>
<span class="co">#&gt; 3 TBM19980… 1998-01-09    A        62 6177010… OTB          1998     1       1</span>
<span class="co">#&gt; 4 TBM19980… 1998-01-09    A        63 9998000… OTB          1998     1       0</span>
<span class="co">#&gt; 5 TBM19980… 1998-01-09    A        65 8820020… OTB          1998     1       1</span>
<span class="co">#&gt; 6 TBM19980… 1998-01-09    A        65 8826020… OTB          1998     1       1</span>
<span class="co">#&gt; # … with 8 more variables: ScientificName &lt;chr&gt;, Include_TB_Index &lt;chr&gt;,</span>
<span class="co">#&gt; #   Hab_Cat &lt;chr&gt;, Est_Cat &lt;chr&gt;, Est_Use &lt;chr&gt;, Feeding_Cat &lt;chr&gt;,</span>
<span class="co">#&gt; #   Feeding_Guild &lt;chr&gt;, Selected_Taxa &lt;chr&gt;</span></code></pre></div>
<p>The imported data are formatted for calculating the TBNI. The columns include a <code>Reference</code> for the FIM sampling site, the sampling date, sampling <code>Zone</code>, sampling <code>Grid</code>, <code>NODCCODE</code> as a unique identifier for species, sample year, sample month, total catch as <code>Total_N</code>, scientific name, a column indicating if the species is included in the index, and several columns indicating species-specific information required for the metrics. For the final columns, a separate lookup table is provided in the package that is merged with the imported FIM data. This file, <code>tbnispp</code>, can be viewed anytime the package is loaded:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">tbnispp</span><span class="op">)</span>
<span class="co">#&gt;     NODCCODE               ScientificName Include_TB_Index Hab_Cat Est_Cat</span>
<span class="co">#&gt; 1 8860030201 Acanthostracion quadricornis                Y       B      MS</span>
<span class="co">#&gt; 2 8858010000               Achiridae spp.                N       B      ES</span>
<span class="co">#&gt; 3 8858030202             Achirus lineatus                Y       B      ES</span>
<span class="co">#&gt; 4 8804040401                Adinia xenica                Y       B      ES</span>
<span class="co">#&gt; 5 8713070101           Aetobatus narinari                Y       B      MS</span>
<span class="co">#&gt; 6 8739010101                Albula vulpes                Y       P      MS</span>
<span class="co">#&gt;   Est_Use Feeding_Cat Feeding_Guild Selected_Taxa</span>
<span class="co">#&gt; 1       O          TS            ZB             N</span>
<span class="co">#&gt; 2       O          TS            ZB             N</span>
<span class="co">#&gt; 3       O          TS            ZB             N</span>
<span class="co">#&gt; 4       O          TS            ZP             N</span>
<span class="co">#&gt; 5       F          TS            ZB             N</span>
<span class="co">#&gt; 6       S          TS            ZB             Y</span></code></pre></div>
<p>The <code><a href="../reference/read_importfim.html">read_importfim()</a></code> function also matches the catch data with FIM sampling stations by appropriate bay segments. This is done with an additional lookup table included in the package. The <code>fimstations</code> table is a simple features object with georeferenced spatial coordinates.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">mapview</span><span class="op">(</span><span class="va">fimstations</span>, zcol <span class="op">=</span> <span class="st">'bay_segment'</span><span class="op">)</span></code></pre></div>
<div id="htmlwidget-483f736025e64c15f48d" style="width:700px;height:432.632880098888px;" class="leaflet html-widget"></div>
<script type="application/json" data-for="htmlwidget-483f736025e64c15f48d">{"x":{"options":{"minZoom":1,"maxZoom":52,"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}},"preferCanvas":false,"bounceAtZoomLimits":false,"maxBounds":[[[-90,-370]],[[90,370]]]},"calls":[{"method":"addProviderTiles","args":["CartoDB.Positron","CartoDB.Positron","CartoDB.Positron",{"errorTileUrl":"","noWrap":false,"detectRetina":false,"pane":"tilePane"}]},{"method":"addProviderTiles","args":["CartoDB.DarkMatter","CartoDB.DarkMatter","CartoDB.DarkMatter",{"errorTileUrl":"","noWrap":false,"detectRetina":false,"pane":"tilePane"}]},{"method":"addProviderTiles","args":["OpenStreetMap","OpenStreetMap","OpenStreetMap",{"errorTileUrl":"","noWrap":false,"detectRetina":false,"pane":"tilePane"}]},{"method":"addProviderTiles","args":["Esri.WorldImagery","Esri.WorldImagery","Esri.WorldImagery",{"errorTileUrl":"","noWrap":false,"detectRetina":false,"pane":"tilePane"}]},{"method":"addProviderTiles","args":["OpenTopoMap","OpenTopoMap","OpenTopoMap",{"errorTileUrl":"","noWrap":false,"detectRetina":false,"pane":"tilePane"}]},{"method":"createMapPane","args":["point",440]},{"method":"addFlatGeoBuf","args":["fimstations-bay_segment","fimstations - bay_segment",null,true,"bay_segment",{"radius":6,"stroke":true,"color":"#333333","weight":1,"opacity":0.9,"fill":true,"fillColor":null,"fillOpacity":0.6},{"className":"","pane":"point"},"mapview-popup",{"radius":{"to":[3,15],"from":[3,15]},"weight":{"to":[1,10],"from":[1,10]},"opacity":{"to":[0,1],"from":[0,1]},"fillOpacity":{"to":[0,1],"from":[0,1]}}]},{"method":"addScaleBar","args":[{"maxWidth":100,"metric":true,"imperial":true,"updateWhenIdle":true,"position":"bottomleft"}]},{"method":"addHomeButton","args":[-82.7333,27.5002,-82.386383,28.034167,"fimstations - bay_segment","Zoom to fimstations - bay_segment","<strong> fimstations - bay_segment <\/strong>","bottomright"]},{"method":"addLayersControl","args":[["CartoDB.Positron","CartoDB.DarkMatter","OpenStreetMap","Esri.WorldImagery","OpenTopoMap"],"fimstations - bay_segment",{"collapsed":true,"autoZIndex":true,"position":"topleft"}]},{"method":"addLegend","args":[{"colors":["#4B0055","#007094","#00BE7D","#FDE333"],"labels":["HB","LTB","MTB","OTB"],"na_color":null,"na_label":"NA","opacity":1,"position":"topright","type":"factor","title":"fimstations - bay_segment","extra":null,"layerId":null,"className":"info legend","group":"fimstations - bay_segment"}]}],"fitBounds":[27.5002,-82.7333,28.034167,-82.386383,[]]},"evals":[],"jsHooks":{"render":[{"code":"function(el, x, data) {\n  return (\n      function(el, x, data) {\n      // get the leaflet map\n      var map = this; //HTMLWidgets.find('#' + el.id);\n      // we need a new div element because we have to handle\n      // the mouseover output separately\n      // debugger;\n      function addElement () {\n      // generate new div Element\n      var newDiv = $(document.createElement('div'));\n      // append at end of leaflet htmlwidget container\n      $(el).append(newDiv);\n      //provide ID and style\n      newDiv.addClass('lnlt');\n      newDiv.css({\n      'position': 'relative',\n      'bottomleft':  '0px',\n      'background-color': 'rgba(255, 255, 255, 0.7)',\n      'box-shadow': '0 0 2px #bbb',\n      'background-clip': 'padding-box',\n      'margin': '0',\n      'padding-left': '5px',\n      'color': '#333',\n      'font': '9px/1.5 \"Helvetica Neue\", Arial, Helvetica, sans-serif',\n      'z-index': '700',\n      });\n      return newDiv;\n      }\n\n\n      // check for already existing lnlt class to not duplicate\n      var lnlt = $(el).find('.lnlt');\n\n      if(!lnlt.length) {\n      lnlt = addElement();\n\n      // grab the special div we generated in the beginning\n      // and put the mousmove output there\n\n      map.on('mousemove', function (e) {\n      if (e.originalEvent.ctrlKey) {\n      if (document.querySelector('.lnlt') === null) lnlt = addElement();\n      lnlt.text(\n                           ' lon: ' + (e.latlng.lng).toFixed(5) +\n                           ' | lat: ' + (e.latlng.lat).toFixed(5) +\n                           ' | zoom: ' + map.getZoom() +\n                           ' | x: ' + L.CRS.EPSG3857.project(e.latlng).x.toFixed(0) +\n                           ' | y: ' + L.CRS.EPSG3857.project(e.latlng).y.toFixed(0) +\n                           ' | epsg: 3857 ' +\n                           ' | proj4: +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs ');\n      } else {\n      if (document.querySelector('.lnlt') === null) lnlt = addElement();\n      lnlt.text(\n                      ' lon: ' + (e.latlng.lng).toFixed(5) +\n                      ' | lat: ' + (e.latlng.lat).toFixed(5) +\n                      ' | zoom: ' + map.getZoom() + ' ');\n      }\n      });\n\n      // remove the lnlt div when mouse leaves map\n      map.on('mouseout', function (e) {\n      var strip = document.querySelector('.lnlt');\n      if( strip !==null) strip.remove();\n      });\n\n      };\n\n      //$(el).keypress(67, function(e) {\n      map.on('preclick', function(e) {\n      if (e.originalEvent.ctrlKey) {\n      if (document.querySelector('.lnlt') === null) lnlt = addElement();\n      lnlt.text(\n                      ' lon: ' + (e.latlng.lng).toFixed(5) +\n                      ' | lat: ' + (e.latlng.lat).toFixed(5) +\n                      ' | zoom: ' + map.getZoom() + ' ');\n      var txt = document.querySelector('.lnlt').textContent;\n      console.log(txt);\n      //txt.innerText.focus();\n      //txt.select();\n      setClipboardText('\"' + txt + '\"');\n      }\n      });\n\n      }\n      ).call(this.getMap(), el, x, data);\n}","data":null},{"code":"function(el, x, data) {\n  return (function(el,x,data){\n           var map = this;\n\n           map.on('keypress', function(e) {\n               console.log(e.originalEvent.code);\n               var key = e.originalEvent.code;\n               if (key === 'KeyE') {\n                   var bb = this.getBounds();\n                   var txt = JSON.stringify(bb);\n                   console.log(txt);\n\n                   setClipboardText('\\'' + txt + '\\'');\n               }\n           })\n        }).call(this.getMap(), el, x, data);\n}","data":null}]}}</script><p>The <code><a href="../reference/read_importfim.html">read_importfim()</a></code> function processes the observed data as needed for the TBNI, including merging the rows with the <code>tbnispp</code> and <code>fimstations</code> data. Once imported, the metrics and scores can be calculated.</p>
</div>
<div id="calculating-metrics-and-tbni-scores" class="section level2">
<h2 class="hasAnchor">
<a href="#calculating-metrics-and-tbni-scores" class="anchor"></a>Calculating metrics and TBNI scores</h2>
<p>Metrics and scores for the Tampa Bay Nekton Index can be calculated using two functions. The <code><a href="../reference/anlz_tbnimet.html">anlz_tbnimet()</a></code> function calculates all raw metrics and the <code><a href="../reference/anlz_tbniscr.html">anlz_tbniscr()</a></code> function calculates scored metrics and the final TBNI score. Both functions use the imported and formatted FIM data as input.</p>
<p>The TBNI includes five metrics that were sensitive to stressor gradients and provide unique information about Nekton community response to environmental conditions. The metrics include:</p>
<ul>
<li><p><code>NumTaxa</code>: Species richness</p></li>
<li><p><code>BenthicTaxa</code>: Species richness for benthic taxa</p></li>
<li><p><code>TaxaSelect</code>: Number of “selected” species (i.e., commercially and/or recreationally important)</p></li>
<li><p><code>NumGuilds</code>: Number of trophic guilds</p></li>
<li><p><code>Shannon</code>: Shannon Diversity (H)</p></li>
</ul>
<p>Raw metrics are first calculated from the observed data and then scaled to a standard score from 0 - 10 by accounting for expected relationships to environmental gradients and 5th/95th percentiles of the distributions. The final TBNI score is the summed average of the scores ranging from 0 - 100.</p>
<p>The raw metrics, scored metrics, and final TBNI score is returned with the <code><a href="../reference/anlz_tbniscr.html">anlz_tbniscr()</a></code> function.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">tbniscr</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/anlz_tbniscr.html">anlz_tbniscr</a></span><span class="op">(</span><span class="va">fimdata</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">tbniscr</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 6 x 16</span>
<span class="co">#&gt;   Reference  Year Month Season bay_segment TBNI_Score NumTaxa ScoreNumTaxa</span>
<span class="co">#&gt;   &lt;chr&gt;     &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;  &lt;chr&gt;            &lt;dbl&gt;   &lt;dbl&gt;        &lt;dbl&gt;</span>
<span class="co">#&gt; 1 TBM19980…  1998     1 Winter OTB                 18       2            2</span>
<span class="co">#&gt; 2 TBM19980…  1998     1 Winter OTB                 14       1            1</span>
<span class="co">#&gt; 3 TBM19980…  1998     1 Winter OTB                  0       0            0</span>
<span class="co">#&gt; 4 TBM19980…  1998     1 Winter OTB                 20       2            2</span>
<span class="co">#&gt; 5 TBM19980…  1998     1 Winter MTB                 46       4            4</span>
<span class="co">#&gt; 6 TBM19980…  1998     1 Winter MTB                 24       2            2</span>
<span class="co">#&gt; # … with 8 more variables: BenthicTaxa &lt;dbl&gt;, ScoreBenthicTaxa &lt;dbl&gt;,</span>
<span class="co">#&gt; #   TaxaSelect &lt;dbl&gt;, ScoreTaxaSelect &lt;dbl&gt;, NumGuilds &lt;dbl&gt;,</span>
<span class="co">#&gt; #   ScoreNumGuilds &lt;dbl&gt;, Shannon &lt;dbl&gt;, ScoreShannon &lt;dbl&gt;</span></code></pre></div>
<p>The five metrics chosen for the TBNI were appropriate for the Tampa Bay dataset and were selected from a larger pool of candidate metrics. All potential metrics can be calculated using the <code><a href="../reference/anlz_tbnimet.html">anlz_tbnimet()</a></code> function. These metrics can be used in standalone assessments or for developing a Nekton index outside of Tampa Bay. The argument <code>all = TRUE</code> must be used to return all metrics, otherwise only the selected five for the TBNI are returned.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">tbnimet</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/anlz_tbnimet.html">anlz_tbnimet</a></span><span class="op">(</span><span class="va">fimdata</span>, all <span class="op">=</span> <span class="cn">T</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">tbnimet</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 6 x 37</span>
<span class="co">#&gt;   Reference  Year Month Season bay_segment NumTaxa NumIndiv Shannon Simpson</span>
<span class="co">#&gt;   &lt;chr&gt;     &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;  &lt;chr&gt;         &lt;dbl&gt;    &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;</span>
<span class="co">#&gt; 1 TBM19980…  1998     1 Winter OTB               2       17   0.362    1.26</span>
<span class="co">#&gt; 2 TBM19980…  1998     1 Winter OTB               1        1   0        1   </span>
<span class="co">#&gt; 3 TBM19980…  1998     1 Winter OTB               0        0   0        0   </span>
<span class="co">#&gt; 4 TBM19980…  1998     1 Winter OTB               2        2   0.693    2   </span>
<span class="co">#&gt; 5 TBM19980…  1998     1 Winter MTB               4       11   1.16     2.81</span>
<span class="co">#&gt; 6 TBM19980…  1998     1 Winter MTB               2        5   0.500    1.47</span>
<span class="co">#&gt; # … with 28 more variables: Pielou &lt;dbl&gt;, TaxaSelect &lt;dbl&gt;, NumGuilds &lt;dbl&gt;,</span>
<span class="co">#&gt; #   TSTaxa &lt;dbl&gt;, TGTaxa &lt;dbl&gt;, BenthicTaxa &lt;dbl&gt;, PelagicTaxa &lt;dbl&gt;,</span>
<span class="co">#&gt; #   OblTaxa &lt;dbl&gt;, MSTaxa &lt;dbl&gt;, ESTaxa &lt;dbl&gt;, SelectIndiv &lt;dbl&gt;, Taxa90 &lt;dbl&gt;,</span>
<span class="co">#&gt; #   TSAbund &lt;dbl&gt;, TGAbund &lt;dbl&gt;, BenthicAbund &lt;dbl&gt;, PelagicAbund &lt;dbl&gt;,</span>
<span class="co">#&gt; #   OblAbund &lt;dbl&gt;, ESAbund &lt;dbl&gt;, MSAbund &lt;dbl&gt;, Num_LR &lt;dbl&gt;, PropTG &lt;dbl&gt;,</span>
<span class="co">#&gt; #   PropTS &lt;dbl&gt;, PropBenthic &lt;dbl&gt;, PropPelagic &lt;dbl&gt;, PropObl &lt;dbl&gt;,</span>
<span class="co">#&gt; #   PropMS &lt;dbl&gt;, PropES &lt;dbl&gt;, PropSelect &lt;dbl&gt;</span></code></pre></div>
</div>
<div id="plotting-results" class="section level2">
<h2 class="hasAnchor">
<a href="#plotting-results" class="anchor"></a>Plotting results</h2>
<p>The TBNI scores can be viewed as annual averages using the <code><a href="../reference/show_tbniscr.html">show_tbniscr()</a></code>, <code><a href="../reference/show_tbniscrall.html">show_tbniscrall()</a></code> and <code><a href="../reference/show_tbnimatrix.html">show_tbnimatrix()</a></code> functions. The <code><a href="../reference/show_tbniscr.html">show_tbniscr()</a></code> creates a line graph of values over time for each bay segment, whereas the <code><a href="../reference/show_tbniscrall.html">show_tbniscrall()</a></code> function plots an overall average across bay segments over time. The <code><a href="../reference/show_tbnimatrix.html">show_tbnimatrix()</a></code> plots the annual bay segment averages as categorical values in a conventional “stoplight” graphic. The input to each function is the output from the <code><a href="../reference/anlz_tbniscr.html">anlz_tbniscr()</a></code> function.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/show_tbniscr.html">show_tbniscr</a></span><span class="op">(</span><span class="va">tbniscr</span><span class="op">)</span></code></pre></div>
<p><img src="tbni_files/figure-html/unnamed-chunk-13-1.png" width="672" style="display: block; margin: auto;"></p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/show_tbniscrall.html">show_tbniscrall</a></span><span class="op">(</span><span class="va">tbniscr</span><span class="op">)</span></code></pre></div>
<p><img src="tbni_files/figure-html/unnamed-chunk-14-1.png" width="672" style="display: block; margin: auto;"></p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/show_tbnimatrix.html">show_tbnimatrix</a></span><span class="op">(</span><span class="va">tbniscr</span><span class="op">)</span></code></pre></div>
<p><img src="tbni_files/figure-html/unnamed-chunk-15-1.png" width="288" style="display: block; margin: auto;"></p>
<p>Each of the plots can also be produced as <a href="https://plotly.com/r/">plotly</a> interactive plots by setting <code>plotly = TRUE</code> inside each function.</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/show_tbniscr.html">show_tbniscr</a></span><span class="op">(</span><span class="va">tbniscr</span>, plotly <span class="op">=</span> <span class="cn">T</span><span class="op">)</span></code></pre></div>
<div id="htmlwidget-f8994e8e0d5a53a8979e" style="width:672px;height:480px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-f8994e8e0d5a53a8979e">{"x":{"data":[{"x":[null,null,null,null,null],"y":[null,32,32,null,null],"text":"","type":"scatter","mode":"lines","line":{"width":1.88976377952756,"color":"transparent","dash":"solid"},"fill":"toself","fillcolor":"rgba(255,0,0,0.3)","hoveron":"fills","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[null,null,null,null,null],"y":[32,46,46,32,32],"text":"","type":"scatter","mode":"lines","line":{"width":1.88976377952756,"color":"transparent","dash":"solid"},"fill":"toself","fillcolor":"rgba(255,255,0,0.3)","hoveron":"fills","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[null,null,null,null,null],"y":[46,null,null,46,46],"text":"","type":"scatter","mode":"lines","line":{"width":1.88976377952756,"color":"transparent","dash":"solid"},"fill":"toself","fillcolor":"rgba(0,255,0,0.3)","hoveron":"fills","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019],"y":[53,47,43,45,45,48,50,40,41,45,44,50,49,52,46,47,47,53,53,48,53,45],"text":["Year: 1998<br />Segment_TBNI: 53<br />bay_segment: OTB<br />bay_segment: OTB","Year: 1999<br />Segment_TBNI: 47<br />bay_segment: OTB<br />bay_segment: OTB","Year: 2000<br />Segment_TBNI: 43<br />bay_segment: OTB<br />bay_segment: OTB","Year: 2001<br />Segment_TBNI: 45<br />bay_segment: OTB<br />bay_segment: OTB","Year: 2002<br />Segment_TBNI: 45<br />bay_segment: OTB<br />bay_segment: OTB","Year: 2003<br />Segment_TBNI: 48<br />bay_segment: OTB<br />bay_segment: OTB","Year: 2004<br />Segment_TBNI: 50<br />bay_segment: OTB<br />bay_segment: OTB","Year: 2005<br />Segment_TBNI: 40<br />bay_segment: OTB<br />bay_segment: OTB","Year: 2006<br />Segment_TBNI: 41<br />bay_segment: OTB<br />bay_segment: OTB","Year: 2007<br />Segment_TBNI: 45<br />bay_segment: OTB<br />bay_segment: OTB","Year: 2008<br />Segment_TBNI: 44<br />bay_segment: OTB<br />bay_segment: OTB","Year: 2009<br />Segment_TBNI: 50<br />bay_segment: OTB<br />bay_segment: OTB","Year: 2010<br />Segment_TBNI: 49<br />bay_segment: OTB<br />bay_segment: OTB","Year: 2011<br />Segment_TBNI: 52<br />bay_segment: OTB<br />bay_segment: OTB","Year: 2012<br />Segment_TBNI: 46<br />bay_segment: OTB<br />bay_segment: OTB","Year: 2013<br />Segment_TBNI: 47<br />bay_segment: OTB<br />bay_segment: OTB","Year: 2014<br />Segment_TBNI: 47<br />bay_segment: OTB<br />bay_segment: OTB","Year: 2015<br />Segment_TBNI: 53<br />bay_segment: OTB<br />bay_segment: OTB","Year: 2016<br />Segment_TBNI: 53<br />bay_segment: OTB<br />bay_segment: OTB","Year: 2017<br />Segment_TBNI: 48<br />bay_segment: OTB<br />bay_segment: OTB","Year: 2018<br />Segment_TBNI: 53<br />bay_segment: OTB<br />bay_segment: OTB","Year: 2019<br />Segment_TBNI: 45<br />bay_segment: OTB<br />bay_segment: OTB"],"type":"scatter","mode":"lines","line":{"width":4.7244094488189,"color":"rgba(0,0,0,1)","dash":"dash"},"hoveron":"points","name":"OTB","legendgroup":"OTB","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019],"y":[47,47,44,44,39,41,41,32,41,42,41,41,50,45,44,50,50,51,56,47,44,46],"text":["Year: 1998<br />Segment_TBNI: 47<br />bay_segment: HB<br />bay_segment: HB","Year: 1999<br />Segment_TBNI: 47<br />bay_segment: HB<br />bay_segment: HB","Year: 2000<br />Segment_TBNI: 44<br />bay_segment: HB<br />bay_segment: HB","Year: 2001<br />Segment_TBNI: 44<br />bay_segment: HB<br />bay_segment: HB","Year: 2002<br />Segment_TBNI: 39<br />bay_segment: HB<br />bay_segment: HB","Year: 2003<br />Segment_TBNI: 41<br />bay_segment: HB<br />bay_segment: HB","Year: 2004<br />Segment_TBNI: 41<br />bay_segment: HB<br />bay_segment: HB","Year: 2005<br />Segment_TBNI: 32<br />bay_segment: HB<br />bay_segment: HB","Year: 2006<br />Segment_TBNI: 41<br />bay_segment: HB<br />bay_segment: HB","Year: 2007<br />Segment_TBNI: 42<br />bay_segment: HB<br />bay_segment: HB","Year: 2008<br />Segment_TBNI: 41<br />bay_segment: HB<br />bay_segment: HB","Year: 2009<br />Segment_TBNI: 41<br />bay_segment: HB<br />bay_segment: HB","Year: 2010<br />Segment_TBNI: 50<br />bay_segment: HB<br />bay_segment: HB","Year: 2011<br />Segment_TBNI: 45<br />bay_segment: HB<br />bay_segment: HB","Year: 2012<br />Segment_TBNI: 44<br />bay_segment: HB<br />bay_segment: HB","Year: 2013<br />Segment_TBNI: 50<br />bay_segment: HB<br />bay_segment: HB","Year: 2014<br />Segment_TBNI: 50<br />bay_segment: HB<br />bay_segment: HB","Year: 2015<br />Segment_TBNI: 51<br />bay_segment: HB<br />bay_segment: HB","Year: 2016<br />Segment_TBNI: 56<br />bay_segment: HB<br />bay_segment: HB","Year: 2017<br />Segment_TBNI: 47<br />bay_segment: HB<br />bay_segment: HB","Year: 2018<br />Segment_TBNI: 44<br />bay_segment: HB<br />bay_segment: HB","Year: 2019<br />Segment_TBNI: 46<br />bay_segment: HB<br />bay_segment: HB"],"type":"scatter","mode":"lines","line":{"width":4.7244094488189,"color":"rgba(0,0,0,1)","dash":"dashdot"},"hoveron":"points","name":"HB","legendgroup":"HB","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019],"y":[51,49,45,47,43,47,50,36,42,41,44,44,51,45,46,45,50,53,49,48,48,44],"text":["Year: 1998<br />Segment_TBNI: 51<br />bay_segment: MTB<br />bay_segment: MTB","Year: 1999<br />Segment_TBNI: 49<br />bay_segment: MTB<br />bay_segment: MTB","Year: 2000<br />Segment_TBNI: 45<br />bay_segment: MTB<br />bay_segment: MTB","Year: 2001<br />Segment_TBNI: 47<br />bay_segment: MTB<br />bay_segment: MTB","Year: 2002<br />Segment_TBNI: 43<br />bay_segment: MTB<br />bay_segment: MTB","Year: 2003<br />Segment_TBNI: 47<br />bay_segment: MTB<br />bay_segment: MTB","Year: 2004<br />Segment_TBNI: 50<br />bay_segment: MTB<br />bay_segment: MTB","Year: 2005<br />Segment_TBNI: 36<br />bay_segment: MTB<br />bay_segment: MTB","Year: 2006<br />Segment_TBNI: 42<br />bay_segment: MTB<br />bay_segment: MTB","Year: 2007<br />Segment_TBNI: 41<br />bay_segment: MTB<br />bay_segment: MTB","Year: 2008<br />Segment_TBNI: 44<br />bay_segment: MTB<br />bay_segment: MTB","Year: 2009<br />Segment_TBNI: 44<br />bay_segment: MTB<br />bay_segment: MTB","Year: 2010<br />Segment_TBNI: 51<br />bay_segment: MTB<br />bay_segment: MTB","Year: 2011<br />Segment_TBNI: 45<br />bay_segment: MTB<br />bay_segment: MTB","Year: 2012<br />Segment_TBNI: 46<br />bay_segment: MTB<br />bay_segment: MTB","Year: 2013<br />Segment_TBNI: 45<br />bay_segment: MTB<br />bay_segment: MTB","Year: 2014<br />Segment_TBNI: 50<br />bay_segment: MTB<br />bay_segment: MTB","Year: 2015<br />Segment_TBNI: 53<br />bay_segment: MTB<br />bay_segment: MTB","Year: 2016<br />Segment_TBNI: 49<br />bay_segment: MTB<br />bay_segment: MTB","Year: 2017<br />Segment_TBNI: 48<br />bay_segment: MTB<br />bay_segment: MTB","Year: 2018<br />Segment_TBNI: 48<br />bay_segment: MTB<br />bay_segment: MTB","Year: 2019<br />Segment_TBNI: 44<br />bay_segment: MTB<br />bay_segment: MTB"],"type":"scatter","mode":"lines","line":{"width":4.7244094488189,"color":"rgba(102,102,102,1)","dash":"dot"},"hoveron":"points","name":"MTB","legendgroup":"MTB","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019],"y":[46,47,57,51,57,49,48,36,43,40,42,43,43,50,45,47,50,51,48,53,44,48],"text":["Year: 1998<br />Segment_TBNI: 46<br />bay_segment: LTB<br />bay_segment: LTB","Year: 1999<br />Segment_TBNI: 47<br />bay_segment: LTB<br />bay_segment: LTB","Year: 2000<br />Segment_TBNI: 57<br />bay_segment: LTB<br />bay_segment: LTB","Year: 2001<br />Segment_TBNI: 51<br />bay_segment: LTB<br />bay_segment: LTB","Year: 2002<br />Segment_TBNI: 57<br />bay_segment: LTB<br />bay_segment: LTB","Year: 2003<br />Segment_TBNI: 49<br />bay_segment: LTB<br />bay_segment: LTB","Year: 2004<br />Segment_TBNI: 48<br />bay_segment: LTB<br />bay_segment: LTB","Year: 2005<br />Segment_TBNI: 36<br />bay_segment: LTB<br />bay_segment: LTB","Year: 2006<br />Segment_TBNI: 43<br />bay_segment: LTB<br />bay_segment: LTB","Year: 2007<br />Segment_TBNI: 40<br />bay_segment: LTB<br />bay_segment: LTB","Year: 2008<br />Segment_TBNI: 42<br />bay_segment: LTB<br />bay_segment: LTB","Year: 2009<br />Segment_TBNI: 43<br />bay_segment: LTB<br />bay_segment: LTB","Year: 2010<br />Segment_TBNI: 43<br />bay_segment: LTB<br />bay_segment: LTB","Year: 2011<br />Segment_TBNI: 50<br />bay_segment: LTB<br />bay_segment: LTB","Year: 2012<br />Segment_TBNI: 45<br />bay_segment: LTB<br />bay_segment: LTB","Year: 2013<br />Segment_TBNI: 47<br />bay_segment: LTB<br />bay_segment: LTB","Year: 2014<br />Segment_TBNI: 50<br />bay_segment: LTB<br />bay_segment: LTB","Year: 2015<br />Segment_TBNI: 51<br />bay_segment: LTB<br />bay_segment: LTB","Year: 2016<br />Segment_TBNI: 48<br />bay_segment: LTB<br />bay_segment: LTB","Year: 2017<br />Segment_TBNI: 53<br />bay_segment: LTB<br />bay_segment: LTB","Year: 2018<br />Segment_TBNI: 44<br />bay_segment: LTB<br />bay_segment: LTB","Year: 2019<br />Segment_TBNI: 48<br />bay_segment: LTB<br />bay_segment: LTB"],"type":"scatter","mode":"lines","line":{"width":4.7244094488189,"color":"rgba(102,102,102,1)","dash":"solid"},"hoveron":"points","name":"LTB","legendgroup":"LTB","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[1997.45,1997.45,1997.45,1997.45,1997.45,1997.45,1997.45,1997.45,1997.45,1997.45,1997.45,1997.45,1997.45,1997.45,1997.45,1997.45,1997.45,1997.45,1997.45,1997.45,1997.45,1997.45,1997.45,1997.45,1997.45,1997.45,1997.45,1997.45,1997.45,1997.45,1997.45,1997.45,1997.45,1997.45,1997.45,1997.45,1997.45,1997.45,1997.45,1997.45,1997.45,1997.45,1997.45,1997.45,1997.45,1997.45,1997.45,1997.45,1997.45,1997.45,1997.45,1997.45,1997.45,1997.45,1997.45,1997.45,1997.45,1997.45,1997.45,1997.45,1997.45,1997.45,1997.45,1997.45,1997.45,1997.45,1997.45,1997.45,1997.45,1997.45,1997.45,1997.45,1997.45,1997.45,1997.45,1997.45,1997.45,1997.45,1997.45,1997.45,1997.45,1997.45,1997.45,1997.45,1997.45,1997.45,1997.45,1997.45,2019.55,2019.55,2019.55,2019.55,2019.55,2019.55,2019.55,2019.55,2019.55,2019.55,2019.55,2019.55,2019.55,2019.55,2019.55,2019.55,2019.55,2019.55,2019.55,2019.55,2019.55,2019.55,2019.55,2019.55,2019.55,2019.55,2019.55,2019.55,2019.55,2019.55,2019.55,2019.55,2019.55,2019.55,2019.55,2019.55,2019.55,2019.55,2019.55,2019.55,2019.55,2019.55,2019.55,2019.55,2019.55,2019.55,2019.55,2019.55,2019.55,2019.55,2019.55,2019.55,2019.55,2019.55,2019.55,2019.55,2019.55,2019.55,2019.55,2019.55,2019.55,2019.55,2019.55,2019.55,2019.55,2019.55,2019.55,2019.55,2019.55,2019.55,2019.55,2019.55,2019.55,2019.55,2019.55,2019.55,2019.55,2019.55,2019.55,2019.55,2019.55,2019.55,2019.55,2019.55,2019.55,2019.55,2019.55,2019.55],"y":[32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32],"text":"perc[1]: 32","type":"scatter","mode":"lines","line":{"width":1.88976377952756,"color":"rgba(0,0,0,1)","dash":"dot"},"hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[1997.45,1997.45,1997.45,1997.45,1997.45,1997.45,1997.45,1997.45,1997.45,1997.45,1997.45,1997.45,1997.45,1997.45,1997.45,1997.45,1997.45,1997.45,1997.45,1997.45,1997.45,1997.45,1997.45,1997.45,1997.45,1997.45,1997.45,1997.45,1997.45,1997.45,1997.45,1997.45,1997.45,1997.45,1997.45,1997.45,1997.45,1997.45,1997.45,1997.45,1997.45,1997.45,1997.45,1997.45,1997.45,1997.45,1997.45,1997.45,1997.45,1997.45,1997.45,1997.45,1997.45,1997.45,1997.45,1997.45,1997.45,1997.45,1997.45,1997.45,1997.45,1997.45,1997.45,1997.45,1997.45,1997.45,1997.45,1997.45,1997.45,1997.45,1997.45,1997.45,1997.45,1997.45,1997.45,1997.45,1997.45,1997.45,1997.45,1997.45,1997.45,1997.45,1997.45,1997.45,1997.45,1997.45,1997.45,1997.45,2019.55,2019.55,2019.55,2019.55,2019.55,2019.55,2019.55,2019.55,2019.55,2019.55,2019.55,2019.55,2019.55,2019.55,2019.55,2019.55,2019.55,2019.55,2019.55,2019.55,2019.55,2019.55,2019.55,2019.55,2019.55,2019.55,2019.55,2019.55,2019.55,2019.55,2019.55,2019.55,2019.55,2019.55,2019.55,2019.55,2019.55,2019.55,2019.55,2019.55,2019.55,2019.55,2019.55,2019.55,2019.55,2019.55,2019.55,2019.55,2019.55,2019.55,2019.55,2019.55,2019.55,2019.55,2019.55,2019.55,2019.55,2019.55,2019.55,2019.55,2019.55,2019.55,2019.55,2019.55,2019.55,2019.55,2019.55,2019.55,2019.55,2019.55,2019.55,2019.55,2019.55,2019.55,2019.55,2019.55,2019.55,2019.55,2019.55,2019.55,2019.55,2019.55,2019.55,2019.55,2019.55,2019.55,2019.55,2019.55],"y":[46,46,46,46,46,46,46,46,46,46,46,46,46,46,46,46,46,46,46,46,46,46,46,46,46,46,46,46,46,46,46,46,46,46,46,46,46,46,46,46,46,46,46,46,46,46,46,46,46,46,46,46,46,46,46,46,46,46,46,46,46,46,46,46,46,46,46,46,46,46,46,46,46,46,46,46,46,46,46,46,46,46,46,46,46,46,46,46,46,46,46,46,46,46,46,46,46,46,46,46,46,46,46,46,46,46,46,46,46,46,46,46,46,46,46,46,46,46,46,46,46,46,46,46,46,46,46,46,46,46,46,46,46,46,46,46,46,46,46,46,46,46,46,46,46,46,46,46,46,46,46,46,46,46,46,46,46,46,46,46,46,46,46,46,46,46,46,46,46,46,46,46,46,46,46,46],"text":"perc[2]: 46","type":"scatter","mode":"lines","line":{"width":1.88976377952756,"color":"rgba(0,0,0,1)","dash":"dot"},"hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null}],"layout":{"margin":{"t":26.2283105022831,"r":7.30593607305936,"b":45.7617268576173,"l":41.51100041511},"plot_bgcolor":"rgba(235,235,235,1)","paper_bgcolor":"rgba(255,255,255,1)","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[1997.45,2019.55],"tickmode":"array","ticktext":["1998","1999","2000","2001","2002","2003","2004","2005","2006","2007","2008","2009","2010","2011","2012","2013","2014","2015","2016","2017","2018","2019"],"tickvals":[1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019],"categoryorder":"array","categoryarray":["1998","1999","2000","2001","2002","2003","2004","2005","2006","2007","2008","2009","2010","2011","2012","2013","2014","2015","2016","2017","2018","2019"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":15.9402241594022},"tickangle":-90,"showline":false,"linecolor":null,"linewidth":0,"showgrid":false,"gridcolor":null,"gridwidth":0,"zeroline":false,"anchor":"y","title":{"text":"","font":{"color":null,"family":null,"size":0}},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[20.2,59.8],"tickmode":"array","ticktext":["22","26","30","34","38","42","46","50","54","58"],"tickvals":[22,26,30,34,38,42,46,50,54,58],"categoryorder":"array","categoryarray":["22","26","30","34","38","42","46","50","54","58"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":15.9402241594022},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":false,"gridcolor":null,"gridwidth":0,"zeroline":false,"anchor":"x","title":{"text":"TBNI by bay segment","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}},"hoverformat":".2f"},"showlegend":true,"legend":{"bgcolor":null,"bordercolor":null,"borderwidth":0,"font":{"color":"rgba(0,0,0,1)","family":"","size":11.689497716895},"y":0.964566929133858},"hovermode":"closest","barmode":"relative","shapes":[{"type":"rect","line":{"color":"rgba(0,0,0,0)"},"fillcolor":"rgba(255,0,0,0.3)","x0":1997.45,"x1":2019.55,"y0":0,"y1":32},{"type":"rect","line":{"color":"rgba(0,0,0,0)"},"fillcolor":"rgba(255,255,0,0.3)","x0":1997.45,"x1":2019.55,"y0":32,"y1":46},{"type":"rect","line":{"color":"rgba(0,0,0,0)"},"fillcolor":"rgba(0,255,0,0.3)","x0":1997.45,"x1":2019.55,"y0":46,"y1":100}]},"config":{"doubleClick":"reset","showSendToCloud":false},"source":"A","attrs":{"a0a4114d1b9":{"xmin":{},"xmax":{},"ymin":{},"ymax":{},"type":"scatter"},"a0a3dd4ea10":{"xmin":{},"xmax":{},"ymin":{},"ymax":{}},"a0a6552e026":{"xmin":{},"xmax":{},"ymin":{},"ymax":{}},"a0a23fa12c2":{"x":{},"y":{},"linetype":{},"colour":{}},"a0a76e59101":{"yintercept":{}},"a0a599315a2":{"yintercept":{}}},"cur_data":"a0a4114d1b9","visdat":{"a0a4114d1b9":["function (y) ","x"],"a0a3dd4ea10":["function (y) ","x"],"a0a6552e026":["function (y) ","x"],"a0a23fa12c2":["function (y) ","x"],"a0a76e59101":["function (y) ","x"],"a0a599315a2":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script><div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/show_tbniscrall.html">show_tbniscrall</a></span><span class="op">(</span><span class="va">tbniscr</span>, plotly <span class="op">=</span> <span class="cn">T</span><span class="op">)</span></code></pre></div>
<div id="htmlwidget-30dd88e1cc8ecd61dfcb" style="width:672px;height:480px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-30dd88e1cc8ecd61dfcb">{"x":{"data":[{"x":[null,null,null,null,null],"y":[null,32,32,null,null],"text":"","type":"scatter","mode":"lines","line":{"width":1.88976377952756,"color":"transparent","dash":"solid"},"fill":"toself","fillcolor":"rgba(255,0,0,0.3)","hoveron":"fills","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[null,null,null,null,null],"y":[32,46,46,32,32],"text":"","type":"scatter","mode":"lines","line":{"width":1.88976377952756,"color":"transparent","dash":"solid"},"fill":"toself","fillcolor":"rgba(255,255,0,0.3)","hoveron":"fills","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[null,null,null,null,null],"y":[46,null,null,46,46],"text":"","type":"scatter","mode":"lines","line":{"width":1.88976377952756,"color":"transparent","dash":"solid"},"fill":"toself","fillcolor":"rgba(0,255,0,0.3)","hoveron":"fills","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2019,2019,2018,2017,2016,2015,2014,2013,2012,2011,2010,2009,2008,2007,2006,2005,2004,2003,2002,2001,2000,1999,1998,1998],"y":[48.1749504338125,46.1923372730303,44.2237002305824,44.2290089419175,43.2043675557688,44.1485720797006,46.1525760990679,35.683114999086,40.5847320278398,41.6368051009996,41.5498222062411,43.5571687154878,47.6093446869789,46.5018316384119,43.5075005853231,45.5476249607356,47.5425674767084,50.5477812990552,50.5414005237311,47.530024810338,46.5199785992817,44.528710698096,44.528710698096,47.471289301904,49.4800214007183,50.469975189662,53.4585994762689,53.4522187009448,50.4574325232916,48.4523750392644,46.4924994146769,49.4981683615881,50.3906553130211,46.4428312845122,44.4501777937589,44.3631948990004,43.4152679721602,38.316885000914,49.8474239009321,47.8514279202994,46.7956324442312,47.7709910580825,47.7762997694176,49.8076627269697,51.8250495661875,48.1749504338125],"text":["Year: 1998<br />TBNI_Score - seval: 48.17495<br />TBNI_Score + seval: 51.82505","Year: 1999<br />TBNI_Score - seval: 46.19234<br />TBNI_Score + seval: 49.80766","Year: 2000<br />TBNI_Score - seval: 44.22370<br />TBNI_Score + seval: 47.77630","Year: 2001<br />TBNI_Score - seval: 44.22901<br />TBNI_Score + seval: 47.77099","Year: 2002<br />TBNI_Score - seval: 43.20437<br />TBNI_Score + seval: 46.79563","Year: 2003<br />TBNI_Score - seval: 44.14857<br />TBNI_Score + seval: 47.85143","Year: 2004<br />TBNI_Score - seval: 46.15258<br />TBNI_Score + seval: 49.84742","Year: 2005<br />TBNI_Score - seval: 35.68311<br />TBNI_Score + seval: 38.31689","Year: 2006<br />TBNI_Score - seval: 40.58473<br />TBNI_Score + seval: 43.41527","Year: 2007<br />TBNI_Score - seval: 41.63681<br />TBNI_Score + seval: 44.36319","Year: 2008<br />TBNI_Score - seval: 41.54982<br />TBNI_Score + seval: 44.45018","Year: 2009<br />TBNI_Score - seval: 43.55717<br />TBNI_Score + seval: 46.44283","Year: 2010<br />TBNI_Score - seval: 47.60934<br />TBNI_Score + seval: 50.39066","Year: 2011<br />TBNI_Score - seval: 46.50183<br />TBNI_Score + seval: 49.49817","Year: 2012<br />TBNI_Score - seval: 43.50750<br />TBNI_Score + seval: 46.49250","Year: 2013<br />TBNI_Score - seval: 45.54762<br />TBNI_Score + seval: 48.45238","Year: 2014<br />TBNI_Score - seval: 47.54257<br />TBNI_Score + seval: 50.45743","Year: 2015<br />TBNI_Score - seval: 50.54778<br />TBNI_Score + seval: 53.45222","Year: 2016<br />TBNI_Score - seval: 50.54140<br />TBNI_Score + seval: 53.45860","Year: 2017<br />TBNI_Score - seval: 47.53002<br />TBNI_Score + seval: 50.46998","Year: 2018<br />TBNI_Score - seval: 46.51998<br />TBNI_Score + seval: 49.48002","Year: 2019<br />TBNI_Score - seval: 44.52871<br />TBNI_Score + seval: 47.47129","Year: 2019<br />TBNI_Score - seval: 44.52871<br />TBNI_Score + seval: 47.47129","Year: 2019<br />TBNI_Score - seval: 44.52871<br />TBNI_Score + seval: 47.47129","Year: 2018<br />TBNI_Score - seval: 46.51998<br />TBNI_Score + seval: 49.48002","Year: 2017<br />TBNI_Score - seval: 47.53002<br />TBNI_Score + seval: 50.46998","Year: 2016<br />TBNI_Score - seval: 50.54140<br />TBNI_Score + seval: 53.45860","Year: 2015<br />TBNI_Score - seval: 50.54778<br />TBNI_Score + seval: 53.45222","Year: 2014<br />TBNI_Score - seval: 47.54257<br />TBNI_Score + seval: 50.45743","Year: 2013<br />TBNI_Score - seval: 45.54762<br />TBNI_Score + seval: 48.45238","Year: 2012<br />TBNI_Score - seval: 43.50750<br />TBNI_Score + seval: 46.49250","Year: 2011<br />TBNI_Score - seval: 46.50183<br />TBNI_Score + seval: 49.49817","Year: 2010<br />TBNI_Score - seval: 47.60934<br />TBNI_Score + seval: 50.39066","Year: 2009<br />TBNI_Score - seval: 43.55717<br />TBNI_Score + seval: 46.44283","Year: 2008<br />TBNI_Score - seval: 41.54982<br />TBNI_Score + seval: 44.45018","Year: 2007<br />TBNI_Score - seval: 41.63681<br />TBNI_Score + seval: 44.36319","Year: 2006<br />TBNI_Score - seval: 40.58473<br />TBNI_Score + seval: 43.41527","Year: 2005<br />TBNI_Score - seval: 35.68311<br />TBNI_Score + seval: 38.31689","Year: 2004<br />TBNI_Score - seval: 46.15258<br />TBNI_Score + seval: 49.84742","Year: 2003<br />TBNI_Score - seval: 44.14857<br />TBNI_Score + seval: 47.85143","Year: 2002<br />TBNI_Score - seval: 43.20437<br />TBNI_Score + seval: 46.79563","Year: 2001<br />TBNI_Score - seval: 44.22901<br />TBNI_Score + seval: 47.77099","Year: 2000<br />TBNI_Score - seval: 44.22370<br />TBNI_Score + seval: 47.77630","Year: 1999<br />TBNI_Score - seval: 46.19234<br />TBNI_Score + seval: 49.80766","Year: 1998<br />TBNI_Score - seval: 48.17495<br />TBNI_Score + seval: 51.82505","Year: 1998<br />TBNI_Score - seval: 48.17495<br />TBNI_Score + seval: 51.82505"],"type":"scatter","mode":"lines","line":{"width":1.88976377952756,"color":"transparent","dash":"solid"},"fill":"toself","fillcolor":"rgba(153,153,153,1)","hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019],"y":[50,48,46,46,45,46,48,37,42,43,43,45,49,48,45,47,49,52,52,49,48,46],"text":["Year: 1998<br />TBNI_Score: 50","Year: 1999<br />TBNI_Score: 48","Year: 2000<br />TBNI_Score: 46","Year: 2001<br />TBNI_Score: 46","Year: 2002<br />TBNI_Score: 45","Year: 2003<br />TBNI_Score: 46","Year: 2004<br />TBNI_Score: 48","Year: 2005<br />TBNI_Score: 37","Year: 2006<br />TBNI_Score: 42","Year: 2007<br />TBNI_Score: 43","Year: 2008<br />TBNI_Score: 43","Year: 2009<br />TBNI_Score: 45","Year: 2010<br />TBNI_Score: 49","Year: 2011<br />TBNI_Score: 48","Year: 2012<br />TBNI_Score: 45","Year: 2013<br />TBNI_Score: 47","Year: 2014<br />TBNI_Score: 49","Year: 2015<br />TBNI_Score: 52","Year: 2016<br />TBNI_Score: 52","Year: 2017<br />TBNI_Score: 49","Year: 2018<br />TBNI_Score: 48","Year: 2019<br />TBNI_Score: 46"],"type":"scatter","mode":"lines","line":{"width":4.7244094488189,"color":"rgba(0,0,0,1)","dash":"solid"},"hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[1997.45,1997.45,1997.45,1997.45,1997.45,1997.45,1997.45,1997.45,1997.45,1997.45,1997.45,1997.45,1997.45,1997.45,1997.45,1997.45,1997.45,1997.45,1997.45,1997.45,1997.45,1997.45,2019.55,2019.55,2019.55,2019.55,2019.55,2019.55,2019.55,2019.55,2019.55,2019.55,2019.55,2019.55,2019.55,2019.55,2019.55,2019.55,2019.55,2019.55,2019.55,2019.55,2019.55,2019.55],"y":[32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32],"text":"perc[1]: 32","type":"scatter","mode":"lines","line":{"width":1.88976377952756,"color":"rgba(0,0,0,1)","dash":"dot"},"hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[1997.45,1997.45,1997.45,1997.45,1997.45,1997.45,1997.45,1997.45,1997.45,1997.45,1997.45,1997.45,1997.45,1997.45,1997.45,1997.45,1997.45,1997.45,1997.45,1997.45,1997.45,1997.45,2019.55,2019.55,2019.55,2019.55,2019.55,2019.55,2019.55,2019.55,2019.55,2019.55,2019.55,2019.55,2019.55,2019.55,2019.55,2019.55,2019.55,2019.55,2019.55,2019.55,2019.55,2019.55],"y":[46,46,46,46,46,46,46,46,46,46,46,46,46,46,46,46,46,46,46,46,46,46,46,46,46,46,46,46,46,46,46,46,46,46,46,46,46,46,46,46,46,46,46,46],"text":"perc[2]: 46","type":"scatter","mode":"lines","line":{"width":1.88976377952756,"color":"rgba(0,0,0,1)","dash":"dot"},"hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null}],"layout":{"margin":{"t":26.2283105022831,"r":7.30593607305936,"b":45.7617268576173,"l":41.51100041511},"plot_bgcolor":"rgba(235,235,235,1)","paper_bgcolor":"rgba(255,255,255,1)","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[1997.45,2019.55],"tickmode":"array","ticktext":["1998","1999","2000","2001","2002","2003","2004","2005","2006","2007","2008","2009","2010","2011","2012","2013","2014","2015","2016","2017","2018","2019"],"tickvals":[1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019],"categoryorder":"array","categoryarray":["1998","1999","2000","2001","2002","2003","2004","2005","2006","2007","2008","2009","2010","2011","2012","2013","2014","2015","2016","2017","2018","2019"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":15.9402241594022},"tickangle":-90,"showline":false,"linecolor":null,"linewidth":0,"showgrid":false,"gridcolor":null,"gridwidth":0,"zeroline":false,"anchor":"y","title":{"text":"","font":{"color":null,"family":null,"size":0}},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[20.2,59.8],"tickmode":"array","ticktext":["22","26","30","34","38","42","46","50","54","58"],"tickvals":[22,26,30,34,38,42,46,50,54,58],"categoryorder":"array","categoryarray":["22","26","30","34","38","42","46","50","54","58"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":15.9402241594022},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":false,"gridcolor":null,"gridwidth":0,"zeroline":false,"anchor":"x","title":{"text":"TBNI average of bay segments","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}},"hoverformat":".2f"},"showlegend":false,"legend":{"bgcolor":null,"bordercolor":null,"borderwidth":0,"font":{"color":"rgba(0,0,0,1)","family":"","size":11.689497716895}},"hovermode":"closest","barmode":"relative","shapes":[{"type":"rect","line":{"color":"rgba(0,0,0,0)"},"fillcolor":"rgba(255,0,0,0.3)","x0":1997.45,"x1":2019.55,"y0":0,"y1":32},{"type":"rect","line":{"color":"rgba(0,0,0,0)"},"fillcolor":"rgba(255,255,0,0.3)","x0":1997.45,"x1":2019.55,"y0":32,"y1":46},{"type":"rect","line":{"color":"rgba(0,0,0,0)"},"fillcolor":"rgba(0,255,0,0.3)","x0":1997.45,"x1":2019.55,"y0":46,"y1":100}]},"config":{"doubleClick":"reset","showSendToCloud":false},"source":"A","attrs":{"a0a3b158f4d":{"xmin":{},"xmax":{},"ymin":{},"ymax":{},"type":"scatter"},"a0a4732689":{"xmin":{},"xmax":{},"ymin":{},"ymax":{}},"a0a23e6eea7":{"xmin":{},"xmax":{},"ymin":{},"ymax":{}},"a0ae3e285b":{"x":{},"ymin":{},"ymax":{}},"a0a12cb75ab":{"x":{},"y":{}},"a0a6b9a3730":{"yintercept":{}},"a0a599d6780":{"yintercept":{}}},"cur_data":"a0a3b158f4d","visdat":{"a0a3b158f4d":["function (y) ","x"],"a0a4732689":["function (y) ","x"],"a0a23e6eea7":["function (y) ","x"],"a0ae3e285b":["function (y) ","x"],"a0a12cb75ab":["function (y) ","x"],"a0a6b9a3730":["function (y) ","x"],"a0a599d6780":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script><div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/show_tbnimatrix.html">show_tbnimatrix</a></span><span class="op">(</span><span class="va">tbniscr</span>, plotly <span class="op">=</span> <span class="cn">T</span><span class="op">)</span></code></pre></div>
<div id="htmlwidget-2f8a7ec3f82f8c1a44c8" style="width:288px;height:672px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-2f8a7ec3f82f8c1a44c8">{"x":{"data":[{"x":[1.5,1.5,2.5,2.5,1.5,null,1.5,1.5,2.5,2.5,1.5,null,1.5,1.5,2.5,2.5,1.5,null,1.5,1.5,2.5,2.5,1.5,null,1.5,1.5,2.5,2.5,1.5,null,1.5,1.5,2.5,2.5,1.5,null,1.5,1.5,2.5,2.5,1.5,null,1.5,1.5,2.5,2.5,1.5,null,1.5,1.5,2.5,2.5,1.5,null,3.5,3.5,4.5,4.5,3.5,null,3.5,3.5,4.5,4.5,3.5,null,3.5,3.5,4.5,4.5,3.5,null,3.5,3.5,4.5,4.5,3.5,null,3.5,3.5,4.5,4.5,3.5,null,3.5,3.5,4.5,4.5,3.5,null,3.5,3.5,4.5,4.5,3.5,null,3.5,3.5,4.5,4.5,3.5,null,3.5,3.5,4.5,4.5,3.5,null,3.5,3.5,4.5,4.5,3.5,null,3.5,3.5,4.5,4.5,3.5,null,3.5,3.5,4.5,4.5,3.5,null,3.5,3.5,4.5,4.5,3.5,null,3.5,3.5,4.5,4.5,3.5,null,2.5,2.5,3.5,3.5,2.5,null,2.5,2.5,3.5,3.5,2.5,null,2.5,2.5,3.5,3.5,2.5,null,2.5,2.5,3.5,3.5,2.5,null,2.5,2.5,3.5,3.5,2.5,null,2.5,2.5,3.5,3.5,2.5,null,2.5,2.5,3.5,3.5,2.5,null,2.5,2.5,3.5,3.5,2.5,null,2.5,2.5,3.5,3.5,2.5,null,2.5,2.5,3.5,3.5,2.5,null,2.5,2.5,3.5,3.5,2.5,null,2.5,2.5,3.5,3.5,2.5,null,0.5,0.5,1.5,1.5,0.5,null,0.5,0.5,1.5,1.5,0.5,null,0.5,0.5,1.5,1.5,0.5,null,0.5,0.5,1.5,1.5,0.5,null,0.5,0.5,1.5,1.5,0.5,null,0.5,0.5,1.5,1.5,0.5,null,0.5,0.5,1.5,1.5,0.5,null,0.5,0.5,1.5,1.5,0.5,null,0.5,0.5,1.5,1.5,0.5,null,0.5,0.5,1.5,1.5,0.5,null,0.5,0.5,1.5,1.5,0.5,null,0.5,0.5,1.5,1.5,0.5,null,0.5,0.5,1.5,1.5,0.5,null,0.5,0.5,1.5,1.5,0.5],"y":[-1998.5,-1997.5,-1997.5,-1998.5,-1998.5,null,-1999.5,-1998.5,-1998.5,-1999.5,-1999.5,null,-2010.5,-2009.5,-2009.5,-2010.5,-2010.5,null,-2013.5,-2012.5,-2012.5,-2013.5,-2013.5,null,-2014.5,-2013.5,-2013.5,-2014.5,-2014.5,null,-2015.5,-2014.5,-2014.5,-2015.5,-2015.5,null,-2016.5,-2015.5,-2015.5,-2016.5,-2016.5,null,-2017.5,-2016.5,-2016.5,-2017.5,-2017.5,null,-2019.5,-2018.5,-2018.5,-2019.5,-2019.5,null,-1998.5,-1997.5,-1997.5,-1998.5,-1998.5,null,-1999.5,-1998.5,-1998.5,-1999.5,-1999.5,null,-2000.5,-1999.5,-1999.5,-2000.5,-2000.5,null,-2001.5,-2000.5,-2000.5,-2001.5,-2001.5,null,-2002.5,-2001.5,-2001.5,-2002.5,-2002.5,null,-2003.5,-2002.5,-2002.5,-2003.5,-2003.5,null,-2004.5,-2003.5,-2003.5,-2004.5,-2004.5,null,-2011.5,-2010.5,-2010.5,-2011.5,-2011.5,null,-2013.5,-2012.5,-2012.5,-2013.5,-2013.5,null,-2014.5,-2013.5,-2013.5,-2014.5,-2014.5,null,-2015.5,-2014.5,-2014.5,-2015.5,-2015.5,null,-2016.5,-2015.5,-2015.5,-2016.5,-2016.5,null,-2017.5,-2016.5,-2016.5,-2017.5,-2017.5,null,-2019.5,-2018.5,-2018.5,-2019.5,-2019.5,null,-1998.5,-1997.5,-1997.5,-1998.5,-1998.5,null,-1999.5,-1998.5,-1998.5,-1999.5,-1999.5,null,-2001.5,-2000.5,-2000.5,-2001.5,-2001.5,null,-2003.5,-2002.5,-2002.5,-2003.5,-2003.5,null,-2004.5,-2003.5,-2003.5,-2004.5,-2004.5,null,-2010.5,-2009.5,-2009.5,-2010.5,-2010.5,null,-2012.5,-2011.5,-2011.5,-2012.5,-2012.5,null,-2014.5,-2013.5,-2013.5,-2014.5,-2014.5,null,-2015.5,-2014.5,-2014.5,-2015.5,-2015.5,null,-2016.5,-2015.5,-2015.5,-2016.5,-2016.5,null,-2017.5,-2016.5,-2016.5,-2017.5,-2017.5,null,-2018.5,-2017.5,-2017.5,-2018.5,-2018.5,null,-1998.5,-1997.5,-1997.5,-1998.5,-1998.5,null,-1999.5,-1998.5,-1998.5,-1999.5,-1999.5,null,-2003.5,-2002.5,-2002.5,-2003.5,-2003.5,null,-2004.5,-2003.5,-2003.5,-2004.5,-2004.5,null,-2009.5,-2008.5,-2008.5,-2009.5,-2009.5,null,-2010.5,-2009.5,-2009.5,-2010.5,-2010.5,null,-2011.5,-2010.5,-2010.5,-2011.5,-2011.5,null,-2012.5,-2011.5,-2011.5,-2012.5,-2012.5,null,-2013.5,-2012.5,-2012.5,-2013.5,-2013.5,null,-2014.5,-2013.5,-2013.5,-2014.5,-2014.5,null,-2015.5,-2014.5,-2014.5,-2015.5,-2015.5,null,-2016.5,-2015.5,-2015.5,-2016.5,-2016.5,null,-2017.5,-2016.5,-2016.5,-2017.5,-2017.5,null,-2018.5,-2017.5,-2017.5,-2018.5,-2018.5],"text":"Action: Stay the Course","type":"scatter","mode":"lines","line":{"width":0.377952755905512,"color":"rgba(0,0,0,0.3)","dash":"solid"},"fill":"toself","fillcolor":"rgba(0,255,0,0.3)","hoveron":"fills","name":"green","legendgroup":"green","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[1.5,1.5,2.5,2.5,1.5,null,1.5,1.5,2.5,2.5,1.5,null,1.5,1.5,2.5,2.5,1.5,null,1.5,1.5,2.5,2.5,1.5,null,1.5,1.5,2.5,2.5,1.5,null,1.5,1.5,2.5,2.5,1.5,null,1.5,1.5,2.5,2.5,1.5,null,1.5,1.5,2.5,2.5,1.5,null,1.5,1.5,2.5,2.5,1.5,null,1.5,1.5,2.5,2.5,1.5,null,1.5,1.5,2.5,2.5,1.5,null,1.5,1.5,2.5,2.5,1.5,null,1.5,1.5,2.5,2.5,1.5,null,3.5,3.5,4.5,4.5,3.5,null,3.5,3.5,4.5,4.5,3.5,null,3.5,3.5,4.5,4.5,3.5,null,3.5,3.5,4.5,4.5,3.5,null,3.5,3.5,4.5,4.5,3.5,null,3.5,3.5,4.5,4.5,3.5,null,3.5,3.5,4.5,4.5,3.5,null,3.5,3.5,4.5,4.5,3.5,null,2.5,2.5,3.5,3.5,2.5,null,2.5,2.5,3.5,3.5,2.5,null,2.5,2.5,3.5,3.5,2.5,null,2.5,2.5,3.5,3.5,2.5,null,2.5,2.5,3.5,3.5,2.5,null,2.5,2.5,3.5,3.5,2.5,null,2.5,2.5,3.5,3.5,2.5,null,2.5,2.5,3.5,3.5,2.5,null,2.5,2.5,3.5,3.5,2.5,null,2.5,2.5,3.5,3.5,2.5,null,0.5,0.5,1.5,1.5,0.5,null,0.5,0.5,1.5,1.5,0.5,null,0.5,0.5,1.5,1.5,0.5,null,0.5,0.5,1.5,1.5,0.5,null,0.5,0.5,1.5,1.5,0.5,null,0.5,0.5,1.5,1.5,0.5,null,0.5,0.5,1.5,1.5,0.5,null,0.5,0.5,1.5,1.5,0.5],"y":[-2000.5,-1999.5,-1999.5,-2000.5,-2000.5,null,-2001.5,-2000.5,-2000.5,-2001.5,-2001.5,null,-2002.5,-2001.5,-2001.5,-2002.5,-2002.5,null,-2003.5,-2002.5,-2002.5,-2003.5,-2003.5,null,-2004.5,-2003.5,-2003.5,-2004.5,-2004.5,null,-2005.5,-2004.5,-2004.5,-2005.5,-2005.5,null,-2006.5,-2005.5,-2005.5,-2006.5,-2006.5,null,-2007.5,-2006.5,-2006.5,-2007.5,-2007.5,null,-2008.5,-2007.5,-2007.5,-2008.5,-2008.5,null,-2009.5,-2008.5,-2008.5,-2009.5,-2009.5,null,-2011.5,-2010.5,-2010.5,-2011.5,-2011.5,null,-2012.5,-2011.5,-2011.5,-2012.5,-2012.5,null,-2018.5,-2017.5,-2017.5,-2018.5,-2018.5,null,-2005.5,-2004.5,-2004.5,-2005.5,-2005.5,null,-2006.5,-2005.5,-2005.5,-2006.5,-2006.5,null,-2007.5,-2006.5,-2006.5,-2007.5,-2007.5,null,-2008.5,-2007.5,-2007.5,-2008.5,-2008.5,null,-2009.5,-2008.5,-2008.5,-2009.5,-2009.5,null,-2010.5,-2009.5,-2009.5,-2010.5,-2010.5,null,-2012.5,-2011.5,-2011.5,-2012.5,-2012.5,null,-2018.5,-2017.5,-2017.5,-2018.5,-2018.5,null,-2000.5,-1999.5,-1999.5,-2000.5,-2000.5,null,-2002.5,-2001.5,-2001.5,-2002.5,-2002.5,null,-2005.5,-2004.5,-2004.5,-2005.5,-2005.5,null,-2006.5,-2005.5,-2005.5,-2006.5,-2006.5,null,-2007.5,-2006.5,-2006.5,-2007.5,-2007.5,null,-2008.5,-2007.5,-2007.5,-2008.5,-2008.5,null,-2009.5,-2008.5,-2008.5,-2009.5,-2009.5,null,-2011.5,-2010.5,-2010.5,-2011.5,-2011.5,null,-2013.5,-2012.5,-2012.5,-2013.5,-2013.5,null,-2019.5,-2018.5,-2018.5,-2019.5,-2019.5,null,-2000.5,-1999.5,-1999.5,-2000.5,-2000.5,null,-2001.5,-2000.5,-2000.5,-2001.5,-2001.5,null,-2002.5,-2001.5,-2001.5,-2002.5,-2002.5,null,-2005.5,-2004.5,-2004.5,-2005.5,-2005.5,null,-2006.5,-2005.5,-2005.5,-2006.5,-2006.5,null,-2007.5,-2006.5,-2006.5,-2007.5,-2007.5,null,-2008.5,-2007.5,-2007.5,-2008.5,-2008.5,null,-2019.5,-2018.5,-2018.5,-2019.5,-2019.5],"text":"Action: Caution","type":"scatter","mode":"lines","line":{"width":0.377952755905512,"color":"rgba(0,0,0,0.3)","dash":"solid"},"fill":"toself","fillcolor":"rgba(255,255,0,0.3)","hoveron":"fills","name":"yellow","legendgroup":"yellow","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[2,2,2,2,2,2,2,2,2,4,4,4,4,4,4,4,4,4,4,4,4,4,4,3,3,3,3,3,3,3,3,3,3,3,3,1,1,1,1,1,1,1,1,1,1,1,1,1,1],"y":[-1998,-1999,-2010,-2013,-2014,-2015,-2016,-2017,-2019,-1998,-1999,-2000,-2001,-2002,-2003,-2004,-2011,-2013,-2014,-2015,-2016,-2017,-2019,-1998,-1999,-2001,-2003,-2004,-2010,-2012,-2014,-2015,-2016,-2017,-2018,-1998,-1999,-2003,-2004,-2009,-2010,-2011,-2012,-2013,-2014,-2015,-2016,-2017,-2018],"text":["green","green","green","green","green","green","green","green","green","green","green","green","green","green","green","green","green","green","green","green","green","green","green","green","green","green","green","green","green","green","green","green","green","green","green","green","green","green","green","green","green","green","green","green","green","green","green","green","green"],"hovertext":["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],"textfont":{"size":11.3385826771654,"color":"rgba(0,0,0,1)"},"type":"scatter","mode":"text","hoveron":"points","name":"green","legendgroup":"green","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[2,2,2,2,2,2,2,2,2,2,2,2,2,4,4,4,4,4,4,4,4,3,3,3,3,3,3,3,3,3,3,1,1,1,1,1,1,1,1],"y":[-2000,-2001,-2002,-2003,-2004,-2005,-2006,-2007,-2008,-2009,-2011,-2012,-2018,-2005,-2006,-2007,-2008,-2009,-2010,-2012,-2018,-2000,-2002,-2005,-2006,-2007,-2008,-2009,-2011,-2013,-2019,-2000,-2001,-2002,-2005,-2006,-2007,-2008,-2019],"text":["yellow","yellow","yellow","yellow","yellow","yellow","yellow","yellow","yellow","yellow","yellow","yellow","yellow","yellow","yellow","yellow","yellow","yellow","yellow","yellow","yellow","yellow","yellow","yellow","yellow","yellow","yellow","yellow","yellow","yellow","yellow","yellow","yellow","yellow","yellow","yellow","yellow","yellow","yellow"],"hovertext":["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],"textfont":{"size":11.3385826771654,"color":"rgba(0,0,0,1)"},"type":"scatter","mode":"text","hoveron":"points","name":"yellow","legendgroup":"yellow","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":["OTB","HB","MTB","LTB"],"y":[1,2,3,4],"type":"bar","xaxis":"x2","marker":{"color":"rgba(31,119,180,1)","line":{"color":"rgba(31,119,180,1)"}},"error_y":{"color":"rgba(31,119,180,1)"},"error_x":{"color":"rgba(31,119,180,1)"},"yaxis":"y","frame":null}],"layout":{"margin":{"t":19.1311154598826,"r":7.30593607305936,"b":6.78408349641226,"l":42.8393524283935},"plot_bgcolor":"rgba(255,255,255,1)","paper_bgcolor":"rgba(255,255,255,1)","font":{"color":"rgba(0,0,0,1)","family":null,"size":14.6118721461187},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[0.5,4.5],"tickmode":"array","ticktext":["OTB","HB","MTB","LTB"],"tickvals":[1,2,3,4],"categoryorder":"array","categoryarray":["OTB","HB","MTB","LTB"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.65296803652968,"tickwidth":0,"showticklabels":false,"tickfont":{"color":null,"family":null,"size":0},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":false,"gridcolor":null,"gridwidth":0,"zeroline":false,"anchor":"y","title":{"text":"","font":{"color":null,"family":null,"size":0}},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[-2019.5,-1997.5],"tickmode":"array","ticktext":["1998","1999","2000","2001","2002","2003","2004","2005","2006","2007","2008","2009","2010","2011","2012","2013","2014","2015","2016","2017","2018","2019","1998","1999","2000","2001","2002","2003","2004","2005","2006","2007","2008","2009","2010","2011","2012","2013","2014","2015","2016","2017","2018","2019","1998","1999","2000","2001","2002","2003","2004","2005","2006","2007","2008","2009","2010","2011","2012","2013","2014","2015","2016","2017","2018","2019","1998","1999","2000","2001","2002","2003","2004","2005","2006","2007","2008","2009","2010","2011","2012","2013","2014","2015","2016","2017","2018","2019"],"tickvals":[-1998,-1999,-2000,-2001,-2002,-2003,-2004,-2005,-2006,-2007,-2008,-2009,-2010,-2011,-2012,-2013,-2014,-2015,-2016,-2017,-2018,-2019,-1998,-1999,-2000,-2001,-2002,-2003,-2004,-2005,-2006,-2007,-2008,-2009,-2010,-2011,-2012,-2013,-2014,-2015,-2016,-2017,-2018,-2019,-1998,-1999,-2000,-2001,-2002,-2003,-2004,-2005,-2006,-2007,-2008,-2009,-2010,-2011,-2012,-2013,-2014,-2015,-2016,-2017,-2018,-2019,-1998,-1999,-2000,-2001,-2002,-2003,-2004,-2005,-2006,-2007,-2008,-2009,-2010,-2011,-2012,-2013,-2014,-2015,-2016,-2017,-2018,-2019],"categoryorder":"array","categoryarray":["1998","1999","2000","2001","2002","2003","2004","2005","2006","2007","2008","2009","2010","2011","2012","2013","2014","2015","2016","2017","2018","2019","1998","1999","2000","2001","2002","2003","2004","2005","2006","2007","2008","2009","2010","2011","2012","2013","2014","2015","2016","2017","2018","2019","1998","1999","2000","2001","2002","2003","2004","2005","2006","2007","2008","2009","2010","2011","2012","2013","2014","2015","2016","2017","2018","2019","1998","1999","2000","2001","2002","2003","2004","2005","2006","2007","2008","2009","2010","2011","2012","2013","2014","2015","2016","2017","2018","2019"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":null,"size":15.9402241594022},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":false,"gridcolor":null,"gridwidth":0,"zeroline":false,"anchor":"x","title":{"text":"","font":{"color":null,"family":null,"size":0}},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":"transparent","line":{"color":"rgba(51,51,51,1)","width":0.66417600664176,"linetype":"solid"},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":false,"legend":{"bgcolor":"rgba(255,255,255,1)","bordercolor":"transparent","borderwidth":1.88976377952756,"font":{"color":"rgba(0,0,0,1)","family":null,"size":11.689497716895}},"hovermode":"closest","barmode":"relative","xaxis2":{"tickfont":{"size":14},"overlaying":"x","nticks":4,"side":"top","type":"category","categoryorder":"array","categoryarray":["OTB","HB","MTB","LTB"]}},"config":{"doubleClick":"reset","showSendToCloud":false,"displayModeBar":false},"source":"A","attrs":{"a0a6297cb8":{"x":{},"y":{},"fill":{},"type":"scatter"},"a0adbb1731":{"label":{},"x":{},"y":{},"fill":{}},"a0a6297cb8.1":{"x":["OTB","HB","MTB","LTB"],"y":[1,2,3,4],"type":"bar","xaxis":"x2","inherit":false}},"cur_data":"a0a6297cb8","visdat":{"a0a6297cb8":["function (y) ","x"],"a0adbb1731":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script><p>The breakpoints for the categorical outcomes of the TBNI scores shown by the colors in each graph are based on the 33rd and 50th percentiles of the distribution of all TBNI scores calculated for Tampa Bay. This plotting option is provided for consistency with existing TBEP reporting tools, e.g., the <a href="https://tbeptech.org/TBEP_TECH_PUBS/2020/TBEP_01_20_2019_Decision_Matrix_Update.pdf">water quality report card</a> returned by <code><a href="../reference/show_matrix.html">show_matrix()</a></code>. The categorical outcomes serve as management guidelines each year for activities to support environmental resources of the Bay: <span style="color:#33FF3B; text-shadow: 0 0 3px #333;"><strong>Stay the Course</strong></span>, <span style="color:#F9FF33; text-shadow: 0 0 3px #333;"><strong>Caution</strong></span>, and <span style="color:#FF3333; text-shadow: 0 0 3px #333;"><strong>On Alert</strong></span> <span class="citation">[3]</span>.</p>
<p>The graphs returned by the plotting functions are <code>ggplot</code> objects that can be further modified. They can be combined below using <a href="https://patchwork.data-imaginist.com/">patchwork</a> in a single graphic showing the trends over time as both categorical outcomes in the matrix and continuous scores in the bottom plot.</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">p1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/show_tbnimatrix.html">show_tbnimatrix</a></span><span class="op">(</span><span class="va">tbniscr</span>, txtsz <span class="op">=</span> <span class="cn">NULL</span>, rev <span class="op">=</span> <span class="cn">TRUE</span>, position <span class="op">=</span> <span class="st">'bottom'</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">scale_y_continuous</span><span class="op">(</span>expand <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">0</span><span class="op">)</span>, breaks <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1998</span><span class="op">:</span><span class="fl">2018</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">coord_flip</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">theme</span><span class="op">(</span>axis.text.x <span class="op">=</span> <span class="fu">element_blank</span><span class="op">(</span><span class="op">)</span><span class="op">)</span>

<span class="va">p2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/show_tbniscr.html">show_tbniscr</a></span><span class="op">(</span><span class="va">tbniscr</span><span class="op">)</span>

<span class="va">p1</span> <span class="op">+</span> <span class="va">p2</span> <span class="op">+</span> <span class="fu">plot_layout</span><span class="op">(</span>ncol <span class="op">=</span> <span class="fl">1</span>, heights <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0.3</span>, <span class="fl">1</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<p><img src="tbni_files/figure-html/unnamed-chunk-19-1.png" width="672" style="display: block; margin: auto;"></p>
</div>
<div id="references" class="section level1 unnumbered">
<h1 class="hasAnchor">
<a href="#references" class="anchor"></a>References</h1>
<div id="refs" class="references">
<div id="ref-tbep0418">
<p>[1] M.N. Schrandt, T.C. MacDonald, Tampa Bay Nekton Index, Final Report, Tampa Bay Estuary Program, St. Petersburg, Florida, 2018. <a href="https://drive.google.com/file/d/1oWm-xosC-mb9e8GnO4BmtJRNXjfEb4H_/view?usp=drivesdk">https://drive.google.com/file/d/1oWm-xosC-mb9e8GnO4BmtJRNXjfEb4H_/view?usp=drivesdk</a>.</p>
</div>
<div id="ref-tbep1219">
<p>[2] M.N. Schrandt, T.C. MacDonald, 2018 Multimetric Index of Nekton Health for Tampa Bay, FL, Tampa Bay Estuary Program, St. Petersburg, Florida, 2019. <a href="https://drive.google.com/file/d/1EVBUFGcmhvp3Yu1L2YGNQuxY-cqO0zyI/view?usp=drivesdk">https://drive.google.com/file/d/1EVBUFGcmhvp3Yu1L2YGNQuxY-cqO0zyI/view?usp=drivesdk</a>.</p>
</div>
<div id="ref-tbep0105">
<p>[3] Janicki Environmental, Inc., Tracking Chlorophyll-a and Light Attenuation in Tampa Bay: Application to 2004 Data, Tampa Bay Estuary Program, St. Petersburg, Florida, 2005. <a href="https://drive.google.com/file/d/1GNSb5i_x_WSxe8VKz9FtqZ7fjWcnVqHO/view?usp=drivesdk">https://drive.google.com/file/d/1GNSb5i_x_WSxe8VKz9FtqZ7fjWcnVqHO/view?usp=drivesdk</a>.</p>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Marcus Beck, Meagan Schrandt, Mike Wessel, Ed Sherwood, Ben Best.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
