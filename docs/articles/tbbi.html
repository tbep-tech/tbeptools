<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Tampa Bay Benthic Index • tbeptools</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Tampa Bay Benthic Index">
<meta property="og:description" content="tbeptools">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">tbeptools</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/intro.html">Intro to TBEP Tools</a>
    </li>
    <li>
      <a href="../articles/seagrasstransect.html">Seagrass Transect Data</a>
    </li>
    <li>
      <a href="../articles/tbbi.html">Tampa Bay Benthic Index</a>
    </li>
    <li>
      <a href="../articles/tbni.html">Tampa Bay Nekton Index</a>
    </li>
    <li>
      <a href="../articles/tidalcreeks.html">Tidal Creek Assessment</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/tbep-tech/tbeptools/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="tbbi_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Tampa Bay Benthic Index</h1>
            
            <h4 class="date">2020-09-09</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/tbep-tech/tbeptools/blob/master/vignettes/tbbi.Rmd"><code>vignettes/tbbi.Rmd</code></a></small>
      <div class="hidden name"><code>tbbi.Rmd</code></div>

    </div>

    
    
<div id="background" class="section level2">
<h2 class="hasAnchor">
<a href="#background" class="anchor"></a>Background</h2>
<p>The Tampa Bay Benthic Index (TBNI) <span class="citation">[1,2]</span>) is an assessment method that quantifies the ecological health of the benthic community in Tampa Bay. The index provides a complementary approach to evaluating environmental condition that is supported by other assessment methods currently available for Tampa Bay (e.g., water quality report card, nekton index, etc.). The tbeptools package includes several functions described below to import data required for the index and plot the results to view trends over time. Each of the functions are described in detail below.</p>
<p>The TBBI uses data from the Tampa Bay Benthic Monitoring Program as part of the Hillsborough Country Environmental Protection Commission (EPC). The data are updated annually on a FTP site maintained by EPC, typically in December after Summer/Fall sampling. This is the same website that hosts water quality data used for the <a href="https://tbep-tech.github.io/tbeptools/articles/intro.html">water quality report card</a>. The required data for the TBBI are more extensive than the water quality report card, so the data are made available as a Microsoft Access Database. The process for downloading and processing the data are similar as for the other functions in tbeptools, except a few additional steps to connect and extract tables from the Access database are required. Because of this, <strong>the data import functions have only been tested on Windows using 64-bit R.</strong> You will need to download and install a <a href="https://www.microsoft.com/en-us/download/details.aspx?id=54920">Microsoft Access driver</a> to import the data.</p>
</div>
<div id="data-import-and-included-datasets" class="section level2">
<h2 class="hasAnchor">
<a href="#data-import-and-included-datasets" class="anchor"></a>Data import and included datasets</h2>
<p>After installing a <a href="https://www.microsoft.com/en-us/download/details.aspx?id=54920">Microsoft Access driver</a>, data for calculating TBBI scores can be imported into the current R session using the <code><a href="../reference/read_importbenthic.html">read_importbenthic()</a></code> function. This function downloads the latest Access database from the EPC FTP site if the data have not already been downloaded to the location specified by the input arguments.</p>
<p>The Access database is hosted on the FTP site as a zipped file. First create a character path for the location where you want to download the zipped file. If one does not exist, specify a desired location and name for the downloaded file. Make sure you do not use the ‘~’ path expansion because this will confuse the database connection in a later step. Here, we want to put the file <code>benthic.zip</code> at the location <code>C:/path/to/</code> (a made up place just for this example).</p>
<div class="sourceCode" id="cb1"><html><body><pre class="r"><span class="no">path</span> <span class="kw">&lt;-</span> <span class="st">'C:/path/to/benthic.zip'</span>
<span class="no">benthicdata</span> <span class="kw">&lt;-</span> <span class="fu">read_importbenthos</span>(<span class="no">path</span>)</pre></body></html></div>
<p>Running the above code will return the following error:</p>
<div class="sourceCode" id="cb2"><html><body><pre class="r">#&gt; Error in read_importbenthic() : File at path does not exist, use download_test = TRUE</pre></body></html></div>
<p>We get an error message from the function indicating that the file is not found. This makes sense because the file does not exist yet, so we need to tell the function to download the latest file. This is done by changing the <code>download_latest</code> argument to <code>TRUE</code> (the default is <code>FALSE</code>).</p>
<div class="sourceCode" id="cb3"><html><body><pre class="r"><span class="no">benthicdata</span> <span class="kw">&lt;-</span> <span class="fu"><a href="../reference/read_importbenthic.html">read_importbenthic</a></span>(<span class="no">path</span>, <span class="kw">download_latest</span> <span class="kw">=</span> <span class="no">T</span>)</pre></body></html></div>
<div class="sourceCode" id="cb4"><html><body><pre class="r">#&gt; File C:/path/to/benthic.zip does not exist, replacing with downloaded file...

#&gt; trying URL 'ftp://ftp.epchc.org/EPC_ERM_FTP/Benthic_Monitoring/EPC DataSubmittals.zip' length 37122877 bytes (35.4 MB)</pre></body></html></div>
<p>Now we get an indication that the file on the server is being downloaded. When the download is complete, we’ll have the data downloaded and saved to the <code>benthicdata</code> object in the current R session.</p>
<p>If we try to run the function again after downloading the data from the server, we get the following message. This check is done to make sure that the data are not unnecessarily downloaded if the current file matches the file on the server.</p>
<div class="sourceCode" id="cb5"><html><body><pre class="r"><span class="no">benthicdata</span> <span class="kw">&lt;-</span> <span class="fu"><a href="../reference/read_importbenthic.html">read_importbenthic</a></span>(<span class="no">path</span>, <span class="kw">download_latest</span> <span class="kw">=</span> <span class="no">T</span>)</pre></body></html></div>
<div class="sourceCode" id="cb6"><html><body><pre class="r">#&gt; File is current..</pre></body></html></div>
<p>Every time that tbeptools is used to work with the benthic data, <code><a href="../reference/read_importbenthic.html">read_importbenthic()</a></code> should be used to import the data. You will always receive the message <code>File is current...</code> if your local file matches the one on the server. However, data are periodically updated and posted on the server. If <code>download_latest = TRUE</code> and your local file is out of date, you will receive the following message:</p>
<div class="sourceCode" id="cb7"><html><body><pre class="r">#&gt; Replacing local file with current...</pre></body></html></div>
<p>Because the downloaded data are a zipped file of an Access database, a few extra steps are needed to process the data. These are all handled automatically by the functions, but it does affect how you might use the data import function. The function automatically downloads the zipped file, unzips it, and establishes a connection to the Access database. If you have already downloaded the zip file and extracted the .mdb file, you can connect to the latter directly by changing the  argument with the appropriate file extension.</p>
<div class="sourceCode" id="cb8"><html><body><pre class="r"><span class="no">benthicdata</span> <span class="kw">&lt;-</span> <span class="fu"><a href="../reference/read_importbenthic.html">read_importbenthic</a></span>(<span class="st">'C:/path/to/benthic.mdb'</span>)</pre></body></html></div>
<p>The Access database also is quite large and you can use a temporary file path for the download and unzipping location. You can use the <code><a href="https://rdrr.io/r/base/tempfile.html">tempfile()</a></code> function with the .zip file extension for the <code>path</code> argument. Because a temporary file is used, you must always include <code>download_latest = TRUE</code>, i.e., there is no previously existing file.</p>
<div class="sourceCode" id="cb9"><html><body><pre class="r"><span class="no">benthicdata</span> <span class="kw">&lt;-</span> <span class="fu"><a href="../reference/read_importbenthic.html">read_importbenthic</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/tempfile.html">tempfile</a></span>(<span class="kw">fileext</span> <span class="kw">=</span> <span class="st">'.zip'</span>), <span class="kw">download_latest</span> <span class="kw">=</span> <span class="no">T</span>)</pre></body></html></div>
<!-- After the data are successfully imported, you can view them from the assigned object: -->
<!-- ```{r} -->
<!-- head(benthicdata) -->
<!-- ``` -->
<!-- The imported data are formatted for calculating the TBBI.  -->
</div>
<div id="references" class="section level1 unnumbered">
<h1 class="hasAnchor">
<a href="#references" class="anchor"></a>References</h1>
<div id="refs" class="references">
<div id="ref-tbep0620">
<p>[1] D.J. Karlen, T. Dix, B.K. Goetting, S.E. Markham, K.Campbell, J. Jernigan, J.Christian, K. Martinez, A. Chacour, Twenty-five-year Trends in the Benthic Community and Sediment Quality of Tampa Bay 1993-2017, Tampa Bay Estuary Program, St. Petersburg, Florida, 2020. <a href="http://www.tbeptech.org/TBEP_TECH_PUBS/2020/TBEP_06_20_Karlen_TampaBayBenthicTrends1993-2017.pdf">http://www.tbeptech.org/TBEP_TECH_PUBS/2020/TBEP_06_20_Karlen_TampaBayBenthicTrends1993-2017.pdf</a>.</p>
</div>
<div id="ref-tbep0106">
<p>[2] D. Wade, K. Malloy, A. Janicki, R. Nijbroek, S. Grabe, Development of a Benthic Index to Establish Sediment Quality Targets for the Tampa Bay Estuary, Tampa Bay Estuary Program, St. Petersburg, Florida, 2006. <a href="https://tbeptech.org/TBEP_TECH_PUBS/2006/TBEP_01_06TBay%20BenthicIndex.pdf">https://tbeptech.org/TBEP_TECH_PUBS/2006/TBEP_01_06TBay%20BenthicIndex.pdf</a>.</p>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Marcus Beck, Meagan Schrandt, Mike Wessel, Ed Sherwood, Ben Best.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
