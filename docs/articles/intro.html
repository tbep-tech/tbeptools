<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Intro to TBEP Tools • tbeptools</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Intro to TBEP Tools">
<meta property="og:description" content="tbeptools">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">tbeptools</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/intro.html">Intro to TBEP Tools</a>
    </li>
    <li>
      <a href="../articles/tbni.html">Tampa Bay Nekton Index</a>
    </li>
    <li>
      <a href="../articles/tidalcreeks.html">Tidal Creek Assessment</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/tbep-tech/tbeptools/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="intro_files/core-js-2.5.3/shim.min.js"></script><script src="intro_files/react-16.12.0/react.min.js"></script><script src="intro_files/react-16.12.0/react-dom.min.js"></script><script src="intro_files/reactwidget-1.0.0/react-tools.js"></script><script src="intro_files/htmlwidgets-1.5.1/htmlwidgets.js"></script><script src="intro_files/reactable-binding-0.2.0/reactable.js"></script><script src="intro_files/plotly-binding-4.9.2.1/plotly.js"></script><script src="intro_files/typedarray-0.1/typedarray.min.js"></script><script src="intro_files/jquery-1.11.3/jquery.min.js"></script><link href="intro_files/crosstalk-1.1.0.1/css/crosstalk.css" rel="stylesheet">
<script src="intro_files/crosstalk-1.1.0.1/js/crosstalk.min.js"></script><link href="intro_files/plotly-htmlwidgets-css-1.52.2/plotly-htmlwidgets.css" rel="stylesheet">
<script src="intro_files/plotly-main-1.52.2/plotly-latest.min.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Intro to TBEP Tools</h1>
            
            <h4 class="date">2020-07-07</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/tbep-tech/tbeptools/blob/master/vignettes/intro.Rmd"><code>vignettes/intro.Rmd</code></a></small>
      <div class="hidden name"><code>intro.Rmd</code></div>

    </div>

    
    
<div id="background" class="section level2">
<h2 class="hasAnchor">
<a href="#background" class="anchor"></a>Background</h2>
<p>Dashboard: <a href="https://shiny.tbeptech.org/wq-dash" class="uri">https://shiny.tbeptech.org/wq-dash</a></p>
<p>The environmental recovery of Tampa Bay is an exceptional success story for coastal water quality management. Nitrogen loads in the mid 1970s have been estimated at <span class="math inline">\(8.2 \times 10^6\)</span> kg yr<span class="math inline">\(^{-1}\)</span>, with approximately <span class="math inline">\(5.5 \times 10^6\)</span> kg yr<span class="math inline">\(^{-1}\)</span> entering the upper Bay alone <span class="citation">[1]</span>. Reduced water clarity associated with phytoplankton biomass contributed to a dramatic reduction in the areal coverage of seagrass <span class="citation">[3]</span> and development of hypoxic events, causing a decline in benthic faunal production <span class="citation">[4]</span>. Extensive efforts to reduce nutrient loads to the Bay occurred by the late 1970s, with the most notable being improvements in infrastructure for wastewater treatment in 1979. Improvements in water clarity and decreases in chlorophyll concentrations were observed Bay-wide in the 1980s, with conditions generally remaining constant to present day <span class="citation">[5]</span>.</p>
<p>Tracking changes in environmental condition from the past to present day would not have been possible without a long-term monitoring dataset. Data have been collected monthly by the Environmental Protection Commission of Hillsborough County since 1974 <span class="citation">[6,7]</span>. Samples are taken at forty-five stations using by water collection or monitoring sonde at bottom, mid- or surface depths, depending on parameter. The locations of monitoring stations are fixed and cover the entire Bay from the uppermost mesohaline sections to the lowermost euhaline portions that have direct interaction with the Gulf of Mexico. Up to 515 observations are available for different parameters at each station, e.g., nitrogen, chlorophyll-a, and secchi depth.</p>
<div class="figure" style="text-align: center">
<img src="tb_map.png" alt="Locations of long-term monitoring stations in Tampa Bay. The Bay is separated into four segments defined by chemical, physical, and geopolitical boundaries." width="80%"><p class="caption">
Locations of long-term monitoring stations in Tampa Bay. The Bay is separated into four segments defined by chemical, physical, and geopolitical boundaries.
</p>
</div>
</div>
<div id="package-goal" class="section level2">
<h2 class="hasAnchor">
<a href="#package-goal" class="anchor"></a>Package goal</h2>
<p>Data collected from the monitoring program are processed and maintained in a spreadsheet titled <code>RWMDataSpreadsheet_ThroughCurrentReportMonth.xlsx</code> at <a href="ftp://ftp.epchc.org/EPC_ERM_FTP/WQM_Reports/" class="uri">ftp://ftp.epchc.org/EPC_ERM_FTP/WQM_Reports/</a>. These data include observations at all stations and for all parameters throughout the period of record. To date, there have been no systematic tools for importing, analyzing, and reporting information from these data. The <strong>tbeptools</strong> package provides was developed to address this need.</p>
<p>Functions in tbeptools fall in three categories depending on mode of use. Each function is named using a prefix for the mode of use, followed by what the function does. The prefixes are:</p>
<ul>
<li><p><code>read</code>: Import current data from the main ftp site.</p></li>
<li><p><code>anlz</code>: Analyze or summarize the imported data.</p></li>
<li><p><code>show</code>: Create a plot of the analyzed data.</p></li>
</ul>
<p>The following shows all functions provided in tbeptools, organized by prefix.</p>
<div id="read" class="section level4">
<h4 class="hasAnchor">
<a href="#read" class="anchor"></a>Read</h4>
<ul>
<li><p><code><a href="../reference/read_chkdate.html">read_chkdate()</a></code>: Compare date of local xlsx file with the same file on the server</p></li>
<li><p><code><a href="../reference/read_dlcurrent.html">read_dlcurrent()</a></code>: Download latest file from epchc.org</p></li>
<li><p><code><a href="../reference/read_formfim.html">read_formfim()</a></code>: Format FIM data for the Tampa Bay Nekton Index</p></li>
<li><p><code><a href="../reference/read_formphyto.html">read_formphyto()</a></code>: Format phytoplankton data</p></li>
<li><p><code><a href="../reference/read_formwq.html">read_formwq()</a></code>: Format water quality data</p></li>
<li><p><code><a href="../reference/read_importfim.html">read_importfim()</a></code>: Load local FIM data for the Tampa Bay Nekton Index</p></li>
<li><p><code><a href="../reference/read_importphyto.html">read_importphyto()</a></code>: Load local phytoplankton cell count file</p></li>
<li><p><code><a href="../reference/read_importwq.html">read_importwq()</a></code>: Load local water quality file</p></li>
</ul>
</div>
<div id="analyze" class="section level4">
<h4 class="hasAnchor">
<a href="#analyze" class="anchor"></a>Analyze</h4>
<ul>
<li><p><code><a href="../reference/anlz_attain.html">anlz_attain()</a></code>: Get attainment categories</p></li>
<li><p><code><a href="../reference/anlz_attainsite.html">anlz_attainsite()</a></code>: Get site attainments</p></li>
<li><p><code><a href="../reference/anlz_avedat.html">anlz_avedat()</a></code>: Estimate annual means</p></li>
<li><p><code><a href="../reference/anlz_avedatsite.html">anlz_avedatsite()</a></code>: Estimate annual means by site</p></li>
<li><p><code><a href="../reference/anlz_hydroload.html">anlz_hydroload()</a></code>: Estimate hydrological estimates and adjustment factors for bay segments</p></li>
<li><p><code><a href="../reference/anlz_iwrraw.html">anlz_iwrraw()</a></code>: Format raw IWR data</p></li>
<li><p><code><a href="../reference/anlz_refs.html">anlz_refs()</a></code>: Convert references csv to bib entries</p></li>
<li><p><code><a href="../reference/anlz_tbniave.html">anlz_tbniave()</a></code>: Get annual averages of Tampa Bay Nekton Index scores by bay segment</p></li>
<li><p><code><a href="../reference/anlz_tbnimet.html">anlz_tbnimet()</a></code>: Get all raw metrics for Tampa Bay Benthic Index</p></li>
<li><p><code><a href="../reference/anlz_tbniscr.html">anlz_tbniscr()</a></code>: Get Tampa Bay Benthic Index scores</p></li>
<li><p><code><a href="../reference/anlz_tdlcrk.html">anlz_tdlcrk()</a></code>: Estimate tidal creek report card scores</p></li>
<li><p><code><a href="../reference/anlz_tdlcrkindic.html">anlz_tdlcrkindic()</a></code>: Analyze tidal creek water quality indicators</p></li>
<li><p><code><a href="../reference/anlz_yrattain.html">anlz_yrattain()</a></code>: Get attainment categories for a selected year</p></li>
</ul>
</div>
<div id="show" class="section level4">
<h4 class="hasAnchor">
<a href="#show" class="anchor"></a>Show</h4>
<ul>
<li><p><code><a href="../reference/show_boxplot.html">show_boxplot()</a></code>: Plot monthly chlorophyll or light attenuation values for a bay segment</p></li>
<li><p><code><a href="../reference/show_matrix.html">show_matrix()</a></code>: Create a colorized table for indicator reporting</p></li>
<li><p><code><a href="../reference/show_matrixplotly.html">show_matrixplotly()</a></code>: Creates a plotly matrix from any matrix function input</p></li>
<li><p><code><a href="../reference/show_reactable.html">show_reactable()</a></code>: Create a reactable table for reporting matrices, used internally only</p></li>
<li><p><code><a href="../reference/show_segmatrix.html">show_segmatrix()</a></code>: Create a colorized table for water quality outcomes and exceedances by segment</p></li>
<li><p><code><a href="../reference/show_segplotly.html">show_segplotly()</a></code>: Plot chlorophyll and secchi data together with matrix outcomes</p></li>
<li><p><code><a href="../reference/show_sitemap.html">show_sitemap()</a></code>: Plot a map of water quality stations for a selected year, with targets</p></li>
<li><p><code><a href="../reference/show_tbnimatrix.html">show_tbnimatrix()</a></code>: Plot a matrix of Tampa Bay Nekton Index scores over time by bay segment</p></li>
<li><p><code><a href="../reference/show_tbniscr.html">show_tbniscr()</a></code>: Plot Tampa Bay Nekton Index scores over time by bay segment</p></li>
<li><p><code><a href="../reference/show_tdlcrk.html">show_tdlcrk()</a></code>: Make a map for tidal creek report card</p></li>
<li><p><code><a href="../reference/show_tdlcrkindic.html">show_tdlcrkindic()</a></code>: Plotly barplots of tidal creek context indicators</p></li>
<li><p><code><a href="../reference/show_tdlcrkindiccdf.html">show_tdlcrkindiccdf()</a></code>: Plotly empirical CDF plots of tidal creek context indicators</p></li>
<li><p><code><a href="../reference/show_tdlcrkline.html">show_tdlcrkline()</a></code>: Add a line or annotation to a plotly graph for the tidal creek indicators</p></li>
<li><p><code><a href="../reference/show_thrplot.html">show_thrplot()</a></code>: Plot annual water quality values, targets, and thresholds for a bay segment</p></li>
<li><p><code><a href="../reference/show_wqmatrix.html">show_wqmatrix()</a></code>: Create a colorized table for chlorophyll or light attenuation exceedances</p></li>
</ul>
<p>The functions can be easily found in RStudio after loading the package and typing the prefix at the command line. An autofill dialog box will pop up showing all functions that apply for the prefix. This eliminates the need for searching for individual functions if all you know is the category of function you need (e.g., <code>read</code>, <code>anlz</code>, or <code>show</code>). For example:</p>
<div class="figure" style="text-align: center">
<img src="readauto.png" alt="Searching for functions in tbeptools by typing in the prefix." width="80%"><p class="caption">
Searching for functions in tbeptools by typing in the prefix.
</p>
</div>
</div>
</div>
<div id="installing-tbeptools" class="section level2">
<h2 class="hasAnchor">
<a href="#installing-tbeptools" class="anchor"></a>Installing tbeptools</h2>
<p>Begin by installing the package from GitHub. The source code is available on the tbep-tech GitHub group web page: <a href="https://github.com/tbep-tech/tbeptools" class="uri">https://github.com/tbep-tech/tbeptools</a>.</p>
<p>First, install the devtools package, load devtools, then install and load tbeptools. Note that tbeptools only needs to be installed once, but it needs to be loaded every new R session (i.e., <code><a href="https://rdrr.io/pkg/tbeptools/man">library(tbeptools)</a></code>).</p>
<div class="sourceCode" id="cb1"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span>(<span class="st">'devtools'</span>)
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">devtools</span>)
<span class="fu"><a href="https://devtools.r-lib.org//reference/remote-reexports.html">install_github</a></span>(<span class="st">'tbeptools'</span>)
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">tbeptools</span>)</pre></body></html></div>
<p>After the package is loaded, you can view the help files for each function by typing a question mark followed by the function name, e.g., <code><a href="../reference/read_importwq.html">?read_importwq</a></code>, on the console. The help files provide a brief description of what each function does and the required arguments that are needed to run the function.</p>
<div class="figure" style="text-align: center">
<img src="helpfileex.png" alt="The help file for `read_importwq`." width="70%"><p class="caption">
The help file for <code>read_importwq</code>.
</p>
</div>
<p>In the above example, the <code><a href="../reference/read_importwq.html">read_importwq()</a></code> functions accepts six arguments. All but one argument have default values that change the behavior of the function. In most cases, the default values are appropriate. The only required argument is <code>xlsx</code> that specifies a path where a local excel file is located. The details of this function are described below.</p>
</div>
<div id="read-1" class="section level2">
<h2 class="hasAnchor">
<a href="#read-1" class="anchor"></a>Read</h2>
<p>There are 8 functions in tbeptools for reading or importing data from the main ftp website listed above:</p>
<ul>
<li><p><code><a href="../reference/read_chkdate.html">read_chkdate()</a></code>: Compare date of local xlsx file with the same file on the server</p></li>
<li><p><code><a href="../reference/read_dlcurrent.html">read_dlcurrent()</a></code>: Download latest file from epchc.org</p></li>
<li><p><code><a href="../reference/read_formfim.html">read_formfim()</a></code>: Format FIM data for the Tampa Bay Nekton Index</p></li>
<li><p><code><a href="../reference/read_formphyto.html">read_formphyto()</a></code>: Format phytoplankton data</p></li>
<li><p><code><a href="../reference/read_formwq.html">read_formwq()</a></code>: Format water quality data</p></li>
<li><p><code><a href="../reference/read_importfim.html">read_importfim()</a></code>: Load local FIM data for the Tampa Bay Nekton Index</p></li>
<li><p><code><a href="../reference/read_importphyto.html">read_importphyto()</a></code>: Load local phytoplankton cell count file</p></li>
<li><p><code><a href="../reference/read_importwq.html">read_importwq()</a></code>: Load local water quality file</p></li>
</ul>
<p>The main function for importing water quality data is <code><a href="../reference/read_importwq.html">read_importwq()</a></code>. This function downloads the latest file if one is not already available at the location specified by the <code>xlsx</code> input argument.</p>
<p>First, create a character path for the location of the file. If one does not exist, specify a desired location and name for the downloaded file. Here, we want to put the file in the vignettes folder and name is 2018_Results_updated.xls. Note that this file path is relative to the root working directly for the current R session. You can view the working directory with <code><a href="https://rdrr.io/r/base/getwd.html">getwd()</a></code>.</p>
<div class="sourceCode" id="cb2"><html><body><pre class="r"><span class="no">xlsx</span> <span class="kw">&lt;-</span> <span class="st">'vignettes/2018_Results_updated.xls'</span></pre></body></html></div>
<p>Now we pass this <code>xlsx</code> object to the <code><a href="../reference/read_importwq.html">read_importwq()</a></code> function.</p>
<div class="sourceCode" id="cb3"><html><body><pre class="r"><span class="no">ecpdata</span> <span class="kw">&lt;-</span> <span class="fu"><a href="../reference/read_importwq.html">read_importwq</a></span>(<span class="no">xlsx</span>)</pre></body></html></div>
<pre><code>#&gt; Error in read_importwq("empty") : file.exists(xlsx) is not TRUE</code></pre>
<p>We get an error message from the function indicating that the file is not found. This makes sense because the file doesn’t exist yet, so we need to tell the function to download the latest file. This is done by changing the <code>download_latest</code> argument to <code>TRUE</code> (the default is <code>FALSE</code>).</p>
<div class="sourceCode" id="cb5"><html><body><pre class="r"><span class="no">ecpdata</span> <span class="kw">&lt;-</span> <span class="fu"><a href="../reference/read_importwq.html">read_importwq</a></span>(<span class="no">xlsx</span>, <span class="kw">download_latest</span> <span class="kw">=</span> <span class="fl">TRUE</span>)</pre></body></html></div>
<pre><code>#&gt; File vignettes/2018_Results_updated.xls does not exist, replacing with downloaded file...

#&gt; trying URL 'ftp://ftp.epchc.org/EPC_ERM_FTP/WQM_Reports/RWMDataSpreadsheet_ThroughCurrentReportMonth.xlsx'
 length 24562051 bytes (23.4 MB)</code></pre>
<p>Now we get the same message, but with an indication that file on the server is being downloaded. We’ll have the data downloaded and saved to the <code>epcdata</code> object after it finishes downloading.</p>
<p>If we try to run the function again after downloading the data from the server, we get the following message. This check is done to make sure that the data are not unnecessarily downloaded if the current matches the file on the server.</p>
<div class="sourceCode" id="cb7"><html><body><pre class="r"><span class="no">ecpdata</span> <span class="kw">&lt;-</span> <span class="fu"><a href="../reference/read_importwq.html">read_importwq</a></span>(<span class="no">xlsx</span>, <span class="kw">download_latest</span> <span class="kw">=</span> <span class="fl">TRUE</span>)</pre></body></html></div>
<pre><code>#&gt; File is current...</code></pre>
<p>Every time that tbeptools is used to work with the monitoring data, <code><a href="../reference/read_importwq.html">read_importwq()</a></code> should be used to import the data. You will always receive the message <code>File is current...</code> if your local file matches the one on the server. However, new data are regularly collected and posted on the server. If <code>download_latest = TRUE</code> and your local file is out of date, you will receive the following message:</p>
<pre><code>#&gt; Replacing local file with current...</code></pre>
<p>The final argument <code>na</code> indicates which fields in the downloaded spreadsheet are treated as blank values and assigned to <code>NA</code>. Any number of strings can be added to this function to replace fields with <code>NA</code> values.</p>
<p>After the data are successfully imported, you can view them from the assigned object:</p>
<div class="sourceCode" id="cb10"><html><body><pre class="r"><span class="no">epcdata</span>
<span class="co">#&gt; # A tibble: 25,804 x 17</span>
<span class="co">#&gt;    bay_segment epchc_station SampleTime             yr    mo Latitude Longitude</span>
<span class="co">#&gt;    &lt;chr&gt;               &lt;dbl&gt; &lt;dttm&gt;              &lt;dbl&gt; &lt;dbl&gt;    &lt;dbl&gt;     &lt;dbl&gt;</span>
<span class="co">#&gt;  1 HB                      6 2020-03-10 09:41:00  2020     3     27.9     -82.5</span>
<span class="co">#&gt;  2 HB                      7 2020-03-10 09:52:00  2020     3     27.9     -82.5</span>
<span class="co">#&gt;  3 HB                      8 2020-03-10 11:57:00  2020     3     27.9     -82.4</span>
<span class="co">#&gt;  4 MTB                     9 2020-03-10 11:12:00  2020     3     27.8     -82.4</span>
<span class="co">#&gt;  5 MTB                    11 2020-03-10 10:06:00  2020     3     27.8     -82.5</span>
<span class="co">#&gt;  6 MTB                    13 2020-03-10 10:17:00  2020     3     27.8     -82.5</span>
<span class="co">#&gt;  7 MTB                    14 2020-03-10 10:45:00  2020     3     27.8     -82.5</span>
<span class="co">#&gt;  8 MTB                    16 2020-03-17 10:15:00  2020     3     27.7     -82.5</span>
<span class="co">#&gt;  9 MTB                    19 2020-03-17 10:28:00  2020     3     27.7     -82.6</span>
<span class="co">#&gt; 10 LTB                    23 2020-03-17 13:17:00  2020     3     27.7     -82.6</span>
<span class="co">#&gt; # ... with 25,794 more rows, and 10 more variables: Total_Depth_m &lt;dbl&gt;,</span>
<span class="co">#&gt; #   Sample_Depth_m &lt;dbl&gt;, sd_m &lt;dbl&gt;, sd_raw_m &lt;dbl&gt;, sd_q &lt;chr&gt;, chla &lt;dbl&gt;,</span>
<span class="co">#&gt; #   chla_q &lt;chr&gt;, Sal_Top_ppth &lt;dbl&gt;, Sal_Mid_ppth &lt;dbl&gt;, Sal_Bottom_ppth &lt;dbl&gt;</span></pre></body></html></div>
<p>These data include the bay segment name, station number, sample time, year, month, latitude, longitude, station depth, sample depth, secchi depth, and chlorophyll. Note that the monitoring data include additional parameters. Chlorophyll and secchi depth are currently the only parameters returned by <code><a href="../reference/read_importwq.html">read_importwq()</a></code> given the reporting indicators used below.</p>
<p>An import function is also available to download and format phytoplankton cell count data. The <code><a href="../reference/read_importphyto.html">read_importphyto()</a></code> function works similarly as the import function for the water quality data. Start by specifying a path where the data should be downloaded and set <code>download_latest</code> to <code>TRUE</code>. This function will download and summarize data from the file <code>PlanktonDataList_ThroughCurrentReportMonth.xlsx</code> on the EPC website.</p>
<div class="sourceCode" id="cb11"><html><body><pre class="r"><span class="no">xlsx</span> <span class="kw">&lt;-</span> <span class="st">'vignettes/phyto_data.xlsx'</span>
<span class="no">phytodata</span> <span class="kw">&lt;-</span> <span class="fu"><a href="../reference/read_importphyto.html">read_importphyto</a></span>(<span class="no">xlsx</span>, <span class="kw">download_latest</span> <span class="kw">=</span> <span class="no">T</span>)</pre></body></html></div>
<pre><code>#&gt; File vignettes/phyto_data.xlsx does not exist, replacing with downloaded file...

#&gt; trying URL 'ftp://ftp.epchc.org/EPC_ERM_FTP/WQM_Reports/PlanktonDataList_ThroughCurrentReportMonth.xlsx'
 length 12319508 bytes (11.7 MB)</code></pre>
<p>After the phytoplankton data are successfully imported, you can view them from the assigned object:</p>
<div class="sourceCode" id="cb13"><html><body><pre class="r"><span class="no">phytodata</span>
<span class="co">#&gt; # A tibble: 22,059 x 8</span>
<span class="co">#&gt;    epchc_station Date       name           units  count yrqrt         yr mo   </span>
<span class="co">#&gt;    &lt;chr&gt;         &lt;date&gt;     &lt;chr&gt;          &lt;chr&gt;  &lt;dbl&gt; &lt;date&gt;     &lt;dbl&gt; &lt;ord&gt;</span>
<span class="co">#&gt;  1 11            1975-07-23 Cyanobacteria  /0.1mL     0 1975-07-01  1975 Jul  </span>
<span class="co">#&gt;  2 11            1976-01-07 Cyanobacteria  /0.1mL     1 1976-01-01  1976 Jan  </span>
<span class="co">#&gt;  3 11            1977-01-05 other          /0.1mL     1 1977-01-01  1977 Jan  </span>
<span class="co">#&gt;  4 11            1977-04-20 other          /0.1mL     1 1977-04-01  1977 Apr  </span>
<span class="co">#&gt;  5 11            1977-04-20 Tripos hircus  /0.1mL     1 1977-04-01  1977 Apr  </span>
<span class="co">#&gt;  6 11            1977-07-13 other          /0.1mL    12 1977-07-01  1977 Jul  </span>
<span class="co">#&gt;  7 11            1978-01-11 other          /0.1mL    16 1978-01-01  1978 Jan  </span>
<span class="co">#&gt;  8 11            1979-02-08 other          /0.1mL     1 1979-01-01  1979 Feb  </span>
<span class="co">#&gt;  9 11            1979-05-02 Karenia brevis /0.1mL     1 1979-04-01  1979 May  </span>
<span class="co">#&gt; 10 11            1979-05-30 other          /0.1mL     1 1979-04-01  1979 May  </span>
<span class="co">#&gt; # ... with 22,049 more rows</span></pre></body></html></div>
<p>These data are highly summarized from the raw data file available online. Cell counts (as number of cells per 0.1mL) for selected taxa are summed for each station by quarters (i.e., Jan/Feb/Mar, Apr/May/Jun, etc.). The quarter is indicated in the <code>yrqrt</code> column specified by the starting date of each quarter (e.g., <code>1975-07-01</code> is the quarter Jul/Aug/Sep for 1975). These data are primarily used to support analyses in the water quality dashboard: <a href="https://shiny.tbeptech.org/wq-dash/" class="uri">https://shiny.tbeptech.org/wq-dash/</a></p>
</div>
<div id="analyze-1" class="section level2 tabset">
<h2 class="hasAnchor">
<a href="#analyze-1" class="anchor"></a>Analyze</h2>
<p>The analyze functions are used primarily to summarize the data returned by <code><a href="../reference/read_importwq.html">read_importwq()</a></code>.</p>
<ul>
<li><p><code><a href="../reference/anlz_attain.html">anlz_attain()</a></code>: Get attainment categories</p></li>
<li><p><code><a href="../reference/anlz_attainsite.html">anlz_attainsite()</a></code>: Get site attainments</p></li>
<li><p><code><a href="../reference/anlz_avedat.html">anlz_avedat()</a></code>: Estimate annual means</p></li>
<li><p><code><a href="../reference/anlz_avedatsite.html">anlz_avedatsite()</a></code>: Estimate annual means by site</p></li>
<li><p><code><a href="../reference/anlz_hydroload.html">anlz_hydroload()</a></code>: Estimate hydrological estimates and adjustment factors for bay segments</p></li>
<li><p><code><a href="../reference/anlz_iwrraw.html">anlz_iwrraw()</a></code>: Format raw IWR data</p></li>
<li><p><code><a href="../reference/anlz_refs.html">anlz_refs()</a></code>: Convert references csv to bib entries</p></li>
<li><p><code><a href="../reference/anlz_tbniave.html">anlz_tbniave()</a></code>: Get annual averages of Tampa Bay Nekton Index scores by bay segment</p></li>
<li><p><code><a href="../reference/anlz_tbnimet.html">anlz_tbnimet()</a></code>: Get all raw metrics for Tampa Bay Benthic Index</p></li>
<li><p><code><a href="../reference/anlz_tbniscr.html">anlz_tbniscr()</a></code>: Get Tampa Bay Benthic Index scores</p></li>
<li><p><code><a href="../reference/anlz_tdlcrk.html">anlz_tdlcrk()</a></code>: Estimate tidal creek report card scores</p></li>
<li><p><code><a href="../reference/anlz_tdlcrkindic.html">anlz_tdlcrkindic()</a></code>: Analyze tidal creek water quality indicators</p></li>
<li><p><code><a href="../reference/anlz_yrattain.html">anlz_yrattain()</a></code>: Get attainment categories for a selected year</p></li>
</ul>
<p>The functions <code><a href="../reference/anlz_avedat.html">anlz_avedat()</a></code> and <code><a href="../reference/anlz_avedatsite.html">anlz_avedatsite()</a></code> summarize the station data by bay segments or by sites, respectively. Both functions return annual means for chlorophyll and light attenuation (based on Secchi depth measurements) and monthly means by year for chlorophyll and light attenuation. These summaries are then used to determine if bay segment targets for water quality are met using the <code><a href="../reference/anlz_attain.html">anlz_attain()</a></code> and <code><a href="../reference/anlz_attainsite.html">anlz_attainsite()</a></code> function.</p>
<p>Here we use <code><a href="../reference/anlz_avedat.html">anlz_avedat()</a></code> to summarize the data by bay segment to estimate annual and monthly means for chlorophyll and light attenuation. The output is a two-element list for the annual (<code>ann</code>) and monthly (<code>mos</code>) means by segment.</p>
<div class="sourceCode" id="cb14"><html><body><pre class="r"><span class="no">avedat</span> <span class="kw">&lt;-</span> <span class="fu"><a href="../reference/anlz_avedat.html">anlz_avedat</a></span>(<span class="no">epcdata</span>)
<span class="no">avedat</span>
<span class="co">#&gt; $ann</span>
<span class="co">#&gt; # A tibble: 572 x 4</span>
<span class="co">#&gt;    bay_segment    yr var         val</span>
<span class="co">#&gt;    &lt;chr&gt;       &lt;dbl&gt; &lt;chr&gt;     &lt;dbl&gt;</span>
<span class="co">#&gt;  1 HB           1974 mean_chla  22.4</span>
<span class="co">#&gt;  2 HB           1975 mean_chla  27.9</span>
<span class="co">#&gt;  3 HB           1976 mean_chla  29.5</span>
<span class="co">#&gt;  4 HB           1977 mean_chla  32.5</span>
<span class="co">#&gt;  5 HB           1978 mean_chla  22.0</span>
<span class="co">#&gt;  6 HB           1979 mean_chla  29.7</span>
<span class="co">#&gt;  7 HB           1980 mean_chla  22.6</span>
<span class="co">#&gt;  8 HB           1981 mean_chla  31.1</span>
<span class="co">#&gt;  9 HB           1982 mean_chla  36.1</span>
<span class="co">#&gt; 10 HB           1983 mean_chla  25.9</span>
<span class="co">#&gt; # ... with 562 more rows</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $mos</span>
<span class="co">#&gt; # A tibble: 4,381 x 5</span>
<span class="co">#&gt;       yr    mo bay_segment var         val</span>
<span class="co">#&gt;    &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;       &lt;chr&gt;     &lt;dbl&gt;</span>
<span class="co">#&gt;  1  1974     1 HB          mean_chla 36.2 </span>
<span class="co">#&gt;  2  1974     1 LTB         mean_chla  1.75</span>
<span class="co">#&gt;  3  1974     1 OTB         mean_chla  4.4 </span>
<span class="co">#&gt;  4  1974     2 HB          mean_chla 42.4 </span>
<span class="co">#&gt;  5  1974     2 LTB         mean_chla  5.5 </span>
<span class="co">#&gt;  6  1974     2 OTB         mean_chla  4.07</span>
<span class="co">#&gt;  7  1974     3 HB          mean_chla 14.9 </span>
<span class="co">#&gt;  8  1974     3 LTB         mean_chla  5.88</span>
<span class="co">#&gt;  9  1974     4 HB          mean_chla 14.6 </span>
<span class="co">#&gt; 10  1974     4 LTB         mean_chla  1.75</span>
<span class="co">#&gt; # ... with 4,371 more rows</span></pre></body></html></div>
<p>This output can then be further analyzed with <code><a href="../reference/anlz_attain.html">anlz_attain()</a></code> to determine if the bay segment outcomes are met in each year. The results are used by the plotting functions described below. In short, the <code>chl_la</code> column indicates the categorical outcome for chlorophyll and light attenuation for each segment. The outcomes are integer values from zero to three. The relative exceedances of water quality thresholds for each segment, both in duration and magnitude, are indicated by higher integer values.</p>
<div class="sourceCode" id="cb15"><html><body><pre class="r"><span class="fu"><a href="../reference/anlz_attain.html">anlz_attain</a></span>(<span class="no">avedat</span>)
<span class="co">#&gt; # A tibble: 188 x 4</span>
<span class="co">#&gt;    bay_segment    yr chl_la outcome</span>
<span class="co">#&gt;    &lt;chr&gt;       &lt;dbl&gt; &lt;chr&gt;  &lt;chr&gt;  </span>
<span class="co">#&gt;  1 HB           1974 3_0    yellow </span>
<span class="co">#&gt;  2 HB           1975 3_2    red    </span>
<span class="co">#&gt;  3 HB           1976 3_2    red    </span>
<span class="co">#&gt;  4 HB           1977 3_2    red    </span>
<span class="co">#&gt;  5 HB           1978 3_3    red    </span>
<span class="co">#&gt;  6 HB           1979 3_3    red    </span>
<span class="co">#&gt;  7 HB           1980 3_3    red    </span>
<span class="co">#&gt;  8 HB           1981 3_3    red    </span>
<span class="co">#&gt;  9 HB           1982 3_3    red    </span>
<span class="co">#&gt; 10 HB           1983 3_0    yellow </span>
<span class="co">#&gt; # ... with 178 more rows</span></pre></body></html></div>
<p>Similar information can be obtained for individual sites using <code><a href="../reference/anlz_avedatsite.html">anlz_avedatsite()</a></code> and <code><a href="../reference/anlz_attainsite.html">anlz_attainsite()</a></code>. The main difference is that a yes/no column <code>met</code>is added that indicates only if the target was above or below the segment threshold for each site.</p>
<div class="sourceCode" id="cb16"><html><body><pre class="r"><span class="fu"><a href="../reference/anlz_avedatsite.html">anlz_avedatsite</a></span>(<span class="no">epcdata</span>) <span class="kw">%&gt;%</span> <span class="no">anlz_attainsite</span>
<span class="co">#&gt; # A tibble: 2,115 x 9</span>
<span class="co">#&gt;    bay_segment epchc_station    yr var     val target smallex thresh met  </span>
<span class="co">#&gt;    &lt;chr&gt;               &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt; &lt;dbl&gt;  &lt;dbl&gt;   &lt;dbl&gt;  &lt;dbl&gt; &lt;chr&gt;</span>
<span class="co">#&gt;  1 HB                      6  1974 chla   25.6   13.2    14.1     15 no   </span>
<span class="co">#&gt;  2 HB                      6  1975 chla   24.8   13.2    14.1     15 no   </span>
<span class="co">#&gt;  3 HB                      6  1976 chla   33.0   13.2    14.1     15 no   </span>
<span class="co">#&gt;  4 HB                      6  1977 chla   43.9   13.2    14.1     15 no   </span>
<span class="co">#&gt;  5 HB                      6  1978 chla   28.5   13.2    14.1     15 no   </span>
<span class="co">#&gt;  6 HB                      6  1979 chla   27.2   13.2    14.1     15 no   </span>
<span class="co">#&gt;  7 HB                      6  1980 chla   23.8   13.2    14.1     15 no   </span>
<span class="co">#&gt;  8 HB                      6  1981 chla   41.0   13.2    14.1     15 no   </span>
<span class="co">#&gt;  9 HB                      6  1982 chla   25.4   13.2    14.1     15 no   </span>
<span class="co">#&gt; 10 HB                      6  1983 chla   25.9   13.2    14.1     15 no   </span>
<span class="co">#&gt; # ... with 2,105 more rows</span></pre></body></html></div>
<p>The condition of tidal creeks can be evaluated using the <code>anlz_tldcrk()</code> function. View the <a href="https://tbep-tech.github.io/tbeptools/articles/tidalcreeks.html">Tidal Creek Assessment</a> vignette for additional information.</p>
</div>
<div id="show-1" class="section level2">
<h2 class="hasAnchor">
<a href="#show-1" class="anchor"></a>Show</h2>
<p>The plotting functions are used to view long-term trends for each bay segment and annual results for the overall water quality assessment:</p>
<ul>
<li><p><code><a href="../reference/show_boxplot.html">show_boxplot()</a></code>: Plot monthly chlorophyll or light attenuation values for a bay segment</p></li>
<li><p><code><a href="../reference/show_matrix.html">show_matrix()</a></code>: Create a colorized table for indicator reporting</p></li>
<li><p><code><a href="../reference/show_matrixplotly.html">show_matrixplotly()</a></code>: Creates a plotly matrix from any matrix function input</p></li>
<li><p><code><a href="../reference/show_reactable.html">show_reactable()</a></code>: Create a reactable table for reporting matrices, used internally only</p></li>
<li><p><code><a href="../reference/show_segmatrix.html">show_segmatrix()</a></code>: Create a colorized table for water quality outcomes and exceedances by segment</p></li>
<li><p><code><a href="../reference/show_segplotly.html">show_segplotly()</a></code>: Plot chlorophyll and secchi data together with matrix outcomes</p></li>
<li><p><code><a href="../reference/show_sitemap.html">show_sitemap()</a></code>: Plot a map of water quality stations for a selected year, with targets</p></li>
<li><p><code><a href="../reference/show_tbnimatrix.html">show_tbnimatrix()</a></code>: Plot a matrix of Tampa Bay Nekton Index scores over time by bay segment</p></li>
<li><p><code><a href="../reference/show_tbniscr.html">show_tbniscr()</a></code>: Plot Tampa Bay Nekton Index scores over time by bay segment</p></li>
<li><p><code><a href="../reference/show_tdlcrk.html">show_tdlcrk()</a></code>: Make a map for tidal creek report card</p></li>
<li><p><code><a href="../reference/show_tdlcrkindic.html">show_tdlcrkindic()</a></code>: Plotly barplots of tidal creek context indicators</p></li>
<li><p><code><a href="../reference/show_tdlcrkindiccdf.html">show_tdlcrkindiccdf()</a></code>: Plotly empirical CDF plots of tidal creek context indicators</p></li>
<li><p><code><a href="../reference/show_tdlcrkline.html">show_tdlcrkline()</a></code>: Add a line or annotation to a plotly graph for the tidal creek indicators</p></li>
<li><p><code><a href="../reference/show_thrplot.html">show_thrplot()</a></code>: Plot annual water quality values, targets, and thresholds for a bay segment</p></li>
<li><p><code><a href="../reference/show_wqmatrix.html">show_wqmatrix()</a></code>: Create a colorized table for chlorophyll or light attenuation exceedances</p></li>
</ul>
<p>External package libraries in R can be used to plot the time series data. Here’s an example using the popular <a href="https://ggplot2.tidyverse.org/">ggplot2</a> package. Some data wrangling with the <a href="https://dplyr.tidyverse.org/">dplyr</a> is done first to filter the data we want to plot.</p>
<div class="sourceCode" id="cb17"><html><body><pre class="r"><span class="no">toplo</span> <span class="kw">&lt;-</span> <span class="no">epcdata</span> <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span>(<span class="no">epchc_station</span> <span class="kw">==</span> <span class="st">'52'</span>)

<span class="fu">ggplot</span>(<span class="no">toplo</span>, <span class="fu">aes</span>(<span class="kw">x</span> <span class="kw">=</span> <span class="no">SampleTime</span>, <span class="kw">y</span> <span class="kw">=</span> <span class="no">chla</span>)) +
  <span class="fu">geom_line</span>() +
  <span class="fu">geom_point</span>() +
  <span class="fu">scale_y_log10</span>() +
  <span class="fu">labs</span>(
    <span class="kw">y</span> <span class="kw">=</span> <span class="st">'Chlorophyll-a concentration (ug/L)'</span>,
    <span class="kw">x</span> <span class="kw">=</span> <span class="kw">NULL</span>,
    <span class="kw">title</span> <span class="kw">=</span> <span class="st">'Chlorophyll trends'</span>,
    <span class="kw">subtitle</span> <span class="kw">=</span> <span class="st">'Hillsborough Bay station 52, all dates'</span>
    ) +
  <span class="fu">theme_bw</span>()</pre></body></html></div>
<p><img src="intro_files/figure-html/unnamed-chunk-14-1.png" width="768" style="display: block; margin: auto;"></p>
<p>The <code><a href="../reference/show_thrplot.html">show_thrplot()</a></code> function provides a more descriptive assessment of annual trends for a chosen bay segment relative to defined targets or thresholds. In this plot we show the annual averages across stations Old Tampa bay (<code>bay_segment = "OTB"</code>) for chlorophyll (<code>thr = "chla"</code>). The red line shows annual trends and the horizontal blue lines indicate the thresholds and targets for chlorophyll-a that are specific to Old Tampa Bay. The dashed and dotted blue lines indicate +1 and +2 standard errors for the management target shown by the filled line. The target and standard errors are considered when identifying the annual segment outcome for chlorophyll.</p>
<div class="sourceCode" id="cb18"><html><body><pre class="r"><span class="fu"><a href="../reference/show_thrplot.html">show_thrplot</a></span>(<span class="no">epcdata</span>, <span class="kw">bay_segment</span> <span class="kw">=</span> <span class="st">"OTB"</span>, <span class="kw">thr</span> <span class="kw">=</span> <span class="st">"chla"</span>)</pre></body></html></div>
<p><img src="intro_files/figure-html/unnamed-chunk-15-1.png" width="768" style="display: block; margin: auto;"></p>
<p>We can show the same plot but for light attenuation by changing the <code>thr = "chla"</code> to <code>thr = "la"</code>. Note the change in the horizontal reference lines for the light attenuation target.</p>
<div class="sourceCode" id="cb19"><html><body><pre class="r"><span class="fu"><a href="../reference/show_thrplot.html">show_thrplot</a></span>(<span class="no">epcdata</span>, <span class="kw">bay_segment</span> <span class="kw">=</span> <span class="st">"OTB"</span>, <span class="kw">thr</span> <span class="kw">=</span> <span class="st">"la"</span>)</pre></body></html></div>
<p><img src="intro_files/figure-html/unnamed-chunk-16-1.png" width="768" style="display: block; margin: auto;"></p>
<p>The year range to plot can also be specified using the <code>yrrng</code> argument, where the default is <code>yrrng = c(1975, 2018)</code>.</p>
<div class="sourceCode" id="cb20"><html><body><pre class="r"><span class="fu"><a href="../reference/show_thrplot.html">show_thrplot</a></span>(<span class="no">epcdata</span>, <span class="kw">bay_segment</span> <span class="kw">=</span> <span class="st">"OTB"</span>, <span class="kw">thr</span> <span class="kw">=</span> <span class="st">"la"</span>, <span class="kw">yrrng</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">2000</span>, <span class="fl">2018</span>))</pre></body></html></div>
<p><img src="intro_files/figure-html/unnamed-chunk-17-1.png" width="768" style="display: block; margin: auto;"></p>
<p>The <code><a href="../reference/show_thrplot.html">show_thrplot()</a></code> function uses results from the <code><a href="../reference/anlz_avedat.html">anlz_avedat()</a></code> function. For example, you can retrieve the values from the above plot as follows:</p>
<div class="sourceCode" id="cb21"><html><body><pre class="r"><span class="no">epcdata</span> <span class="kw">%&gt;%</span>
  <span class="no">anlz_avedat</span> <span class="kw">%&gt;%</span>
  <span class="no">.</span><span class="kw">[[</span><span class="st">'ann'</span>]] <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span>(<span class="no">bay_segment</span> <span class="kw">==</span> <span class="st">'OTB'</span>) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span>(<span class="no">var</span> <span class="kw">==</span> <span class="st">'mean_la'</span>) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span>(<span class="no">yr</span> <span class="kw">&gt;=</span> <span class="fl">2000</span> <span class="kw">&amp;</span> <span class="no">yr</span> <span class="kw">&lt;=</span> <span class="fl">2018</span>)
<span class="co">#&gt; # A tibble: 19 x 4</span>
<span class="co">#&gt;    bay_segment    yr var       val</span>
<span class="co">#&gt;    &lt;chr&gt;       &lt;dbl&gt; &lt;chr&gt;   &lt;dbl&gt;</span>
<span class="co">#&gt;  1 OTB          2000 mean_la 0.733</span>
<span class="co">#&gt;  2 OTB          2001 mean_la 0.951</span>
<span class="co">#&gt;  3 OTB          2002 mean_la 0.927</span>
<span class="co">#&gt;  4 OTB          2003 mean_la 1.04 </span>
<span class="co">#&gt;  5 OTB          2004 mean_la 0.878</span>
<span class="co">#&gt;  6 OTB          2005 mean_la 0.769</span>
<span class="co">#&gt;  7 OTB          2006 mean_la 0.620</span>
<span class="co">#&gt;  8 OTB          2007 mean_la 0.677</span>
<span class="co">#&gt;  9 OTB          2008 mean_la 0.696</span>
<span class="co">#&gt; 10 OTB          2009 mean_la 0.808</span>
<span class="co">#&gt; 11 OTB          2010 mean_la 0.842</span>
<span class="co">#&gt; 12 OTB          2011 mean_la 0.912</span>
<span class="co">#&gt; 13 OTB          2012 mean_la 0.687</span>
<span class="co">#&gt; 14 OTB          2013 mean_la 0.567</span>
<span class="co">#&gt; 15 OTB          2014 mean_la 0.606</span>
<span class="co">#&gt; 16 OTB          2015 mean_la 0.560</span>
<span class="co">#&gt; 17 OTB          2016 mean_la 0.575</span>
<span class="co">#&gt; 18 OTB          2017 mean_la 0.682</span>
<span class="co">#&gt; 19 OTB          2018 mean_la 0.678</span></pre></body></html></div>
<p>Similarly, the <code><a href="../reference/show_boxplot.html">show_boxplot()</a></code> function provides an assessment of seasonal changes in chlorophyll or light attenuation values by bay segment. The most recent year is highlighted in red by default. This allows a simple evaluation of how the most recent year compared to historical averages. The large exceedance value is shown in blue text and as the dotted line. This corresponds to a “large” magnitude change of +2 standard errors above the bay segment threshold and is the same dotted line shown in <code><a href="../reference/show_thrplot.html">show_thrplot()</a></code>.</p>
<div class="sourceCode" id="cb22"><html><body><pre class="r"><span class="fu"><a href="../reference/show_boxplot.html">show_boxplot</a></span>(<span class="no">epcdata</span>, <span class="kw">param</span> <span class="kw">=</span> <span class="st">'chla'</span>, <span class="kw">bay_segment</span> <span class="kw">=</span> <span class="st">"OTB"</span>)</pre></body></html></div>
<p><img src="intro_files/figure-html/unnamed-chunk-19-1.png" width="768" style="display: block; margin: auto;"></p>
<div class="sourceCode" id="cb23"><html><body><pre class="r"><span class="fu"><a href="../reference/show_boxplot.html">show_boxplot</a></span>(<span class="no">epcdata</span>, <span class="kw">param</span> <span class="kw">=</span> <span class="st">'la'</span>, <span class="kw">bay_segment</span> <span class="kw">=</span> <span class="st">"HB"</span>)</pre></body></html></div>
<p><img src="intro_files/figure-html/unnamed-chunk-19-2.png" width="768" style="display: block; margin: auto;"></p>
<p>A different subset of years and selected year of interest can also be viewed by changing the <code>yrrng</code> and <code>yrsel</code> arguments. Here we show 1980 compared to monthly averages for the last ten years.</p>
<div class="sourceCode" id="cb24"><html><body><pre class="r"><span class="fu"><a href="../reference/show_boxplot.html">show_boxplot</a></span>(<span class="no">epcdata</span>, <span class="kw">param</span> <span class="kw">=</span> <span class="st">'chla'</span>, <span class="kw">bay_segment</span> <span class="kw">=</span> <span class="st">"OTB"</span>, <span class="kw">yrrng</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">2008</span>, <span class="fl">2018</span>), <span class="kw">yrsel</span> <span class="kw">=</span> <span class="fl">1980</span>)</pre></body></html></div>
<p><img src="intro_files/figure-html/unnamed-chunk-20-1.png" width="768" style="display: block; margin: auto;"></p>
<p>The <code><a href="../reference/show_thrplot.html">show_thrplot()</a></code> function is useful to understand annual variation in chlorophyll and light attenuation relative to management targets for each bay segment. The information from these plots can provide an understanding of how the annual reporting outcomes are determined. As noted above, an outcome integer from zero to three is assigned to each bay segment for each annual estimate of chlorophyll and light attenuation. These outcomes are based on both the exceedance of the annual estimate above the threshold or target (blue lines in <code><a href="../reference/show_thrplot.html">show_thrplot()</a></code>) and duration of the exceedance for the years prior. The following graphic describes this logic <span class="citation">[8]</span>.</p>
<div class="figure" style="text-align: center">
<img src="outints.png" alt="Outcomes for annual estimates of water quality are assigned an integer value from zero to three depending on both magnitude and duration of the exceedence." width="80%"><p class="caption">
Outcomes for annual estimates of water quality are assigned an integer value from zero to three depending on both magnitude and duration of the exceedence.
</p>
</div>
<p>These outcomes are assigned for both chlorophyll and light attenuation. The duration criteria are determined based on whether the exceedance was observed for years prior to the current year. The exceedance criteria for chlorophyll and light-attenuation are specific to each segment. The tbeptools package contains a <code>targets</code> data file that is a reference for determining annual outcomes. This file is loaded automatically with the package and can be viewed from the command line.</p>
<div class="sourceCode" id="cb25"><html><body><pre class="r"><span class="no">targets</span>
<span class="co">#&gt;   bay_segment             name chla_target chla_smallex chla_thresh la_target</span>
<span class="co">#&gt; 1         OTB    Old Tampa Bay         8.5          8.9         9.3      0.83</span>
<span class="co">#&gt; 2          HB Hillsborough Bay        13.2         14.1        15.0      1.58</span>
<span class="co">#&gt; 3         MTB Middle Tampa Bay         7.4          7.9         8.5      0.83</span>
<span class="co">#&gt; 4         LTB  Lower Tampa Bay         4.6          4.8         5.1      0.63</span>
<span class="co">#&gt;   la_smallex la_thresh</span>
<span class="co">#&gt; 1       0.86      0.88</span>
<span class="co">#&gt; 2       1.63      1.67</span>
<span class="co">#&gt; 3       0.87      0.91</span>
<span class="co">#&gt; 4       0.66      0.68</span></pre></body></html></div>
<p>The final plotting function is <code><a href="../reference/show_matrix.html">show_matrix()</a></code>, which creates an annual reporting matrix that reflects the combined outcomes for chlorophyll and light attenuation. Tracking the attainment of bay segment specific targets for these indicators provides the framework from which bay management actions are developed and initiated. For each year and segment, a color-coded management action is assigned:</p>
<p><span style="color:#33FF3B; text-shadow: 0 0 3px #333;"><strong>Stay the Course</strong></span>: Continue planned projects. Report data via annual progress reports and Baywide Environmental Monitoring Report.</p>
<p><span style="color:#F9FF33; text-shadow: 0 0 3px #333;"><strong>Caution</strong></span>: Review monitoring data and nitrogen loading estimates. Begin/continue TAC and Management Board development of specific management recommendations.</p>
<p><span style="color:#FF3333; text-shadow: 0 0 3px #333;"><strong>On Alert</strong></span>: Finalize development and implement appropriate management actions to get back on track.</p>
<p>The management category or action is based on the combination of outcomes for chlorophyll and light attenuation <span class="citation">[8]</span>.</p>
<div class="figure" style="text-align: center">
<img src="matrixcats.png" alt="Management action categories assigned to each bay segment and year based on chlorophyll and light attenuation outcomes." width="80%"><p class="caption">
Management action categories assigned to each bay segment and year based on chlorophyll and light attenuation outcomes.
</p>
</div>
<p>The results can be viewed with <code><a href="../reference/show_matrix.html">show_matrix()</a></code>.</p>
<div class="sourceCode" id="cb26"><html><body><pre class="r"><span class="fu"><a href="../reference/show_matrix.html">show_matrix</a></span>(<span class="no">epcdata</span>)</pre></body></html></div>
<p><img src="intro_files/figure-html/unnamed-chunk-24-1.png" width="288" style="display: block; margin: auto;"></p>
<p>The matrix is also a <code>ggplot</code> object and its layout can be changed using <code>ggplot</code> elements. Note the use of <code>txtsz = NULL</code> to remove the color labels.</p>
<div class="sourceCode" id="cb27"><html><body><pre class="r"><span class="fu"><a href="../reference/show_matrix.html">show_matrix</a></span>(<span class="no">epcdata</span>, <span class="kw">txtsz</span> <span class="kw">=</span> <span class="kw">NULL</span>) +
  <span class="fu">scale_y_continuous</span>(<span class="kw">expand</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">0</span>,<span class="fl">0</span>), <span class="kw">breaks</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">1975</span>:<span class="fl">2018</span>)) +
  <span class="fu">coord_flip</span>() +
  <span class="fu">theme</span>(<span class="kw">axis.text.x</span> <span class="kw">=</span> <span class="fu">element_text</span>(<span class="kw">angle</span> <span class="kw">=</span> <span class="fl">45</span>, <span class="kw">hjust</span> <span class="kw">=</span> <span class="fl">1</span>, <span class="kw">size</span> <span class="kw">=</span> <span class="fl">7</span>))</pre></body></html></div>
<p><img src="intro_files/figure-html/unnamed-chunk-25-1.png" width="768" style="display: block; margin: auto;"></p>
<p>If preferred, the matrix can also be returned in an HTML table that can be sorted and scrolled.</p>
<div class="sourceCode" id="cb28"><html><body><pre class="r"><span class="fu"><a href="../reference/show_matrix.html">show_matrix</a></span>(<span class="no">epcdata</span>, <span class="kw">asreact</span> <span class="kw">=</span> <span class="fl">TRUE</span>)</pre></body></html></div>
<div id="htmlwidget-aa792f6e73d6c5ebff37" class="reactable html-widget" style="width:auto;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-aa792f6e73d6c5ebff37">{"x":{"tag":{"name":"Reactable","attribs":{"data":{"yr":[1975,1976,1977,1978,1979,1980,1981,1982,1983,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019],"OTB":["red","red","red","red","red","red","red","red","red","red","red","red","yellow","green","red","yellow","green","green","yellow","yellow","red","yellow","green","red","yellow","green","yellow","yellow","red","red","green","green","green","yellow","yellow","green","red","green","green","green","yellow","yellow","yellow","yellow","yellow"],"HB":["red","red","red","red","red","red","red","red","yellow","green","red","yellow","yellow","green","yellow","green","yellow","green","green","yellow","yellow","green","green","yellow","green","green","green","green","green","green","green","green","green","green","yellow","green","green","green","green","green","green","green","green","green","green"],"MTB":["red","red","red","red","red","red","red","red","red","red","red","yellow","yellow","green","yellow","yellow","green","green","green","yellow","yellow","green","yellow","red","green","green","yellow","green","green","green","green","green","green","green","green","green","yellow","green","green","green","yellow","green","green","green","green"],"LTB":["yellow","red","red","yellow","red","red","red","red","red","yellow","yellow","green","green","green","yellow","green","yellow","yellow","yellow","red","yellow","green","green","red","yellow","yellow","yellow","green","green","yellow","yellow","green","green","yellow","green","green","green","green","green","green","green","green","green","green","green"]},"columns":[{"accessor":"yr","name":"Year","type":"numeric","style":[{"background":null},{"background":null},{"background":null},{"background":null},{"background":null},{"background":null},{"background":null},{"background":null},{"background":null},{"background":null},{"background":null},{"background":null},{"background":null},{"background":null},{"background":null},{"background":null},{"background":null},{"background":null},{"background":null},{"background":null},{"background":null},{"background":null},{"background":null},{"background":null},{"background":null},{"background":null},{"background":null},{"background":null},{"background":null},{"background":null},{"background":null},{"background":null},{"background":null},{"background":null},{"background":null},{"background":null},{"background":null},{"background":null},{"background":null},{"background":null},{"background":null},{"background":null},{"background":null},{"background":null},{"background":null}]},{"accessor":"OTB","name":"OTB","type":"character","style":[{"background":"#FF3333"},{"background":"#FF3333"},{"background":"#FF3333"},{"background":"#FF3333"},{"background":"#FF3333"},{"background":"#FF3333"},{"background":"#FF3333"},{"background":"#FF3333"},{"background":"#FF3333"},{"background":"#FF3333"},{"background":"#FF3333"},{"background":"#FF3333"},{"background":"#F9FF33"},{"background":"#33FF3B"},{"background":"#FF3333"},{"background":"#F9FF33"},{"background":"#33FF3B"},{"background":"#33FF3B"},{"background":"#F9FF33"},{"background":"#F9FF33"},{"background":"#FF3333"},{"background":"#F9FF33"},{"background":"#33FF3B"},{"background":"#FF3333"},{"background":"#F9FF33"},{"background":"#33FF3B"},{"background":"#F9FF33"},{"background":"#F9FF33"},{"background":"#FF3333"},{"background":"#FF3333"},{"background":"#33FF3B"},{"background":"#33FF3B"},{"background":"#33FF3B"},{"background":"#F9FF33"},{"background":"#F9FF33"},{"background":"#33FF3B"},{"background":"#FF3333"},{"background":"#33FF3B"},{"background":"#33FF3B"},{"background":"#33FF3B"},{"background":"#F9FF33"},{"background":"#F9FF33"},{"background":"#F9FF33"},{"background":"#F9FF33"},{"background":"#F9FF33"}]},{"accessor":"HB","name":"HB","type":"character","style":[{"background":"#FF3333"},{"background":"#FF3333"},{"background":"#FF3333"},{"background":"#FF3333"},{"background":"#FF3333"},{"background":"#FF3333"},{"background":"#FF3333"},{"background":"#FF3333"},{"background":"#F9FF33"},{"background":"#33FF3B"},{"background":"#FF3333"},{"background":"#F9FF33"},{"background":"#F9FF33"},{"background":"#33FF3B"},{"background":"#F9FF33"},{"background":"#33FF3B"},{"background":"#F9FF33"},{"background":"#33FF3B"},{"background":"#33FF3B"},{"background":"#F9FF33"},{"background":"#F9FF33"},{"background":"#33FF3B"},{"background":"#33FF3B"},{"background":"#F9FF33"},{"background":"#33FF3B"},{"background":"#33FF3B"},{"background":"#33FF3B"},{"background":"#33FF3B"},{"background":"#33FF3B"},{"background":"#33FF3B"},{"background":"#33FF3B"},{"background":"#33FF3B"},{"background":"#33FF3B"},{"background":"#33FF3B"},{"background":"#F9FF33"},{"background":"#33FF3B"},{"background":"#33FF3B"},{"background":"#33FF3B"},{"background":"#33FF3B"},{"background":"#33FF3B"},{"background":"#33FF3B"},{"background":"#33FF3B"},{"background":"#33FF3B"},{"background":"#33FF3B"},{"background":"#33FF3B"}]},{"accessor":"MTB","name":"MTB","type":"character","style":[{"background":"#FF3333"},{"background":"#FF3333"},{"background":"#FF3333"},{"background":"#FF3333"},{"background":"#FF3333"},{"background":"#FF3333"},{"background":"#FF3333"},{"background":"#FF3333"},{"background":"#FF3333"},{"background":"#FF3333"},{"background":"#FF3333"},{"background":"#F9FF33"},{"background":"#F9FF33"},{"background":"#33FF3B"},{"background":"#F9FF33"},{"background":"#F9FF33"},{"background":"#33FF3B"},{"background":"#33FF3B"},{"background":"#33FF3B"},{"background":"#F9FF33"},{"background":"#F9FF33"},{"background":"#33FF3B"},{"background":"#F9FF33"},{"background":"#FF3333"},{"background":"#33FF3B"},{"background":"#33FF3B"},{"background":"#F9FF33"},{"background":"#33FF3B"},{"background":"#33FF3B"},{"background":"#33FF3B"},{"background":"#33FF3B"},{"background":"#33FF3B"},{"background":"#33FF3B"},{"background":"#33FF3B"},{"background":"#33FF3B"},{"background":"#33FF3B"},{"background":"#F9FF33"},{"background":"#33FF3B"},{"background":"#33FF3B"},{"background":"#33FF3B"},{"background":"#F9FF33"},{"background":"#33FF3B"},{"background":"#33FF3B"},{"background":"#33FF3B"},{"background":"#33FF3B"}]},{"accessor":"LTB","name":"LTB","type":"character","style":[{"background":"#F9FF33"},{"background":"#FF3333"},{"background":"#FF3333"},{"background":"#F9FF33"},{"background":"#FF3333"},{"background":"#FF3333"},{"background":"#FF3333"},{"background":"#FF3333"},{"background":"#FF3333"},{"background":"#F9FF33"},{"background":"#F9FF33"},{"background":"#33FF3B"},{"background":"#33FF3B"},{"background":"#33FF3B"},{"background":"#F9FF33"},{"background":"#33FF3B"},{"background":"#F9FF33"},{"background":"#F9FF33"},{"background":"#F9FF33"},{"background":"#FF3333"},{"background":"#F9FF33"},{"background":"#33FF3B"},{"background":"#33FF3B"},{"background":"#FF3333"},{"background":"#F9FF33"},{"background":"#F9FF33"},{"background":"#F9FF33"},{"background":"#33FF3B"},{"background":"#33FF3B"},{"background":"#F9FF33"},{"background":"#F9FF33"},{"background":"#33FF3B"},{"background":"#33FF3B"},{"background":"#F9FF33"},{"background":"#33FF3B"},{"background":"#33FF3B"},{"background":"#33FF3B"},{"background":"#33FF3B"},{"background":"#33FF3B"},{"background":"#33FF3B"},{"background":"#33FF3B"},{"background":"#33FF3B"},{"background":"#33FF3B"},{"background":"#33FF3B"},{"background":"#33FF3B"}]}],"defaultPageSize":10,"paginationType":"numbers","showPageInfo":true,"minRows":1,"dataKey":"ecae04b363b6dafe76e973365da0e1a9"},"children":[]},"class":"reactR_markup"},"evals":[],"jsHooks":[]}</script><p>Use a sufficiently large number to view the entire matrix.</p>
<div class="sourceCode" id="cb29"><html><body><pre class="r"><span class="fu"><a href="../reference/show_matrix.html">show_matrix</a></span>(<span class="no">epcdata</span>, <span class="kw">asreact</span> <span class="kw">=</span> <span class="fl">TRUE</span>, <span class="kw">nrows</span> <span class="kw">=</span> <span class="fl">200</span>)</pre></body></html></div>
<div id="htmlwidget-12015fee4a6463994f4d" class="reactable html-widget" style="width:auto;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-12015fee4a6463994f4d">{"x":{"tag":{"name":"Reactable","attribs":{"data":{"yr":[1975,1976,1977,1978,1979,1980,1981,1982,1983,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019],"OTB":["red","red","red","red","red","red","red","red","red","red","red","red","yellow","green","red","yellow","green","green","yellow","yellow","red","yellow","green","red","yellow","green","yellow","yellow","red","red","green","green","green","yellow","yellow","green","red","green","green","green","yellow","yellow","yellow","yellow","yellow"],"HB":["red","red","red","red","red","red","red","red","yellow","green","red","yellow","yellow","green","yellow","green","yellow","green","green","yellow","yellow","green","green","yellow","green","green","green","green","green","green","green","green","green","green","yellow","green","green","green","green","green","green","green","green","green","green"],"MTB":["red","red","red","red","red","red","red","red","red","red","red","yellow","yellow","green","yellow","yellow","green","green","green","yellow","yellow","green","yellow","red","green","green","yellow","green","green","green","green","green","green","green","green","green","yellow","green","green","green","yellow","green","green","green","green"],"LTB":["yellow","red","red","yellow","red","red","red","red","red","yellow","yellow","green","green","green","yellow","green","yellow","yellow","yellow","red","yellow","green","green","red","yellow","yellow","yellow","green","green","yellow","yellow","green","green","yellow","green","green","green","green","green","green","green","green","green","green","green"]},"columns":[{"accessor":"yr","name":"Year","type":"numeric","style":[{"background":null},{"background":null},{"background":null},{"background":null},{"background":null},{"background":null},{"background":null},{"background":null},{"background":null},{"background":null},{"background":null},{"background":null},{"background":null},{"background":null},{"background":null},{"background":null},{"background":null},{"background":null},{"background":null},{"background":null},{"background":null},{"background":null},{"background":null},{"background":null},{"background":null},{"background":null},{"background":null},{"background":null},{"background":null},{"background":null},{"background":null},{"background":null},{"background":null},{"background":null},{"background":null},{"background":null},{"background":null},{"background":null},{"background":null},{"background":null},{"background":null},{"background":null},{"background":null},{"background":null},{"background":null}]},{"accessor":"OTB","name":"OTB","type":"character","style":[{"background":"#FF3333"},{"background":"#FF3333"},{"background":"#FF3333"},{"background":"#FF3333"},{"background":"#FF3333"},{"background":"#FF3333"},{"background":"#FF3333"},{"background":"#FF3333"},{"background":"#FF3333"},{"background":"#FF3333"},{"background":"#FF3333"},{"background":"#FF3333"},{"background":"#F9FF33"},{"background":"#33FF3B"},{"background":"#FF3333"},{"background":"#F9FF33"},{"background":"#33FF3B"},{"background":"#33FF3B"},{"background":"#F9FF33"},{"background":"#F9FF33"},{"background":"#FF3333"},{"background":"#F9FF33"},{"background":"#33FF3B"},{"background":"#FF3333"},{"background":"#F9FF33"},{"background":"#33FF3B"},{"background":"#F9FF33"},{"background":"#F9FF33"},{"background":"#FF3333"},{"background":"#FF3333"},{"background":"#33FF3B"},{"background":"#33FF3B"},{"background":"#33FF3B"},{"background":"#F9FF33"},{"background":"#F9FF33"},{"background":"#33FF3B"},{"background":"#FF3333"},{"background":"#33FF3B"},{"background":"#33FF3B"},{"background":"#33FF3B"},{"background":"#F9FF33"},{"background":"#F9FF33"},{"background":"#F9FF33"},{"background":"#F9FF33"},{"background":"#F9FF33"}]},{"accessor":"HB","name":"HB","type":"character","style":[{"background":"#FF3333"},{"background":"#FF3333"},{"background":"#FF3333"},{"background":"#FF3333"},{"background":"#FF3333"},{"background":"#FF3333"},{"background":"#FF3333"},{"background":"#FF3333"},{"background":"#F9FF33"},{"background":"#33FF3B"},{"background":"#FF3333"},{"background":"#F9FF33"},{"background":"#F9FF33"},{"background":"#33FF3B"},{"background":"#F9FF33"},{"background":"#33FF3B"},{"background":"#F9FF33"},{"background":"#33FF3B"},{"background":"#33FF3B"},{"background":"#F9FF33"},{"background":"#F9FF33"},{"background":"#33FF3B"},{"background":"#33FF3B"},{"background":"#F9FF33"},{"background":"#33FF3B"},{"background":"#33FF3B"},{"background":"#33FF3B"},{"background":"#33FF3B"},{"background":"#33FF3B"},{"background":"#33FF3B"},{"background":"#33FF3B"},{"background":"#33FF3B"},{"background":"#33FF3B"},{"background":"#33FF3B"},{"background":"#F9FF33"},{"background":"#33FF3B"},{"background":"#33FF3B"},{"background":"#33FF3B"},{"background":"#33FF3B"},{"background":"#33FF3B"},{"background":"#33FF3B"},{"background":"#33FF3B"},{"background":"#33FF3B"},{"background":"#33FF3B"},{"background":"#33FF3B"}]},{"accessor":"MTB","name":"MTB","type":"character","style":[{"background":"#FF3333"},{"background":"#FF3333"},{"background":"#FF3333"},{"background":"#FF3333"},{"background":"#FF3333"},{"background":"#FF3333"},{"background":"#FF3333"},{"background":"#FF3333"},{"background":"#FF3333"},{"background":"#FF3333"},{"background":"#FF3333"},{"background":"#F9FF33"},{"background":"#F9FF33"},{"background":"#33FF3B"},{"background":"#F9FF33"},{"background":"#F9FF33"},{"background":"#33FF3B"},{"background":"#33FF3B"},{"background":"#33FF3B"},{"background":"#F9FF33"},{"background":"#F9FF33"},{"background":"#33FF3B"},{"background":"#F9FF33"},{"background":"#FF3333"},{"background":"#33FF3B"},{"background":"#33FF3B"},{"background":"#F9FF33"},{"background":"#33FF3B"},{"background":"#33FF3B"},{"background":"#33FF3B"},{"background":"#33FF3B"},{"background":"#33FF3B"},{"background":"#33FF3B"},{"background":"#33FF3B"},{"background":"#33FF3B"},{"background":"#33FF3B"},{"background":"#F9FF33"},{"background":"#33FF3B"},{"background":"#33FF3B"},{"background":"#33FF3B"},{"background":"#F9FF33"},{"background":"#33FF3B"},{"background":"#33FF3B"},{"background":"#33FF3B"},{"background":"#33FF3B"}]},{"accessor":"LTB","name":"LTB","type":"character","style":[{"background":"#F9FF33"},{"background":"#FF3333"},{"background":"#FF3333"},{"background":"#F9FF33"},{"background":"#FF3333"},{"background":"#FF3333"},{"background":"#FF3333"},{"background":"#FF3333"},{"background":"#FF3333"},{"background":"#F9FF33"},{"background":"#F9FF33"},{"background":"#33FF3B"},{"background":"#33FF3B"},{"background":"#33FF3B"},{"background":"#F9FF33"},{"background":"#33FF3B"},{"background":"#F9FF33"},{"background":"#F9FF33"},{"background":"#F9FF33"},{"background":"#FF3333"},{"background":"#F9FF33"},{"background":"#33FF3B"},{"background":"#33FF3B"},{"background":"#FF3333"},{"background":"#F9FF33"},{"background":"#F9FF33"},{"background":"#F9FF33"},{"background":"#33FF3B"},{"background":"#33FF3B"},{"background":"#F9FF33"},{"background":"#F9FF33"},{"background":"#33FF3B"},{"background":"#33FF3B"},{"background":"#F9FF33"},{"background":"#33FF3B"},{"background":"#33FF3B"},{"background":"#33FF3B"},{"background":"#33FF3B"},{"background":"#33FF3B"},{"background":"#33FF3B"},{"background":"#33FF3B"},{"background":"#33FF3B"},{"background":"#33FF3B"},{"background":"#33FF3B"},{"background":"#33FF3B"}]}],"defaultPageSize":200,"paginationType":"numbers","showPageInfo":true,"minRows":1,"dataKey":"ecae04b363b6dafe76e973365da0e1a9"},"children":[]},"class":"reactR_markup"},"evals":[],"jsHooks":[]}</script><p>A plotly (interactive, dynamic plot) can be returned by setting the <code>plotly</code> argument to <code>TRUE</code>.</p>
<div class="sourceCode" id="cb30"><html><body><pre class="r"><span class="fu"><a href="../reference/show_matrix.html">show_matrix</a></span>(<span class="no">epcdata</span>, <span class="kw">plotly</span> <span class="kw">=</span> <span class="fl">TRUE</span>)</pre></body></html></div>
<div id="htmlwidget-460e71ffef8e8547fc7d" style="width:288px;height:768px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-460e71ffef8e8547fc7d">{"x":{"data":[{"x":[1.5,1.5,2.5,2.5,1.5,null,1.5,1.5,2.5,2.5,1.5,null,1.5,1.5,2.5,2.5,1.5,null,1.5,1.5,2.5,2.5,1.5,null,1.5,1.5,2.5,2.5,1.5,null,1.5,1.5,2.5,2.5,1.5,null,1.5,1.5,2.5,2.5,1.5,null,1.5,1.5,2.5,2.5,1.5,null,1.5,1.5,2.5,2.5,1.5,null,1.5,1.5,2.5,2.5,1.5,null,1.5,1.5,2.5,2.5,1.5,null,1.5,1.5,2.5,2.5,1.5,null,1.5,1.5,2.5,2.5,1.5,null,1.5,1.5,2.5,2.5,1.5,null,1.5,1.5,2.5,2.5,1.5,null,1.5,1.5,2.5,2.5,1.5,null,1.5,1.5,2.5,2.5,1.5,null,1.5,1.5,2.5,2.5,1.5,null,1.5,1.5,2.5,2.5,1.5,null,1.5,1.5,2.5,2.5,1.5,null,1.5,1.5,2.5,2.5,1.5,null,1.5,1.5,2.5,2.5,1.5,null,1.5,1.5,2.5,2.5,1.5,null,1.5,1.5,2.5,2.5,1.5,null,1.5,1.5,2.5,2.5,1.5,null,1.5,1.5,2.5,2.5,1.5,null,1.5,1.5,2.5,2.5,1.5,null,3.5,3.5,4.5,4.5,3.5,null,3.5,3.5,4.5,4.5,3.5,null,3.5,3.5,4.5,4.5,3.5,null,3.5,3.5,4.5,4.5,3.5,null,3.5,3.5,4.5,4.5,3.5,null,3.5,3.5,4.5,4.5,3.5,null,3.5,3.5,4.5,4.5,3.5,null,3.5,3.5,4.5,4.5,3.5,null,3.5,3.5,4.5,4.5,3.5,null,3.5,3.5,4.5,4.5,3.5,null,3.5,3.5,4.5,4.5,3.5,null,3.5,3.5,4.5,4.5,3.5,null,3.5,3.5,4.5,4.5,3.5,null,3.5,3.5,4.5,4.5,3.5,null,3.5,3.5,4.5,4.5,3.5,null,3.5,3.5,4.5,4.5,3.5,null,3.5,3.5,4.5,4.5,3.5,null,3.5,3.5,4.5,4.5,3.5,null,3.5,3.5,4.5,4.5,3.5,null,3.5,3.5,4.5,4.5,3.5,null,3.5,3.5,4.5,4.5,3.5,null,2.5,2.5,3.5,3.5,2.5,null,2.5,2.5,3.5,3.5,2.5,null,2.5,2.5,3.5,3.5,2.5,null,2.5,2.5,3.5,3.5,2.5,null,2.5,2.5,3.5,3.5,2.5,null,2.5,2.5,3.5,3.5,2.5,null,2.5,2.5,3.5,3.5,2.5,null,2.5,2.5,3.5,3.5,2.5,null,2.5,2.5,3.5,3.5,2.5,null,2.5,2.5,3.5,3.5,2.5,null,2.5,2.5,3.5,3.5,2.5,null,2.5,2.5,3.5,3.5,2.5,null,2.5,2.5,3.5,3.5,2.5,null,2.5,2.5,3.5,3.5,2.5,null,2.5,2.5,3.5,3.5,2.5,null,2.5,2.5,3.5,3.5,2.5,null,2.5,2.5,3.5,3.5,2.5,null,2.5,2.5,3.5,3.5,2.5,null,2.5,2.5,3.5,3.5,2.5,null,2.5,2.5,3.5,3.5,2.5,null,2.5,2.5,3.5,3.5,2.5,null,2.5,2.5,3.5,3.5,2.5,null,2.5,2.5,3.5,3.5,2.5,null,0.5,0.5,1.5,1.5,0.5,null,0.5,0.5,1.5,1.5,0.5,null,0.5,0.5,1.5,1.5,0.5,null,0.5,0.5,1.5,1.5,0.5,null,0.5,0.5,1.5,1.5,0.5,null,0.5,0.5,1.5,1.5,0.5,null,0.5,0.5,1.5,1.5,0.5,null,0.5,0.5,1.5,1.5,0.5,null,0.5,0.5,1.5,1.5,0.5,null,0.5,0.5,1.5,1.5,0.5,null,0.5,0.5,1.5,1.5,0.5,null,0.5,0.5,1.5,1.5,0.5],"y":[-1984.5,-1983.5,-1983.5,-1984.5,-1984.5,null,-1988.5,-1987.5,-1987.5,-1988.5,-1988.5,null,-1990.5,-1989.5,-1989.5,-1990.5,-1990.5,null,-1992.5,-1991.5,-1991.5,-1992.5,-1992.5,null,-1993.5,-1992.5,-1992.5,-1993.5,-1993.5,null,-1996.5,-1995.5,-1995.5,-1996.5,-1996.5,null,-1997.5,-1996.5,-1996.5,-1997.5,-1997.5,null,-1999.5,-1998.5,-1998.5,-1999.5,-1999.5,null,-2000.5,-1999.5,-1999.5,-2000.5,-2000.5,null,-2001.5,-2000.5,-2000.5,-2001.5,-2001.5,null,-2002.5,-2001.5,-2001.5,-2002.5,-2002.5,null,-2003.5,-2002.5,-2002.5,-2003.5,-2003.5,null,-2004.5,-2003.5,-2003.5,-2004.5,-2004.5,null,-2005.5,-2004.5,-2004.5,-2005.5,-2005.5,null,-2006.5,-2005.5,-2005.5,-2006.5,-2006.5,null,-2007.5,-2006.5,-2006.5,-2007.5,-2007.5,null,-2008.5,-2007.5,-2007.5,-2008.5,-2008.5,null,-2010.5,-2009.5,-2009.5,-2010.5,-2010.5,null,-2011.5,-2010.5,-2010.5,-2011.5,-2011.5,null,-2012.5,-2011.5,-2011.5,-2012.5,-2012.5,null,-2013.5,-2012.5,-2012.5,-2013.5,-2013.5,null,-2014.5,-2013.5,-2013.5,-2014.5,-2014.5,null,-2015.5,-2014.5,-2014.5,-2015.5,-2015.5,null,-2016.5,-2015.5,-2015.5,-2016.5,-2016.5,null,-2017.5,-2016.5,-2016.5,-2017.5,-2017.5,null,-2018.5,-2017.5,-2017.5,-2018.5,-2018.5,null,-2019.5,-2018.5,-2018.5,-2019.5,-2019.5,null,-1986.5,-1985.5,-1985.5,-1986.5,-1986.5,null,-1987.5,-1986.5,-1986.5,-1987.5,-1987.5,null,-1988.5,-1987.5,-1987.5,-1988.5,-1988.5,null,-1990.5,-1989.5,-1989.5,-1990.5,-1990.5,null,-1996.5,-1995.5,-1995.5,-1996.5,-1996.5,null,-1997.5,-1996.5,-1996.5,-1997.5,-1997.5,null,-2002.5,-2001.5,-2001.5,-2002.5,-2002.5,null,-2003.5,-2002.5,-2002.5,-2003.5,-2003.5,null,-2006.5,-2005.5,-2005.5,-2006.5,-2006.5,null,-2007.5,-2006.5,-2006.5,-2007.5,-2007.5,null,-2009.5,-2008.5,-2008.5,-2009.5,-2009.5,null,-2010.5,-2009.5,-2009.5,-2010.5,-2010.5,null,-2011.5,-2010.5,-2010.5,-2011.5,-2011.5,null,-2012.5,-2011.5,-2011.5,-2012.5,-2012.5,null,-2013.5,-2012.5,-2012.5,-2013.5,-2013.5,null,-2014.5,-2013.5,-2013.5,-2014.5,-2014.5,null,-2015.5,-2014.5,-2014.5,-2015.5,-2015.5,null,-2016.5,-2015.5,-2015.5,-2016.5,-2016.5,null,-2017.5,-2016.5,-2016.5,-2017.5,-2017.5,null,-2018.5,-2017.5,-2017.5,-2018.5,-2018.5,null,-2019.5,-2018.5,-2018.5,-2019.5,-2019.5,null,-1988.5,-1987.5,-1987.5,-1988.5,-1988.5,null,-1991.5,-1990.5,-1990.5,-1991.5,-1991.5,null,-1992.5,-1991.5,-1991.5,-1992.5,-1992.5,null,-1993.5,-1992.5,-1992.5,-1993.5,-1993.5,null,-1996.5,-1995.5,-1995.5,-1996.5,-1996.5,null,-1999.5,-1998.5,-1998.5,-1999.5,-1999.5,null,-2000.5,-1999.5,-1999.5,-2000.5,-2000.5,null,-2002.5,-2001.5,-2001.5,-2002.5,-2002.5,null,-2003.5,-2002.5,-2002.5,-2003.5,-2003.5,null,-2004.5,-2003.5,-2003.5,-2004.5,-2004.5,null,-2005.5,-2004.5,-2004.5,-2005.5,-2005.5,null,-2006.5,-2005.5,-2005.5,-2006.5,-2006.5,null,-2007.5,-2006.5,-2006.5,-2007.5,-2007.5,null,-2008.5,-2007.5,-2007.5,-2008.5,-2008.5,null,-2009.5,-2008.5,-2008.5,-2009.5,-2009.5,null,-2010.5,-2009.5,-2009.5,-2010.5,-2010.5,null,-2012.5,-2011.5,-2011.5,-2012.5,-2012.5,null,-2013.5,-2012.5,-2012.5,-2013.5,-2013.5,null,-2014.5,-2013.5,-2013.5,-2014.5,-2014.5,null,-2016.5,-2015.5,-2015.5,-2016.5,-2016.5,null,-2017.5,-2016.5,-2016.5,-2017.5,-2017.5,null,-2018.5,-2017.5,-2017.5,-2018.5,-2018.5,null,-2019.5,-2018.5,-2018.5,-2019.5,-2019.5,null,-1988.5,-1987.5,-1987.5,-1988.5,-1988.5,null,-1991.5,-1990.5,-1990.5,-1991.5,-1991.5,null,-1992.5,-1991.5,-1991.5,-1992.5,-1992.5,null,-1997.5,-1996.5,-1996.5,-1997.5,-1997.5,null,-2000.5,-1999.5,-1999.5,-2000.5,-2000.5,null,-2005.5,-2004.5,-2004.5,-2005.5,-2005.5,null,-2006.5,-2005.5,-2005.5,-2006.5,-2006.5,null,-2007.5,-2006.5,-2006.5,-2007.5,-2007.5,null,-2010.5,-2009.5,-2009.5,-2010.5,-2010.5,null,-2012.5,-2011.5,-2011.5,-2012.5,-2012.5,null,-2013.5,-2012.5,-2012.5,-2013.5,-2013.5,null,-2014.5,-2013.5,-2013.5,-2014.5,-2014.5],"text":"Action: Stay the Course (chla: 0, la: 0)","type":"scatter","mode":"lines","line":{"width":0.377952755905512,"color":"rgba(0,0,0,1)","dash":"solid"},"fill":"toself","fillcolor":"rgba(0,255,0,1)","hoveron":"fills","name":"green","legendgroup":"green","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[1.5,1.5,2.5,2.5,1.5,null,3.5,3.5,4.5,4.5,3.5,null,3.5,3.5,4.5,4.5,3.5,null,3.5,3.5,4.5,4.5,3.5,null,2.5,2.5,3.5,3.5,2.5,null,0.5,0.5,1.5,1.5,0.5,null,0.5,0.5,1.5,1.5,0.5,null,0.5,0.5,1.5,1.5,0.5,null,0.5,0.5,1.5,1.5,0.5],"y":[-1985.5,-1984.5,-1984.5,-1985.5,-1985.5,null,-1976.5,-1975.5,-1975.5,-1976.5,-1976.5,null,-1977.5,-1976.5,-1976.5,-1977.5,-1977.5,null,-1998.5,-1997.5,-1997.5,-1998.5,-1998.5,null,-1998.5,-1997.5,-1997.5,-1998.5,-1998.5,null,-1995.5,-1994.5,-1994.5,-1995.5,-1995.5,null,-2003.5,-2002.5,-2002.5,-2003.5,-2003.5,null,-2004.5,-2003.5,-2003.5,-2004.5,-2004.5,null,-2011.5,-2010.5,-2010.5,-2011.5,-2011.5],"text":"Action: On Alert (chla: 2, la: 2)","type":"scatter","mode":"lines","line":{"width":0.377952755905512,"color":"rgba(0,0,0,1)","dash":"solid"},"fill":"toself","fillcolor":"rgba(255,0,0,1)","hoveron":"fills","name":"red","legendgroup":"red","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[3.5,3.5,4.5,4.5,3.5,null,0.5,0.5,1.5,1.5,0.5,null,0.5,0.5,1.5,1.5,0.5,null,0.5,0.5,1.5,1.5,0.5],"y":[-1994.5,-1993.5,-1993.5,-1994.5,-1994.5,null,-1984.5,-1983.5,-1983.5,-1984.5,-1984.5,null,-1989.5,-1988.5,-1988.5,-1989.5,-1989.5,null,-1998.5,-1997.5,-1997.5,-1998.5,-1998.5],"text":"Action: On Alert (chla: 2, la: 3)","type":"scatter","mode":"lines","line":{"width":0.377952755905512,"color":"rgba(0,0,0,1)","dash":"solid"},"fill":"toself","fillcolor":"rgba(255,0,0,1)","hoveron":"fills","name":"red","legendgroup":"red","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[2.5,2.5,3.5,3.5,2.5,null,2.5,2.5,3.5,3.5,2.5],"y":[-1975.5,-1974.5,-1974.5,-1975.5,-1975.5,null,-1976.5,-1975.5,-1975.5,-1976.5,-1976.5],"text":"Action: On Alert (chla: 3, la: 1)","type":"scatter","mode":"lines","line":{"width":0.377952755905512,"color":"rgba(0,0,0,1)","dash":"solid"},"fill":"toself","fillcolor":"rgba(255,0,0,1)","hoveron":"fills","name":"red","legendgroup":"red","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[1.5,1.5,2.5,2.5,1.5,null,1.5,1.5,2.5,2.5,1.5,null,1.5,1.5,2.5,2.5,1.5,null,2.5,2.5,3.5,3.5,2.5,null,0.5,0.5,1.5,1.5,0.5],"y":[-1975.5,-1974.5,-1974.5,-1975.5,-1975.5,null,-1976.5,-1975.5,-1975.5,-1976.5,-1976.5,null,-1977.5,-1976.5,-1976.5,-1977.5,-1977.5,null,-1977.5,-1976.5,-1976.5,-1977.5,-1977.5,null,-1975.5,-1974.5,-1974.5,-1975.5,-1975.5],"text":"Action: On Alert (chla: 3, la: 2)","type":"scatter","mode":"lines","line":{"width":0.377952755905512,"color":"rgba(0,0,0,1)","dash":"solid"},"fill":"toself","fillcolor":"rgba(255,0,0,1)","hoveron":"fills","name":"red","legendgroup":"red","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[1.5,1.5,2.5,2.5,1.5,null,1.5,1.5,2.5,2.5,1.5,null,1.5,1.5,2.5,2.5,1.5,null,1.5,1.5,2.5,2.5,1.5,null,1.5,1.5,2.5,2.5,1.5,null,3.5,3.5,4.5,4.5,3.5,null,3.5,3.5,4.5,4.5,3.5,null,3.5,3.5,4.5,4.5,3.5,null,3.5,3.5,4.5,4.5,3.5,null,3.5,3.5,4.5,4.5,3.5,null,2.5,2.5,3.5,3.5,2.5,null,2.5,2.5,3.5,3.5,2.5,null,2.5,2.5,3.5,3.5,2.5,null,2.5,2.5,3.5,3.5,2.5,null,2.5,2.5,3.5,3.5,2.5,null,2.5,2.5,3.5,3.5,2.5,null,2.5,2.5,3.5,3.5,2.5,null,2.5,2.5,3.5,3.5,2.5,null,0.5,0.5,1.5,1.5,0.5,null,0.5,0.5,1.5,1.5,0.5,null,0.5,0.5,1.5,1.5,0.5,null,0.5,0.5,1.5,1.5,0.5,null,0.5,0.5,1.5,1.5,0.5,null,0.5,0.5,1.5,1.5,0.5,null,0.5,0.5,1.5,1.5,0.5,null,0.5,0.5,1.5,1.5,0.5,null,0.5,0.5,1.5,1.5,0.5,null,0.5,0.5,1.5,1.5,0.5],"y":[-1978.5,-1977.5,-1977.5,-1978.5,-1978.5,null,-1979.5,-1978.5,-1978.5,-1979.5,-1979.5,null,-1980.5,-1979.5,-1979.5,-1980.5,-1980.5,null,-1981.5,-1980.5,-1980.5,-1981.5,-1981.5,null,-1982.5,-1981.5,-1981.5,-1982.5,-1982.5,null,-1979.5,-1978.5,-1978.5,-1979.5,-1979.5,null,-1980.5,-1979.5,-1979.5,-1980.5,-1980.5,null,-1981.5,-1980.5,-1980.5,-1981.5,-1981.5,null,-1982.5,-1981.5,-1981.5,-1982.5,-1982.5,null,-1983.5,-1982.5,-1982.5,-1983.5,-1983.5,null,-1978.5,-1977.5,-1977.5,-1978.5,-1978.5,null,-1979.5,-1978.5,-1978.5,-1979.5,-1979.5,null,-1980.5,-1979.5,-1979.5,-1980.5,-1980.5,null,-1981.5,-1980.5,-1980.5,-1981.5,-1981.5,null,-1982.5,-1981.5,-1981.5,-1982.5,-1982.5,null,-1983.5,-1982.5,-1982.5,-1983.5,-1983.5,null,-1984.5,-1983.5,-1983.5,-1984.5,-1984.5,null,-1985.5,-1984.5,-1984.5,-1985.5,-1985.5,null,-1976.5,-1975.5,-1975.5,-1976.5,-1976.5,null,-1977.5,-1976.5,-1976.5,-1977.5,-1977.5,null,-1978.5,-1977.5,-1977.5,-1978.5,-1978.5,null,-1979.5,-1978.5,-1978.5,-1979.5,-1979.5,null,-1980.5,-1979.5,-1979.5,-1980.5,-1980.5,null,-1981.5,-1980.5,-1980.5,-1981.5,-1981.5,null,-1982.5,-1981.5,-1981.5,-1982.5,-1982.5,null,-1983.5,-1982.5,-1982.5,-1983.5,-1983.5,null,-1985.5,-1984.5,-1984.5,-1985.5,-1985.5,null,-1986.5,-1985.5,-1985.5,-1986.5,-1986.5],"text":"Action: On Alert (chla: 3, la: 3)","type":"scatter","mode":"lines","line":{"width":0.377952755905512,"color":"rgba(0,0,0,1)","dash":"solid"},"fill":"toself","fillcolor":"rgba(255,0,0,1)","hoveron":"fills","name":"red","legendgroup":"red","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[3.5,3.5,4.5,4.5,3.5,null,3.5,3.5,4.5,4.5,3.5,null,2.5,2.5,3.5,3.5,2.5],"y":[-1991.5,-1990.5,-1990.5,-1991.5,-1991.5,null,-2008.5,-2007.5,-2007.5,-2008.5,-2008.5,null,-2001.5,-2000.5,-2000.5,-2001.5,-2001.5],"text":"Action: Caution (chla: 0, la: 1)","type":"scatter","mode":"lines","line":{"width":0.377952755905512,"color":"rgba(0,0,0,1)","dash":"solid"},"fill":"toself","fillcolor":"rgba(255,255,0,1)","hoveron":"fills","name":"yellow","legendgroup":"yellow","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[3.5,3.5,4.5,4.5,3.5,null,3.5,3.5,4.5,4.5,3.5,null,3.5,3.5,4.5,4.5,3.5,null,3.5,3.5,4.5,4.5,3.5,null,0.5,0.5,1.5,1.5,0.5,null,0.5,0.5,1.5,1.5,0.5,null,0.5,0.5,1.5,1.5,0.5,null,0.5,0.5,1.5,1.5,0.5],"y":[-1978.5,-1977.5,-1977.5,-1978.5,-1978.5,null,-1985.5,-1984.5,-1984.5,-1985.5,-1985.5,null,-1992.5,-1991.5,-1991.5,-1992.5,-1992.5,null,-1999.5,-1998.5,-1998.5,-1999.5,-1999.5,null,-1993.5,-1992.5,-1992.5,-1993.5,-1993.5,null,-1996.5,-1995.5,-1995.5,-1996.5,-1996.5,null,-2001.5,-2000.5,-2000.5,-2001.5,-2001.5,null,-2002.5,-2001.5,-2001.5,-2002.5,-2002.5],"text":"Action: Caution (chla: 0, la: 2)","type":"scatter","mode":"lines","line":{"width":0.377952755905512,"color":"rgba(0,0,0,1)","dash":"solid"},"fill":"toself","fillcolor":"rgba(255,255,0,1)","hoveron":"fills","name":"yellow","legendgroup":"yellow","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[3.5,3.5,4.5,4.5,3.5,null,3.5,3.5,4.5,4.5,3.5,null,3.5,3.5,4.5,4.5,3.5,null,3.5,3.5,4.5,4.5,3.5,null,3.5,3.5,4.5,4.5,3.5,null,0.5,0.5,1.5,1.5,0.5],"y":[-1984.5,-1983.5,-1983.5,-1984.5,-1984.5,null,-1993.5,-1992.5,-1992.5,-1993.5,-1993.5,null,-1995.5,-1994.5,-1994.5,-1995.5,-1995.5,null,-2000.5,-1999.5,-1999.5,-2000.5,-2000.5,null,-2001.5,-2000.5,-2000.5,-2001.5,-2001.5,null,-1999.5,-1998.5,-1998.5,-1999.5,-1999.5],"text":"Action: Caution (chla: 0, la: 3)","type":"scatter","mode":"lines","line":{"width":0.377952755905512,"color":"rgba(0,0,0,1)","dash":"solid"},"fill":"toself","fillcolor":"rgba(255,255,0,1)","hoveron":"fills","name":"yellow","legendgroup":"yellow","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[1.5,1.5,2.5,2.5,1.5,null,1.5,1.5,2.5,2.5,1.5,null,1.5,1.5,2.5,2.5,1.5,null,1.5,1.5,2.5,2.5,1.5,null,2.5,2.5,3.5,3.5,2.5,null,2.5,2.5,3.5,3.5,2.5,null,0.5,0.5,1.5,1.5,0.5,null,0.5,0.5,1.5,1.5,0.5],"y":[-1987.5,-1986.5,-1986.5,-1987.5,-1987.5,null,-1989.5,-1988.5,-1988.5,-1989.5,-1989.5,null,-1991.5,-1990.5,-1990.5,-1991.5,-1991.5,null,-2009.5,-2008.5,-2008.5,-2009.5,-2009.5,null,-2011.5,-2010.5,-2010.5,-2011.5,-2011.5,null,-2015.5,-2014.5,-2014.5,-2015.5,-2015.5,null,-2008.5,-2007.5,-2007.5,-2008.5,-2008.5,null,-2016.5,-2015.5,-2015.5,-2016.5,-2016.5],"text":"Action: Caution (chla: 1, la: 0)","type":"scatter","mode":"lines","line":{"width":0.377952755905512,"color":"rgba(0,0,0,1)","dash":"solid"},"fill":"toself","fillcolor":"rgba(255,255,0,1)","hoveron":"fills","name":"yellow","legendgroup":"yellow","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[3.5,3.5,4.5,4.5,3.5,null,2.5,2.5,3.5,3.5,2.5],"y":[-2004.5,-2003.5,-2003.5,-2004.5,-2004.5,null,-1997.5,-1996.5,-1996.5,-1997.5,-1997.5],"text":"Action: Caution (chla: 1, la: 1)","type":"scatter","mode":"lines","line":{"width":0.377952755905512,"color":"rgba(0,0,0,1)","dash":"solid"},"fill":"toself","fillcolor":"rgba(255,255,0,1)","hoveron":"fills","name":"yellow","legendgroup":"yellow","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[3.5,3.5,4.5,4.5,3.5],"y":[-1989.5,-1988.5,-1988.5,-1989.5,-1989.5],"text":"Action: Caution (chla: 1, la: 2)","type":"scatter","mode":"lines","line":{"width":0.377952755905512,"color":"rgba(0,0,0,1)","dash":"solid"},"fill":"toself","fillcolor":"rgba(255,255,0,1)","hoveron":"fills","name":"yellow","legendgroup":"yellow","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[1.5,1.5,2.5,2.5,1.5,null,1.5,1.5,2.5,2.5,1.5,null,1.5,1.5,2.5,2.5,1.5,null,1.5,1.5,2.5,2.5,1.5,null,3.5,3.5,4.5,4.5,3.5,null,3.5,3.5,4.5,4.5,3.5,null,2.5,2.5,3.5,3.5,2.5,null,2.5,2.5,3.5,3.5,2.5,null,2.5,2.5,3.5,3.5,2.5,null,2.5,2.5,3.5,3.5,2.5,null,2.5,2.5,3.5,3.5,2.5,null,0.5,0.5,1.5,1.5,0.5,null,0.5,0.5,1.5,1.5,0.5,null,0.5,0.5,1.5,1.5,0.5,null,0.5,0.5,1.5,1.5,0.5,null,0.5,0.5,1.5,1.5,0.5,null,0.5,0.5,1.5,1.5,0.5],"y":[-1986.5,-1985.5,-1985.5,-1986.5,-1986.5,null,-1994.5,-1993.5,-1993.5,-1994.5,-1994.5,null,-1995.5,-1994.5,-1994.5,-1995.5,-1995.5,null,-1998.5,-1997.5,-1997.5,-1998.5,-1998.5,null,-1975.5,-1974.5,-1974.5,-1975.5,-1975.5,null,-2005.5,-2004.5,-2004.5,-2005.5,-2005.5,null,-1986.5,-1985.5,-1985.5,-1986.5,-1986.5,null,-1989.5,-1988.5,-1988.5,-1989.5,-1989.5,null,-1990.5,-1989.5,-1989.5,-1990.5,-1990.5,null,-1994.5,-1993.5,-1993.5,-1994.5,-1994.5,null,-1995.5,-1994.5,-1994.5,-1995.5,-1995.5,null,-1990.5,-1989.5,-1989.5,-1990.5,-1990.5,null,-1994.5,-1993.5,-1993.5,-1994.5,-1994.5,null,-2009.5,-2008.5,-2008.5,-2009.5,-2009.5,null,-2015.5,-2014.5,-2014.5,-2015.5,-2015.5,null,-2017.5,-2016.5,-2016.5,-2017.5,-2017.5,null,-2018.5,-2017.5,-2017.5,-2018.5,-2018.5],"text":"Action: Caution (chla: 2, la: 0)","type":"scatter","mode":"lines","line":{"width":0.377952755905512,"color":"rgba(0,0,0,1)","dash":"solid"},"fill":"toself","fillcolor":"rgba(255,255,0,1)","hoveron":"fills","name":"yellow","legendgroup":"yellow","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[1.5,1.5,2.5,2.5,1.5,null,2.5,2.5,3.5,3.5,2.5,null,0.5,0.5,1.5,1.5,0.5,null,0.5,0.5,1.5,1.5,0.5],"y":[-1983.5,-1982.5,-1982.5,-1983.5,-1983.5,null,-1987.5,-1986.5,-1986.5,-1987.5,-1987.5,null,-1987.5,-1986.5,-1986.5,-1987.5,-1987.5,null,-2019.5,-2018.5,-2018.5,-2019.5,-2019.5],"text":"Action: Caution (chla: 3, la: 0)","type":"scatter","mode":"lines","line":{"width":0.377952755905512,"color":"rgba(0,0,0,1)","dash":"solid"},"fill":"toself","fillcolor":"rgba(255,255,0,1)","hoveron":"fills","name":"yellow","legendgroup":"yellow","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,1,1,1,1,1,1,1,1,1,1,1,1],"y":[-1984,-1988,-1990,-1992,-1993,-1996,-1997,-1999,-2000,-2001,-2002,-2003,-2004,-2005,-2006,-2007,-2008,-2010,-2011,-2012,-2013,-2014,-2015,-2016,-2017,-2018,-2019,-1986,-1987,-1988,-1990,-1996,-1997,-2002,-2003,-2006,-2007,-2009,-2010,-2011,-2012,-2013,-2014,-2015,-2016,-2017,-2018,-2019,-1988,-1991,-1992,-1993,-1996,-1999,-2000,-2002,-2003,-2004,-2005,-2006,-2007,-2008,-2009,-2010,-2012,-2013,-2014,-2016,-2017,-2018,-2019,-1988,-1991,-1992,-1997,-2000,-2005,-2006,-2007,-2010,-2012,-2013,-2014],"text":["green","green","green","green","green","green","green","green","green","green","green","green","green","green","green","green","green","green","green","green","green","green","green","green","green","green","green","green","green","green","green","green","green","green","green","green","green","green","green","green","green","green","green","green","green","green","green","green","green","green","green","green","green","green","green","green","green","green","green","green","green","green","green","green","green","green","green","green","green","green","green","green","green","green","green","green","green","green","green","green","green","green","green"],"hovertext":["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],"textfont":{"size":11.3385826771654,"color":"rgba(0,0,0,1)"},"type":"scatter","mode":"text","hoveron":"points","name":"green","legendgroup":"green","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[2,2,2,2,2,2,2,2,2,4,4,4,4,4,4,4,4,4,3,3,3,3,3,3,3,3,3,3,3,3,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],"y":[-1975,-1976,-1977,-1978,-1979,-1980,-1981,-1982,-1985,-1976,-1977,-1979,-1980,-1981,-1982,-1983,-1994,-1998,-1975,-1976,-1977,-1978,-1979,-1980,-1981,-1982,-1983,-1984,-1985,-1998,-1975,-1976,-1977,-1978,-1979,-1980,-1981,-1982,-1983,-1984,-1985,-1986,-1989,-1995,-1998,-2003,-2004,-2011],"text":["red","red","red","red","red","red","red","red","red","red","red","red","red","red","red","red","red","red","red","red","red","red","red","red","red","red","red","red","red","red","red","red","red","red","red","red","red","red","red","red","red","red","red","red","red","red","red","red"],"hovertext":["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],"textfont":{"size":11.3385826771654,"color":"rgba(0,0,0,1)"},"type":"scatter","mode":"text","hoveron":"points","name":"red","legendgroup":"red","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[2,2,2,2,2,2,2,2,2,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,3,3,3,3,3,3,3,3,3,3,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],"y":[-1983,-1986,-1987,-1989,-1991,-1994,-1995,-1998,-2009,-1975,-1978,-1984,-1985,-1989,-1991,-1992,-1993,-1995,-1999,-2000,-2001,-2004,-2005,-2008,-1986,-1987,-1989,-1990,-1994,-1995,-1997,-2001,-2011,-2015,-1987,-1990,-1993,-1994,-1996,-1999,-2001,-2002,-2008,-2009,-2015,-2016,-2017,-2018,-2019],"text":["yellow","yellow","yellow","yellow","yellow","yellow","yellow","yellow","yellow","yellow","yellow","yellow","yellow","yellow","yellow","yellow","yellow","yellow","yellow","yellow","yellow","yellow","yellow","yellow","yellow","yellow","yellow","yellow","yellow","yellow","yellow","yellow","yellow","yellow","yellow","yellow","yellow","yellow","yellow","yellow","yellow","yellow","yellow","yellow","yellow","yellow","yellow","yellow","yellow"],"hovertext":["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],"textfont":{"size":11.3385826771654,"color":"rgba(0,0,0,1)"},"type":"scatter","mode":"text","hoveron":"points","name":"yellow","legendgroup":"yellow","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":["OTB","HB","MTB","LTB"],"y":[1,2,3,4],"type":"bar","xaxis":"x2","marker":{"color":"rgba(31,119,180,1)","line":{"color":"rgba(31,119,180,1)"}},"error_y":{"color":"rgba(31,119,180,1)"},"error_x":{"color":"rgba(31,119,180,1)"},"yaxis":"y","frame":null}],"layout":{"margin":{"t":18.7397260273973,"r":7.30593607305936,"b":6.39269406392694,"l":42.8393524283935},"plot_bgcolor":"rgba(255,255,255,1)","paper_bgcolor":"rgba(255,255,255,1)","font":{"color":"rgba(0,0,0,1)","family":null,"size":14.6118721461187},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[0.5,4.5],"tickmode":"array","ticktext":["OTB","HB","MTB","LTB"],"tickvals":[1,2,3,4],"categoryorder":"array","categoryarray":["OTB","HB","MTB","LTB"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.65296803652968,"tickwidth":0,"showticklabels":false,"tickfont":{"color":null,"family":null,"size":0},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(235,235,235,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"y","title":{"text":"","font":{"color":null,"family":null,"size":0}},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[-2019.5,-1974.5],"tickmode":"array","ticktext":["1975","1976","1977","1978","1979","1980","1981","1982","1983","1984","1985","1986","1987","1988","1989","1990","1991","1992","1993","1994","1995","1996","1997","1998","1999","2000","2001","2002","2003","2004","2005","2006","2007","2008","2009","2010","2011","2012","2013","2014","2015","2016","2017","2018","2019","1975","1976","1977","1978","1979","1980","1981","1982","1983","1984","1985","1986","1987","1988","1989","1990","1991","1992","1993","1994","1995","1996","1997","1998","1999","2000","2001","2002","2003","2004","2005","2006","2007","2008","2009","2010","2011","2012","2013","2014","2015","2016","2017","2018","2019","1975","1976","1977","1978","1979","1980","1981","1982","1983","1984","1985","1986","1987","1988","1989","1990","1991","1992","1993","1994","1995","1996","1997","1998","1999","2000","2001","2002","2003","2004","2005","2006","2007","2008","2009","2010","2011","2012","2013","2014","2015","2016","2017","2018","2019","1975","1976","1977","1978","1979","1980","1981","1982","1983","1984","1985","1986","1987","1988","1989","1990","1991","1992","1993","1994","1995","1996","1997","1998","1999","2000","2001","2002","2003","2004","2005","2006","2007","2008","2009","2010","2011","2012","2013","2014","2015","2016","2017","2018","2019"],"tickvals":[-1975,-1976,-1977,-1978,-1979,-1980,-1981,-1982,-1983,-1984,-1985,-1986,-1987,-1988,-1989,-1990,-1991,-1992,-1993,-1994,-1995,-1996,-1997,-1998,-1999,-2000,-2001,-2002,-2003,-2004,-2005,-2006,-2007,-2008,-2009,-2010,-2011,-2012,-2013,-2014,-2015,-2016,-2017,-2018,-2019,-1975,-1976,-1977,-1978,-1979,-1980,-1981,-1982,-1983,-1984,-1985,-1986,-1987,-1988,-1989,-1990,-1991,-1992,-1993,-1994,-1995,-1996,-1997,-1998,-1999,-2000,-2001,-2002,-2003,-2004,-2005,-2006,-2007,-2008,-2009,-2010,-2011,-2012,-2013,-2014,-2015,-2016,-2017,-2018,-2019,-1975,-1976,-1977,-1978,-1979,-1980,-1981,-1982,-1983,-1984,-1985,-1986,-1987,-1988,-1989,-1990,-1991,-1992,-1993,-1994,-1995,-1996,-1997,-1998,-1999,-2000,-2001,-2002,-2003,-2004,-2005,-2006,-2007,-2008,-2009,-2010,-2011,-2012,-2013,-2014,-2015,-2016,-2017,-2018,-2019,-1975,-1976,-1977,-1978,-1979,-1980,-1981,-1982,-1983,-1984,-1985,-1986,-1987,-1988,-1989,-1990,-1991,-1992,-1993,-1994,-1995,-1996,-1997,-1998,-1999,-2000,-2001,-2002,-2003,-2004,-2005,-2006,-2007,-2008,-2009,-2010,-2011,-2012,-2013,-2014,-2015,-2016,-2017,-2018,-2019],"categoryorder":"array","categoryarray":["1975","1976","1977","1978","1979","1980","1981","1982","1983","1984","1985","1986","1987","1988","1989","1990","1991","1992","1993","1994","1995","1996","1997","1998","1999","2000","2001","2002","2003","2004","2005","2006","2007","2008","2009","2010","2011","2012","2013","2014","2015","2016","2017","2018","2019","1975","1976","1977","1978","1979","1980","1981","1982","1983","1984","1985","1986","1987","1988","1989","1990","1991","1992","1993","1994","1995","1996","1997","1998","1999","2000","2001","2002","2003","2004","2005","2006","2007","2008","2009","2010","2011","2012","2013","2014","2015","2016","2017","2018","2019","1975","1976","1977","1978","1979","1980","1981","1982","1983","1984","1985","1986","1987","1988","1989","1990","1991","1992","1993","1994","1995","1996","1997","1998","1999","2000","2001","2002","2003","2004","2005","2006","2007","2008","2009","2010","2011","2012","2013","2014","2015","2016","2017","2018","2019","1975","1976","1977","1978","1979","1980","1981","1982","1983","1984","1985","1986","1987","1988","1989","1990","1991","1992","1993","1994","1995","1996","1997","1998","1999","2000","2001","2002","2003","2004","2005","2006","2007","2008","2009","2010","2011","2012","2013","2014","2015","2016","2017","2018","2019"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":null,"size":15.9402241594022},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(235,235,235,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"x","title":{"text":"","font":{"color":null,"family":null,"size":0}},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":"transparent","line":{"color":"rgba(51,51,51,1)","width":0.66417600664176,"linetype":"solid"},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":false,"legend":{"bgcolor":"rgba(255,255,255,1)","bordercolor":"transparent","borderwidth":1.88976377952756,"font":{"color":"rgba(0,0,0,1)","family":null,"size":11.689497716895}},"hovermode":"closest","barmode":"relative","xaxis2":{"tickfont":{"size":14},"overlaying":"x","nticks":4,"side":"top","type":"category","categoryorder":"array","categoryarray":["OTB","HB","MTB","LTB"]}},"config":{"doubleClick":"reset","showSendToCloud":false,"displayModeBar":false},"source":"A","attrs":{"49a83ba343a4":{"x":{},"y":{},"fill":{},"type":"scatter"},"49a8f24612f":{"label":{},"x":{},"y":{},"fill":{}},"49a83ba343a4.1":{"x":["OTB","HB","MTB","LTB"],"y":[1,2,3,4],"type":"bar","xaxis":"x2","inherit":false}},"cur_data":"49a83ba343a4","visdat":{"49a83ba343a4":["function (y) ","x"],"49a8f24612f":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script><p>Results can also be obtained for a selected year. Outcomes can be returned in tabular format with <code><a href="../reference/anlz_yrattain.html">anlz_yrattain()</a></code>. This table also shows segment averages for chlorophyll and light attenuation, including the associated targets.</p>
<div class="sourceCode" id="cb31"><html><body><pre class="r"><span class="fu"><a href="../reference/anlz_yrattain.html">anlz_yrattain</a></span>(<span class="no">epcdata</span>, <span class="kw">yrsel</span> <span class="kw">=</span> <span class="fl">2018</span>)
<span class="co">#&gt; # A tibble: 4 x 6</span>
<span class="co">#&gt;   bay_segment chla_val chla_target la_val la_target outcome</span>
<span class="co">#&gt;   &lt;fct&gt;          &lt;dbl&gt;       &lt;dbl&gt;  &lt;dbl&gt;     &lt;dbl&gt; &lt;chr&gt;  </span>
<span class="co">#&gt; 1 OTB             9.22         8.5  0.678      0.83 yellow </span>
<span class="co">#&gt; 2 HB             13.9         13.2  1.09       1.58 green  </span>
<span class="co">#&gt; 3 MTB             7.05         7.4  0.570      0.83 green  </span>
<span class="co">#&gt; 4 LTB             4.65         4.6  0.593      0.63 green</span></pre></body></html></div>
<p>A map showing if individual sites achieved chlorophyll targets can be obtained with <code><a href="../reference/show_sitemap.html">show_sitemap()</a></code>. The station averages for chlorophyll for the selected year are shown next to each point. Stations in red failed to meet the segment target.</p>
<div class="sourceCode" id="cb32"><html><body><pre class="r"><span class="fu"><a href="../reference/show_sitemap.html">show_sitemap</a></span>(<span class="no">epcdata</span>, <span class="kw">yrsel</span> <span class="kw">=</span> <span class="fl">2018</span>)</pre></body></html></div>
<p><img src="intro_files/figure-html/unnamed-chunk-30-1.png" width="480" style="display: block; margin: auto;"></p>
<p>Bay segment exceedances can also be viewed in a matrix using <code><a href="../reference/show_wqmatrix.html">show_wqmatrix()</a></code>. The thresholds for these values correspond to the Florida DEP criteria (or a large exceedance defined as +2 standard errors above the segment target).</p>
<div class="sourceCode" id="cb33"><html><body><pre class="r"><span class="fu"><a href="../reference/show_wqmatrix.html">show_wqmatrix</a></span>(<span class="no">epcdata</span>)</pre></body></html></div>
<p><img src="intro_files/figure-html/unnamed-chunk-31-1.png" width="288" style="display: block; margin: auto;"></p>
<p>By default, the <code><a href="../reference/show_wqmatrix.html">show_wqmatrix()</a></code> function returns chlorophyll exceedances by segment. Light attenuation exceedances can be viewed by changing the <code>param</code> argument.</p>
<div class="sourceCode" id="cb34"><html><body><pre class="r"><span class="fu"><a href="../reference/show_wqmatrix.html">show_wqmatrix</a></span>(<span class="no">epcdata</span>, <span class="kw">param</span> <span class="kw">=</span> <span class="st">'la'</span>)</pre></body></html></div>
<p><img src="intro_files/figure-html/unnamed-chunk-32-1.png" width="288" style="display: block; margin: auto;"></p>
<p>The results from <code><a href="../reference/show_matrix.html">show_matrix()</a></code> and <code><a href="../reference/show_wqmatrix.html">show_wqmatrix()</a></code> can be combined for an individual segment using the <code><a href="../reference/show_segmatrix.html">show_segmatrix()</a></code> function. This is useful to understand which water quality parameter is driving the management outcome for a given year. The plot shows the light attenuation and chlorophyll outcomes from <code><a href="../reference/show_wqmatrix.html">show_wqmatrix()</a></code> next to the segment management outcomes from <code><a href="../reference/show_matrix.html">show_matrix()</a></code>. Only one segment can be plotted for each function call.</p>
<div class="sourceCode" id="cb35"><html><body><pre class="r"><span class="fu"><a href="../reference/show_segmatrix.html">show_segmatrix</a></span>(<span class="no">epcdata</span>, <span class="kw">bay_segment</span> <span class="kw">=</span> <span class="st">'OTB'</span>)</pre></body></html></div>
<p><img src="intro_files/figure-html/unnamed-chunk-33-1.png" width="240" style="display: block; margin: auto;"></p>
<p>Finally, all segment plots can be shown together using the <code><a href="../reference/show_segplotly.html">show_segplotly()</a></code> function that combines chlorophyll and secchi data for a given segment. This function combines outputs from <code><a href="../reference/show_thrplot.html">show_thrplot()</a></code> and <code><a href="../reference/show_segmatrix.html">show_segmatrix()</a></code>. The final plot is interactive and can be zoomed by dragging the mouse pointer over a section of the plot. Information about each cell or value can be seen by hovering over a location in the plot. Please note that the scaling here is horrible, but this can be changed when creating the plot on your own.</p>
<div class="sourceCode" id="cb36"><html><body><pre class="r"><span class="fu"><a href="../reference/show_segplotly.html">show_segplotly</a></span>(<span class="no">epcdata</span>)</pre></body></html></div>
<div id="htmlwidget-22109af50b3de23e753f" style="width:700px;height:432.632880098888px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-22109af50b3de23e753f">{"x":{"data":[{"x":[1975,1976,1977,1978,1979,1980,1981,1982,1983,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019],"y":[13.2075396825397,10.8822222222222,11.4036666666667,9.51515151515152,17.9981818181818,13.8709090909091,12.0290909090909,12.9896296296296,17.540303030303,9.16066666666667,11.1643333333333,10.586619047619,9.30424242424242,8.15944444444444,9.34694444444444,9.3352696969697,8.28598225108225,7.87528703703704,7.58873888888889,9.43491666666667,11.5207388888889,6.84795555555556,8.36139444444444,11.2267055555556,8.13100833333333,7.16749444444444,8.60295555555556,7.82525634920635,11.7178115384615,11.810648015873,8.42761904761905,6.28166666666667,8.63777777777778,9.27111111111111,12.1211111111111,7.44238095238095,11.4133333333333,7.83055555555556,8.66444444444445,7.86277777777778,10.6711111111111,8.98666666666667,9.53555555555556,9.21666666666667,9.78388888888889],"text":["yr: 1975<br />yval: 13.207540<br />","yr: 1976<br />yval: 10.882222<br />","yr: 1977<br />yval: 11.403667<br />","yr: 1978<br />yval:  9.515152<br />","yr: 1979<br />yval: 17.998182<br />","yr: 1980<br />yval: 13.870909<br />","yr: 1981<br />yval: 12.029091<br />","yr: 1982<br />yval: 12.989630<br />","yr: 1983<br />yval: 17.540303<br />","yr: 1984<br />yval:  9.160667<br />","yr: 1985<br />yval: 11.164333<br />","yr: 1986<br />yval: 10.586619<br />","yr: 1987<br />yval:  9.304242<br />","yr: 1988<br />yval:  8.159444<br />","yr: 1989<br />yval:  9.346944<br />","yr: 1990<br />yval:  9.335270<br />","yr: 1991<br />yval:  8.285982<br />","yr: 1992<br />yval:  7.875287<br />","yr: 1993<br />yval:  7.588739<br />","yr: 1994<br />yval:  9.434917<br />","yr: 1995<br />yval: 11.520739<br />","yr: 1996<br />yval:  6.847956<br />","yr: 1997<br />yval:  8.361394<br />","yr: 1998<br />yval: 11.226706<br />","yr: 1999<br />yval:  8.131008<br />","yr: 2000<br />yval:  7.167494<br />","yr: 2001<br />yval:  8.602956<br />","yr: 2002<br />yval:  7.825256<br />","yr: 2003<br />yval: 11.717812<br />","yr: 2004<br />yval: 11.810648<br />","yr: 2005<br />yval:  8.427619<br />","yr: 2006<br />yval:  6.281667<br />","yr: 2007<br />yval:  8.637778<br />","yr: 2008<br />yval:  9.271111<br />","yr: 2009<br />yval: 12.121111<br />","yr: 2010<br />yval:  7.442381<br />","yr: 2011<br />yval: 11.413333<br />","yr: 2012<br />yval:  7.830556<br />","yr: 2013<br />yval:  8.664444<br />","yr: 2014<br />yval:  7.862778<br />","yr: 2015<br />yval: 10.671111<br />","yr: 2016<br />yval:  8.986667<br />","yr: 2017<br />yval:  9.535556<br />","yr: 2018<br />yval:  9.216667<br />","yr: 2019<br />yval:  9.783889<br />"],"type":"scatter","mode":"markers+lines","marker":{"autocolorscale":false,"color":"rgba(255,0,0,1)","opacity":1,"size":11.3385826771654,"symbol":"circle","line":{"width":1.88976377952756,"color":"rgba(255,0,0,1)"}},"hoveron":"points","name":"Annual Mean","legendgroup":"Annual Mean","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","line":{"width":2.83464566929134,"color":"rgba(255,0,0,1)","dash":"solid"},"frame":null},{"x":[1974.55,2019.45],"y":[8.5,8.5],"text":"trgnum: 8.5<br />colour: Management Target","type":"scatter","mode":"lines","line":{"width":1.88976377952756,"color":"rgba(0,0,255,1)","dash":"solid"},"hoveron":"points","name":"Management Target","legendgroup":"Management Target","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[1974.55,2019.45],"y":[8.9,8.9],"text":"smlnum: 8.9<br />colour: +1 se (small exceedance)","type":"scatter","mode":"lines","line":{"width":1.88976377952756,"color":"rgba(0,0,255,1)","dash":"dash"},"hoveron":"points","name":"+1 se (small exceedance)","legendgroup":"+1 se (small exceedance)","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[1974.55,2019.45],"y":[9.3,9.3],"text":"thrnum: 9.3<br />colour: +2 se (large exceedance)","type":"scatter","mode":"lines","line":{"width":1.88976377952756,"color":"rgba(0,0,255,1)","dash":"dot"},"hoveron":"points","name":"+2 se (large exceedance)","legendgroup":"+2 se (large exceedance)","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[1983.5,1984.5,1984.5,1983.5,1983.5,null,1987.5,1988.5,1988.5,1987.5,1987.5,null,1990.5,1991.5,1991.5,1990.5,1990.5,null,1991.5,1992.5,1992.5,1991.5,1991.5,null,1992.5,1993.5,1993.5,1992.5,1992.5,null,1995.5,1996.5,1996.5,1995.5,1995.5,null,1996.5,1997.5,1997.5,1996.5,1996.5,null,1998.5,1999.5,1999.5,1998.5,1998.5,null,1999.5,2000.5,2000.5,1999.5,1999.5,null,2000.5,2001.5,2001.5,2000.5,2000.5,null,2001.5,2002.5,2002.5,2001.5,2001.5,null,2004.5,2005.5,2005.5,2004.5,2004.5,null,2005.5,2006.5,2006.5,2005.5,2005.5,null,2006.5,2007.5,2007.5,2006.5,2006.5,null,2007.5,2008.5,2008.5,2007.5,2007.5,null,2009.5,2010.5,2010.5,2009.5,2009.5,null,2011.5,2012.5,2012.5,2011.5,2011.5,null,2012.5,2013.5,2013.5,2012.5,2012.5,null,2013.5,2014.5,2014.5,2013.5,2013.5,null,2015.5,2016.5,2016.5,2015.5,2015.5,null,2017.5,2018.5,2018.5,2017.5,2017.5,null,1986.5,1987.5,1987.5,1986.5,1986.5,null,1987.5,1988.5,1988.5,1987.5,1987.5,null,1989.5,1990.5,1990.5,1989.5,1989.5,null,1990.5,1991.5,1991.5,1990.5,1990.5,null,1991.5,1992.5,1992.5,1991.5,1991.5,null,1993.5,1994.5,1994.5,1993.5,1993.5,null,1996.5,1997.5,1997.5,1996.5,1996.5,null,1999.5,2000.5,2000.5,1999.5,1999.5,null,2003.5,2004.5,2004.5,2003.5,2003.5,null,2004.5,2005.5,2005.5,2004.5,2004.5,null,2005.5,2006.5,2006.5,2005.5,2005.5,null,2006.5,2007.5,2007.5,2006.5,2006.5,null,2007.5,2008.5,2008.5,2007.5,2007.5,null,2008.5,2009.5,2009.5,2008.5,2008.5,null,2009.5,2010.5,2010.5,2009.5,2009.5,null,2011.5,2012.5,2012.5,2011.5,2011.5,null,2012.5,2013.5,2013.5,2012.5,2012.5,null,2013.5,2014.5,2014.5,2013.5,2013.5,null,2014.5,2015.5,2015.5,2014.5,2014.5,null,2015.5,2016.5,2016.5,2015.5,2015.5,null,2016.5,2017.5,2017.5,2016.5,2016.5,null,2017.5,2018.5,2018.5,2017.5,2017.5,null,2018.5,2019.5,2019.5,2018.5,2018.5,null,1987.5,1988.5,1988.5,1987.5,1987.5,null,1990.5,1991.5,1991.5,1990.5,1990.5,null,1991.5,1992.5,1992.5,1991.5,1991.5,null,1996.5,1997.5,1997.5,1996.5,1996.5,null,1999.5,2000.5,2000.5,1999.5,1999.5,null,2004.5,2005.5,2005.5,2004.5,2004.5,null,2005.5,2006.5,2006.5,2005.5,2005.5,null,2006.5,2007.5,2007.5,2006.5,2006.5,null,2009.5,2010.5,2010.5,2009.5,2009.5,null,2011.5,2012.5,2012.5,2011.5,2011.5,null,2012.5,2013.5,2013.5,2012.5,2012.5,null,2013.5,2014.5,2014.5,2013.5,2013.5],"y":[2.5,2.5,3.5,3.5,2.5,null,2.5,2.5,3.5,3.5,2.5,null,2.5,2.5,3.5,3.5,2.5,null,2.5,2.5,3.5,3.5,2.5,null,2.5,2.5,3.5,3.5,2.5,null,2.5,2.5,3.5,3.5,2.5,null,2.5,2.5,3.5,3.5,2.5,null,2.5,2.5,3.5,3.5,2.5,null,2.5,2.5,3.5,3.5,2.5,null,2.5,2.5,3.5,3.5,2.5,null,2.5,2.5,3.5,3.5,2.5,null,2.5,2.5,3.5,3.5,2.5,null,2.5,2.5,3.5,3.5,2.5,null,2.5,2.5,3.5,3.5,2.5,null,2.5,2.5,3.5,3.5,2.5,null,2.5,2.5,3.5,3.5,2.5,null,2.5,2.5,3.5,3.5,2.5,null,2.5,2.5,3.5,3.5,2.5,null,2.5,2.5,3.5,3.5,2.5,null,2.5,2.5,3.5,3.5,2.5,null,2.5,2.5,3.5,3.5,2.5,null,0.5,0.5,1.5,1.5,0.5,null,0.5,0.5,1.5,1.5,0.5,null,0.5,0.5,1.5,1.5,0.5,null,0.5,0.5,1.5,1.5,0.5,null,0.5,0.5,1.5,1.5,0.5,null,0.5,0.5,1.5,1.5,0.5,null,0.5,0.5,1.5,1.5,0.5,null,0.5,0.5,1.5,1.5,0.5,null,0.5,0.5,1.5,1.5,0.5,null,0.5,0.5,1.5,1.5,0.5,null,0.5,0.5,1.5,1.5,0.5,null,0.5,0.5,1.5,1.5,0.5,null,0.5,0.5,1.5,1.5,0.5,null,0.5,0.5,1.5,1.5,0.5,null,0.5,0.5,1.5,1.5,0.5,null,0.5,0.5,1.5,1.5,0.5,null,0.5,0.5,1.5,1.5,0.5,null,0.5,0.5,1.5,1.5,0.5,null,0.5,0.5,1.5,1.5,0.5,null,0.5,0.5,1.5,1.5,0.5,null,0.5,0.5,1.5,1.5,0.5,null,0.5,0.5,1.5,1.5,0.5,null,0.5,0.5,1.5,1.5,0.5,null,1.5,1.5,2.5,2.5,1.5,null,1.5,1.5,2.5,2.5,1.5,null,1.5,1.5,2.5,2.5,1.5,null,1.5,1.5,2.5,2.5,1.5,null,1.5,1.5,2.5,2.5,1.5,null,1.5,1.5,2.5,2.5,1.5,null,1.5,1.5,2.5,2.5,1.5,null,1.5,1.5,2.5,2.5,1.5,null,1.5,1.5,2.5,2.5,1.5,null,1.5,1.5,2.5,2.5,1.5,null,1.5,1.5,2.5,2.5,1.5,null,1.5,1.5,2.5,2.5,1.5],"text":"","type":"scatter","mode":"lines","line":{"width":0.377952755905512,"color":"rgba(0,0,0,1)","dash":"solid"},"fill":"toself","fillcolor":"rgba(0,255,0,1)","hoveron":"fills","name":"green","legendgroup":"green","showlegend":false,"xaxis":"x","yaxis":"y2","hoverinfo":"text","frame":null},{"x":[1974.5,1975.5,1975.5,1974.5,1974.5,null,1975.5,1976.5,1976.5,1975.5,1975.5,null,1976.5,1977.5,1977.5,1976.5,1976.5,null,1977.5,1978.5,1978.5,1977.5,1977.5,null,1978.5,1979.5,1979.5,1978.5,1978.5,null,1979.5,1980.5,1980.5,1979.5,1979.5,null,1980.5,1981.5,1981.5,1980.5,1980.5,null,1981.5,1982.5,1982.5,1981.5,1981.5,null,1982.5,1983.5,1983.5,1982.5,1982.5,null,1984.5,1985.5,1985.5,1984.5,1984.5,null,1985.5,1986.5,1986.5,1985.5,1985.5,null,1986.5,1987.5,1987.5,1986.5,1986.5,null,1988.5,1989.5,1989.5,1988.5,1988.5,null,1989.5,1990.5,1990.5,1989.5,1989.5,null,1993.5,1994.5,1994.5,1993.5,1993.5,null,1994.5,1995.5,1995.5,1994.5,1994.5,null,1997.5,1998.5,1998.5,1997.5,1997.5,null,2002.5,2003.5,2003.5,2002.5,2002.5,null,2003.5,2004.5,2004.5,2003.5,2003.5,null,2008.5,2009.5,2009.5,2008.5,2008.5,null,2010.5,2011.5,2011.5,2010.5,2010.5,null,2014.5,2015.5,2015.5,2014.5,2014.5,null,2016.5,2017.5,2017.5,2016.5,2016.5,null,2018.5,2019.5,2019.5,2018.5,2018.5,null,1974.5,1975.5,1975.5,1974.5,1974.5,null,1975.5,1976.5,1976.5,1975.5,1975.5,null,1976.5,1977.5,1977.5,1976.5,1976.5,null,1977.5,1978.5,1978.5,1977.5,1977.5,null,1978.5,1979.5,1979.5,1978.5,1978.5,null,1979.5,1980.5,1980.5,1979.5,1979.5,null,1980.5,1981.5,1981.5,1980.5,1980.5,null,1981.5,1982.5,1982.5,1981.5,1981.5,null,1982.5,1983.5,1983.5,1982.5,1982.5,null,1983.5,1984.5,1984.5,1983.5,1983.5,null,1984.5,1985.5,1985.5,1984.5,1984.5,null,1985.5,1986.5,1986.5,1985.5,1985.5,null,1988.5,1989.5,1989.5,1988.5,1988.5,null,1992.5,1993.5,1993.5,1992.5,1992.5,null,1994.5,1995.5,1995.5,1994.5,1994.5,null,1995.5,1996.5,1996.5,1995.5,1995.5,null,1997.5,1998.5,1998.5,1997.5,1997.5,null,1998.5,1999.5,1999.5,1998.5,1998.5,null,2000.5,2001.5,2001.5,2000.5,2000.5,null,2001.5,2002.5,2002.5,2001.5,2001.5,null,2002.5,2003.5,2003.5,2002.5,2002.5,null,2010.5,2011.5,2011.5,2010.5,2010.5,null,1974.5,1975.5,1975.5,1974.5,1974.5,null,1975.5,1976.5,1976.5,1975.5,1975.5,null,1976.5,1977.5,1977.5,1976.5,1976.5,null,1977.5,1978.5,1978.5,1977.5,1977.5,null,1978.5,1979.5,1979.5,1978.5,1978.5,null,1979.5,1980.5,1980.5,1979.5,1979.5,null,1980.5,1981.5,1981.5,1980.5,1980.5,null,1981.5,1982.5,1982.5,1981.5,1981.5,null,1982.5,1983.5,1983.5,1982.5,1982.5,null,1983.5,1984.5,1984.5,1983.5,1983.5,null,1984.5,1985.5,1985.5,1984.5,1984.5,null,1985.5,1986.5,1986.5,1985.5,1985.5,null,1988.5,1989.5,1989.5,1988.5,1988.5,null,1994.5,1995.5,1995.5,1994.5,1994.5,null,1997.5,1998.5,1998.5,1997.5,1997.5,null,2002.5,2003.5,2003.5,2002.5,2002.5,null,2003.5,2004.5,2004.5,2003.5,2003.5,null,2010.5,2011.5,2011.5,2010.5,2010.5],"y":[2.5,2.5,3.5,3.5,2.5,null,2.5,2.5,3.5,3.5,2.5,null,2.5,2.5,3.5,3.5,2.5,null,2.5,2.5,3.5,3.5,2.5,null,2.5,2.5,3.5,3.5,2.5,null,2.5,2.5,3.5,3.5,2.5,null,2.5,2.5,3.5,3.5,2.5,null,2.5,2.5,3.5,3.5,2.5,null,2.5,2.5,3.5,3.5,2.5,null,2.5,2.5,3.5,3.5,2.5,null,2.5,2.5,3.5,3.5,2.5,null,2.5,2.5,3.5,3.5,2.5,null,2.5,2.5,3.5,3.5,2.5,null,2.5,2.5,3.5,3.5,2.5,null,2.5,2.5,3.5,3.5,2.5,null,2.5,2.5,3.5,3.5,2.5,null,2.5,2.5,3.5,3.5,2.5,null,2.5,2.5,3.5,3.5,2.5,null,2.5,2.5,3.5,3.5,2.5,null,2.5,2.5,3.5,3.5,2.5,null,2.5,2.5,3.5,3.5,2.5,null,2.5,2.5,3.5,3.5,2.5,null,2.5,2.5,3.5,3.5,2.5,null,2.5,2.5,3.5,3.5,2.5,null,0.5,0.5,1.5,1.5,0.5,null,0.5,0.5,1.5,1.5,0.5,null,0.5,0.5,1.5,1.5,0.5,null,0.5,0.5,1.5,1.5,0.5,null,0.5,0.5,1.5,1.5,0.5,null,0.5,0.5,1.5,1.5,0.5,null,0.5,0.5,1.5,1.5,0.5,null,0.5,0.5,1.5,1.5,0.5,null,0.5,0.5,1.5,1.5,0.5,null,0.5,0.5,1.5,1.5,0.5,null,0.5,0.5,1.5,1.5,0.5,null,0.5,0.5,1.5,1.5,0.5,null,0.5,0.5,1.5,1.5,0.5,null,0.5,0.5,1.5,1.5,0.5,null,0.5,0.5,1.5,1.5,0.5,null,0.5,0.5,1.5,1.5,0.5,null,0.5,0.5,1.5,1.5,0.5,null,0.5,0.5,1.5,1.5,0.5,null,0.5,0.5,1.5,1.5,0.5,null,0.5,0.5,1.5,1.5,0.5,null,0.5,0.5,1.5,1.5,0.5,null,0.5,0.5,1.5,1.5,0.5,null,1.5,1.5,2.5,2.5,1.5,null,1.5,1.5,2.5,2.5,1.5,null,1.5,1.5,2.5,2.5,1.5,null,1.5,1.5,2.5,2.5,1.5,null,1.5,1.5,2.5,2.5,1.5,null,1.5,1.5,2.5,2.5,1.5,null,1.5,1.5,2.5,2.5,1.5,null,1.5,1.5,2.5,2.5,1.5,null,1.5,1.5,2.5,2.5,1.5,null,1.5,1.5,2.5,2.5,1.5,null,1.5,1.5,2.5,2.5,1.5,null,1.5,1.5,2.5,2.5,1.5,null,1.5,1.5,2.5,2.5,1.5,null,1.5,1.5,2.5,2.5,1.5,null,1.5,1.5,2.5,2.5,1.5,null,1.5,1.5,2.5,2.5,1.5,null,1.5,1.5,2.5,2.5,1.5,null,1.5,1.5,2.5,2.5,1.5],"text":"","type":"scatter","mode":"lines","line":{"width":0.377952755905512,"color":"rgba(0,0,0,1)","dash":"solid"},"fill":"toself","fillcolor":"rgba(255,0,0,1)","hoveron":"fills","name":"red","legendgroup":"red","showlegend":false,"xaxis":"x","yaxis":"y2","hoverinfo":"text","frame":null},{"x":[1986.5,1987.5,1987.5,1986.5,1986.5,null,1989.5,1990.5,1990.5,1989.5,1989.5,null,1992.5,1993.5,1993.5,1992.5,1992.5,null,1993.5,1994.5,1994.5,1993.5,1993.5,null,1995.5,1996.5,1996.5,1995.5,1995.5,null,1998.5,1999.5,1999.5,1998.5,1998.5,null,2000.5,2001.5,2001.5,2000.5,2000.5,null,2001.5,2002.5,2002.5,2001.5,2001.5,null,2007.5,2008.5,2008.5,2007.5,2007.5,null,2008.5,2009.5,2009.5,2008.5,2008.5,null,2014.5,2015.5,2015.5,2014.5,2014.5,null,2015.5,2016.5,2016.5,2015.5,2015.5,null,2016.5,2017.5,2017.5,2016.5,2016.5,null,2017.5,2018.5,2018.5,2017.5,2017.5,null,2018.5,2019.5,2019.5,2018.5,2018.5],"y":[1.5,1.5,2.5,2.5,1.5,null,1.5,1.5,2.5,2.5,1.5,null,1.5,1.5,2.5,2.5,1.5,null,1.5,1.5,2.5,2.5,1.5,null,1.5,1.5,2.5,2.5,1.5,null,1.5,1.5,2.5,2.5,1.5,null,1.5,1.5,2.5,2.5,1.5,null,1.5,1.5,2.5,2.5,1.5,null,1.5,1.5,2.5,2.5,1.5,null,1.5,1.5,2.5,2.5,1.5,null,1.5,1.5,2.5,2.5,1.5,null,1.5,1.5,2.5,2.5,1.5,null,1.5,1.5,2.5,2.5,1.5,null,1.5,1.5,2.5,2.5,1.5,null,1.5,1.5,2.5,2.5,1.5],"text":"","type":"scatter","mode":"lines","line":{"width":0.377952755905512,"color":"rgba(0,0,0,1)","dash":"solid"},"fill":"toself","fillcolor":"rgba(255,255,0,1)","hoveron":"fills","name":"yellow","legendgroup":"yellow","showlegend":false,"xaxis":"x","yaxis":"y2","hoverinfo":"text","frame":null},{"x":[1975,1976,1977,1978,1979,1980,1981,1982,1983,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019],"y":[0.978095177201016,1.17593180364519,1.18960159096832,1.16821728448392,1.75952299108914,1.38362675239718,1.04690251192775,1.05838602208694,1.11526779318317,1.16175023669408,0.953490470838222,0.892931265643614,0.853619776563597,0.855859894388937,0.937465070051951,0.835322944232089,0.803178843001614,0.816672899541708,0.913374587107628,0.748148400760067,0.93796373126689,0.920269984692915,0.84738400353513,1.06127294311022,0.880165530061336,0.732816555336023,0.951271417657972,0.927280187840518,1.03709983268265,0.87774063179473,0.769357912207249,0.62042666877326,0.677130432786781,0.696224441111594,0.807696215896146,0.841963519007931,0.912218318171358,0.686763318060881,0.56745021236724,0.60568855167188,0.560497764267636,0.574735601457746,0.682121036643163,0.67804251741757,0.73960494357055],"text":["yr: 1975<br />yval: 0.9780952<br />","yr: 1976<br />yval: 1.1759318<br />","yr: 1977<br />yval: 1.1896016<br />","yr: 1978<br />yval: 1.1682173<br />","yr: 1979<br />yval: 1.7595230<br />","yr: 1980<br />yval: 1.3836268<br />","yr: 1981<br />yval: 1.0469025<br />","yr: 1982<br />yval: 1.0583860<br />","yr: 1983<br />yval: 1.1152678<br />","yr: 1984<br />yval: 1.1617502<br />","yr: 1985<br />yval: 0.9534905<br />","yr: 1986<br />yval: 0.8929313<br />","yr: 1987<br />yval: 0.8536198<br />","yr: 1988<br />yval: 0.8558599<br />","yr: 1989<br />yval: 0.9374651<br />","yr: 1990<br />yval: 0.8353229<br />","yr: 1991<br />yval: 0.8031788<br />","yr: 1992<br />yval: 0.8166729<br />","yr: 1993<br />yval: 0.9133746<br />","yr: 1994<br />yval: 0.7481484<br />","yr: 1995<br />yval: 0.9379637<br />","yr: 1996<br />yval: 0.9202700<br />","yr: 1997<br />yval: 0.8473840<br />","yr: 1998<br />yval: 1.0612729<br />","yr: 1999<br />yval: 0.8801655<br />","yr: 2000<br />yval: 0.7328166<br />","yr: 2001<br />yval: 0.9512714<br />","yr: 2002<br />yval: 0.9272802<br />","yr: 2003<br />yval: 1.0370998<br />","yr: 2004<br />yval: 0.8777406<br />","yr: 2005<br />yval: 0.7693579<br />","yr: 2006<br />yval: 0.6204267<br />","yr: 2007<br />yval: 0.6771304<br />","yr: 2008<br />yval: 0.6962244<br />","yr: 2009<br />yval: 0.8076962<br />","yr: 2010<br />yval: 0.8419635<br />","yr: 2011<br />yval: 0.9122183<br />","yr: 2012<br />yval: 0.6867633<br />","yr: 2013<br />yval: 0.5674502<br />","yr: 2014<br />yval: 0.6056886<br />","yr: 2015<br />yval: 0.5604978<br />","yr: 2016<br />yval: 0.5747356<br />","yr: 2017<br />yval: 0.6821210<br />","yr: 2018<br />yval: 0.6780425<br />","yr: 2019<br />yval: 0.7396049<br />"],"type":"scatter","mode":"markers+lines","marker":{"autocolorscale":false,"color":"rgba(255,0,0,1)","opacity":1,"size":11.3385826771654,"symbol":"circle","line":{"width":1.88976377952756,"color":"rgba(255,0,0,1)"}},"hoveron":"points","name":"Annual Mean","legendgroup":"Annual Mean","showlegend":false,"xaxis":"x","yaxis":"y3","hoverinfo":"text","line":{"width":2.83464566929134,"color":"rgba(255,0,0,1)","dash":"solid"},"frame":null},{"x":[1974.55,2019.45],"y":[0.83,0.83],"text":"trgnum: 0.83<br />colour: Management Target","type":"scatter","mode":"lines","line":{"width":1.88976377952756,"color":"rgba(0,0,255,1)","dash":"solid"},"hoveron":"points","name":"Management Target","legendgroup":"Management Target","showlegend":false,"xaxis":"x","yaxis":"y3","hoverinfo":"text","frame":null},{"x":[1974.55,2019.45],"y":[0.86,0.86],"text":"smlnum: 0.86<br />colour: +1 se (small exceedance)","type":"scatter","mode":"lines","line":{"width":1.88976377952756,"color":"rgba(0,0,255,1)","dash":"dash"},"hoveron":"points","name":"+1 se (small exceedance)","legendgroup":"+1 se (small exceedance)","showlegend":false,"xaxis":"x","yaxis":"y3","hoverinfo":"text","frame":null},{"x":[1974.55,2019.45],"y":[0.88,0.88],"text":"thrnum: 0.88<br />colour: +2 se (large exceedance)","type":"scatter","mode":"lines","line":{"width":1.88976377952756,"color":"rgba(0,0,255,1)","dash":"dot"},"hoveron":"points","name":"+2 se (large exceedance)","legendgroup":"+2 se (large exceedance)","showlegend":false,"xaxis":"x","yaxis":"y3","hoverinfo":"text","frame":null}],"layout":{"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[1974.55,2019.45],"tickmode":"array","ticktext":["1975","1976","1977","1978","1979","1980","1981","1982","1983","1984","1985","1986","1987","1988","1989","1990","1991","1992","1993","1994","1995","1996","1997","1998","1999","2000","2001","2002","2003","2004","2005","2006","2007","2008","2009","2010","2011","2012","2013","2014","2015","2016","2017","2018","2019"],"tickvals":[1975,1976,1977,1978,1979,1980,1981,1982,1983,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019],"categoryorder":"array","categoryarray":["1975","1976","1977","1978","1979","1980","1981","1982","1983","1984","1985","1986","1987","1988","1989","1990","1991","1992","1993","1994","1995","1996","1997","1998","1999","2000","2001","2002","2003","2004","2005","2006","2007","2008","2009","2010","2011","2012","2013","2014","2015","2016","2017","2018","2019"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":9.29846409298464},"tickangle":-45,"showline":false,"linecolor":null,"linewidth":0,"showgrid":false,"gridcolor":null,"gridwidth":0,"zeroline":false,"anchor":"y3","title":{"text":"","font":{"color":null,"family":null,"size":0}},"hoverformat":".2f"},"yaxis3":{"domain":[0,0.38],"automargin":true,"type":"linear","autorange":false,"range":[0.500546502926561,1.81947425243021],"tickmode":"array","ticktext":["0.75","1.00","1.25","1.50","1.75"],"tickvals":[0.75,1,1.25,1.5,1.75],"categoryorder":"array","categoryarray":["0.75","1.00","1.25","1.50","1.75"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":false,"gridcolor":null,"gridwidth":0,"zeroline":false,"anchor":"x","title":{"text":"Mean Annual Light Attenuation (m-1)","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}},"hoverformat":".2f"},"yaxis2":{"domain":[0.42,0.58],"automargin":true,"type":"linear","autorange":false,"range":[0.5,3.5],"tickmode":"array","ticktext":["Light attenuation","Management outcome","Chlorophyll-a"],"tickvals":[1,2,3],"categoryorder":"array","categoryarray":["Light attenuation","Management outcome","Chlorophyll-a"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":15.9402241594022},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(235,235,235,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"x","title":{"text":"","font":{"color":null,"family":null,"size":0}},"hoverformat":".2f"},"yaxis":{"domain":[0.62,1],"automargin":true,"type":"linear","autorange":false,"range":[5.69584090909091,18.5840075757576],"tickmode":"array","ticktext":["6","9","12","15","18"],"tickvals":[6,9,12,15,18],"categoryorder":"array","categoryarray":["6","9","12","15","18"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":false,"gridcolor":null,"gridwidth":0,"zeroline":false,"anchor":"x","title":{"text":"Mean Annual Chlorophyll-a (ug/L)","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}},"hoverformat":".2f"},"annotations":[],"shapes":[{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0.62,"y1":1},{"type":"rect","fillcolor":"transparent","line":{"color":"rgba(51,51,51,1)","width":0.66417600664176,"linetype":"solid"},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0.42,"y1":0.58},{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":0.38}],"images":[],"margin":{"t":27.8246364188244,"r":7.30593607305936,"b":26.400098090227,"l":48.9497716894977},"plot_bgcolor":"rgba(236,236,236,1)","paper_bgcolor":"rgba(255,255,255,1)","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187},"showlegend":true,"legend":{"bgcolor":"transparent","bordercolor":"transparent","borderwidth":1.88976377952756,"font":{"color":"rgba(0,0,0,1)","family":"","size":11.689497716895},"y":1},"hovermode":"closest","barmode":"relative"},"attrs":{"49a8523823f5":{"x":{},"y":{},"colour":{},"type":"scatter"},"49a831566a77":{"x":{},"y":{},"colour":{}},"49a8553c3d4":{"yintercept":{},"colour":{}},"49a81772bcc":{"yintercept":{},"colour":{}},"49a85bf5176b":{"yintercept":{},"colour":{}},"49a81dd9494c":{"x":{},"y":{},"fill":{},"type":"scatter"},"49a82cd142ee":{"x":{},"y":{},"colour":{},"type":"scatter"},"49a81cee9":{"x":{},"y":{},"colour":{}},"49a839286702":{"yintercept":{},"colour":{}},"49a87c3d3983":{"yintercept":{},"colour":{}},"49a8a03301d":{"yintercept":{},"colour":{}}},"source":"A","config":{"doubleClick":"reset","showSendToCloud":false},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"subplot":true,"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script><p>From these plots, we can quickly view a summary of the environmental history of water quality in Tampa Bay. Degraded conditions were common early in the period of record, particularly for Old Tampa Bay and Hillsborough Bay. Conditions began to improve by the late 1980s and early 1990s, with good conditions persisting to present day. However, recent trends in Old Tampa Bay have shown conditions changing from “stay the course” to “caution”.</p>
</div>
<div id="references" class="section level1 unnumbered">
<h1 class="hasAnchor">
<a href="#references" class="anchor"></a>References</h1>
<div id="refs" class="references">
<div id="ref-Poe05">
<p>[1] A. Poe, K. Hackett, S. Janicki, R. Pribble, A. Janicki, Estimates of total nitrogen, total phosphorus, total suspended solids, and biochemical oxygen demand loadings to Tampa Bay, Florida: 1999-2003, Tampa Bay Estuary Program, St. Petersburg, Florida, USA, 2005. <a href="https://tbeptech.org/TBEP_TECH_PUBS/2005/TBEP_02_05Loadings99_03.pdf">https://tbeptech.org/TBEP_TECH_PUBS/2005/TBEP_02_05Loadings99_03.pdf</a>.</p>
</div>
<div id="ref-Greening06">
<p>[2] H. Greening, A. Janicki, Toward reversal of eutrophic conditions in a subtropical estuary: Water quality and seagrass response to nitrogen loading reductions in Tampa Bay, Florida, USA, Environmental Management. 38 (2006) 163–178.</p>
</div>
<div id="ref-Tomasko05">
<p>[3] D.A. Tomasko, C.A. Corbett, H.S. Greening, G.E. Raulerson, Spatial and temporal variation in seagrass coverage in Southwest Florida: Assessing the relative effects of anthropogenic nutrient load reductions and rainfall in four contiguous estuaries, Marine Pollution Bulletin. 50 (2005) 797–805.</p>
</div>
<div id="ref-Santos80">
<p>[4] S.L. Santos, J.L. Simon, Marine soft-bottom community establishment following annual defaunation: Larval or adult recruitment, Marine Ecology - Progress Series. 2 (1980) 235–241.</p>
</div>
<div id="ref-Beck15">
<p>[5] M.W. Beck, J.D. Hagy III, Adaptation of a weighted regression approach to evaluate water quality trends in an estuary, Environmental Modelling and Assessment. 20 (2015) 637–655. <a href="https://doi.org/10.1007/s10666-015-9452-8">https://doi.org/10.1007/s10666-015-9452-8</a>.</p>
</div>
<div id="ref-Sherwood16">
<p>[6] E.T. Sherwood, H.S. Greening, A.J. Janicki, D.J. Karlen, Tampa Bay estuary: Monitoring long-term recovery through regional partnerships, Regional Studies in Marine Science. 4 (2016) 1–11. <a href="https://doi.org/10.1016/j.rsma.2015.05.005">https://doi.org/10.1016/j.rsma.2015.05.005</a>.</p>
</div>
<div id="ref-TBEP17">
<p>[7] TBEP (Tampa Bay Estuary Program), Tampa Bay Water Atlas, (2017).</p>
</div>
<div id="ref-Janicki99">
<p>[8] A. Janicki, D. Wade, J.R. Pribble, Development of a process to track the status of chlorophyll and light attenuation to support seagrass restoration goals in Tampa Bay, Tampa Bay National Estuary Program, St. Petersburg, Florida, 1999. <a href="https://tbeptech.org/TBEP_TECH_PUBS/2000/TBEP_04_00Chlor-A.pdf">https://tbeptech.org/TBEP_TECH_PUBS/2000/TBEP_04_00Chlor-A.pdf</a>.</p>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Marcus Beck, Meagan Schrandt, Mike Wessel, Ed Sherwood, Ben Best.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
